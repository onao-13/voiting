{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar parseText_1 = require(\"./helper/parseText\");\nvar TSpan_1 = require(\"./TSpan\");\nvar util_1 = require(\"../core/util\");\nvar text_1 = require(\"../contain/text\");\nvar Image_1 = require(\"./Image\");\nvar Rect_1 = require(\"./shape/Rect\");\nvar BoundingRect_1 = require(\"../core/BoundingRect\");\nvar matrix_1 = require(\"../core/matrix\");\nvar Displayable_1 = require(\"./Displayable\");\nvar DEFAULT_RICH_TEXT_COLOR = {\n  fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexports.DEFAULT_TEXT_ANIMATION_PROPS = {\n  style: util_1.defaults({\n    fill: true,\n    stroke: true,\n    fillOpacity: true,\n    strokeOpacity: true,\n    lineWidth: true,\n    fontSize: true,\n    lineHeight: true,\n    width: true,\n    height: true,\n    textShadowColor: true,\n    textShadowBlur: true,\n    textShadowOffsetX: true,\n    textShadowOffsetY: true,\n    backgroundColor: true,\n    padding: true,\n    borderColor: true,\n    borderWidth: true,\n    borderRadius: true\n  }, Displayable_1.DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = function (_super) {\n  tslib_1.__extends(ZRText, _super);\n  function ZRText(opts) {\n    var _this = _super.call(this) || this;\n    _this.type = 'text';\n    _this._children = [];\n    _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n    _this.attr(opts);\n    return _this;\n  }\n  ZRText.prototype.childrenRef = function () {\n    return this._children;\n  };\n  ZRText.prototype.update = function () {\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      child.zlevel = this.zlevel;\n      child.z = this.z;\n      child.z2 = this.z2;\n      child.culling = this.culling;\n      child.cursor = this.cursor;\n      child.invisible = this.invisible;\n    }\n    var attachedTransform = this.attachedTransform;\n    if (attachedTransform) {\n      attachedTransform.updateTransform();\n      var m = attachedTransform.transform;\n      if (m) {\n        this.transform = this.transform || [];\n        matrix_1.copy(this.transform, m);\n      } else {\n        this.transform = null;\n      }\n    } else {\n      _super.prototype.update.call(this);\n    }\n  };\n  ZRText.prototype.getComputedTransform = function () {\n    if (this.__hostTarget) {\n      this.__hostTarget.getComputedTransform();\n      this.__hostTarget.updateInnerText(true);\n    }\n    return this.attachedTransform ? this.attachedTransform.getComputedTransform() : _super.prototype.getComputedTransform.call(this);\n  };\n  ZRText.prototype._updateSubTexts = function () {\n    this._childCursor = 0;\n    normalizeTextStyle(this.style);\n    this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();\n    this._children.length = this._childCursor;\n    this.styleUpdated();\n  };\n  ZRText.prototype.addSelfToZr = function (zr) {\n    _super.prototype.addSelfToZr.call(this, zr);\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = zr;\n    }\n  };\n  ZRText.prototype.removeSelfFromZr = function (zr) {\n    _super.prototype.removeSelfFromZr.call(this, zr);\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = null;\n    }\n  };\n  ZRText.prototype.getBoundingRect = function () {\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n    if (!this._rect) {\n      var tmpRect = new BoundingRect_1[\"default\"](0, 0, 0, 0);\n      var children = this._children;\n      var tmpMat = [];\n      var rect = null;\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        var childRect = child.getBoundingRect();\n        var transform = child.getLocalTransform(tmpMat);\n        if (transform) {\n          tmpRect.copy(childRect);\n          tmpRect.applyTransform(transform);\n          rect = rect || tmpRect.clone();\n          rect.union(tmpRect);\n        } else {\n          rect = rect || childRect.clone();\n          rect.union(childRect);\n        }\n      }\n      this._rect = rect || tmpRect;\n    }\n    return this._rect;\n  };\n  ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n    this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n  };\n  ZRText.prototype.setTextContent = function (textContent) {\n    throw new Error('Can\\'t attach text on another text');\n  };\n  ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n    if (!sourceStyle) {\n      return targetStyle;\n    }\n    var sourceRich = sourceStyle.rich;\n    var targetRich = targetStyle.rich || sourceRich && {};\n    util_1.extend(targetStyle, sourceStyle);\n    if (sourceRich && targetRich) {\n      this._mergeRich(targetRich, sourceRich);\n      targetStyle.rich = targetRich;\n    } else if (targetRich) {\n      targetStyle.rich = targetRich;\n    }\n    return targetStyle;\n  };\n  ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n    var richNames = util_1.keys(sourceRich);\n    for (var i = 0; i < richNames.length; i++) {\n      var richName = richNames[i];\n      targetRich[richName] = targetRich[richName] || {};\n      util_1.extend(targetRich[richName], sourceRich[richName]);\n    }\n  };\n  ZRText.prototype.getAnimationStyleProps = function () {\n    return exports.DEFAULT_TEXT_ANIMATION_PROPS;\n  };\n  ZRText.prototype._getOrCreateChild = function (Ctor) {\n    var child = this._children[this._childCursor];\n    if (!child || !(child instanceof Ctor)) {\n      child = new Ctor();\n    }\n    this._children[this._childCursor++] = child;\n    child.__zr = this.__zr;\n    child.parent = this;\n    return child;\n  };\n  ZRText.prototype._updatePlainTexts = function () {\n    var style = this.style;\n    var textFont = style.font || text_1.DEFAULT_FONT;\n    var textPadding = style.padding;\n    var text = getStyleText(style);\n    var contentBlock = parseText_1.parsePlainText(text, style);\n    var needDrawBg = needDrawBackground(style);\n    var bgColorDrawn = !!style.backgroundColor;\n    var outerHeight = contentBlock.outerHeight;\n    var textLines = contentBlock.lines;\n    var lineHeight = contentBlock.lineHeight;\n    var defaultStyle = this._defaultStyle;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var textAlign = style.align || defaultStyle.align || 'left';\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n    var textX = baseX;\n    var textY = text_1.adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n    if (needDrawBg || textPadding) {\n      var outerWidth_1 = contentBlock.width;\n      textPadding && (outerWidth_1 += textPadding[1] + textPadding[3]);\n      var boxX = text_1.adjustTextX(baseX, outerWidth_1, textAlign);\n      var boxY = text_1.adjustTextY(baseY, outerHeight, verticalAlign);\n      needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth_1, outerHeight);\n    }\n    textY += lineHeight / 2;\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n      if (verticalAlign === 'top') {\n        textY += textPadding[0];\n      } else if (verticalAlign === 'bottom') {\n        textY -= textPadding[2];\n      }\n    }\n    var defaultLineWidth = 0;\n    var useDefaultFill = false;\n    var textFill = getFill('fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in style ? style.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = style.textShadowBlur > 0;\n    var fixedBoundingRect = style.width != null && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n    var calculatedLineHeight = contentBlock.calculatedLineHeight;\n    for (var i = 0; i < textLines.length; i++) {\n      var el = this._getOrCreateChild(TSpan_1[\"default\"]);\n      var subElStyle = el.createStyle();\n      el.useStyle(subElStyle);\n      subElStyle.text = textLines[i];\n      subElStyle.x = textX;\n      subElStyle.y = textY;\n      if (textAlign) {\n        subElStyle.textAlign = textAlign;\n      }\n      subElStyle.textBaseline = 'middle';\n      subElStyle.opacity = style.opacity;\n      subElStyle.strokeFirst = true;\n      if (hasShadow) {\n        subElStyle.shadowBlur = style.textShadowBlur || 0;\n        subElStyle.shadowColor = style.textShadowColor || 'transparent';\n        subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n        subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n      }\n      if (textStroke) {\n        subElStyle.stroke = textStroke;\n        subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n        subElStyle.lineDash = style.lineDash;\n        subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      }\n      if (textFill) {\n        subElStyle.fill = textFill;\n      }\n      subElStyle.font = textFont;\n      textY += lineHeight;\n      if (fixedBoundingRect) {\n        el.setBoundingRect(new BoundingRect_1[\"default\"](text_1.adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), text_1.adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), style.width, calculatedLineHeight));\n      }\n    }\n  };\n  ZRText.prototype._updateRichTexts = function () {\n    var style = this.style;\n    var text = getStyleText(style);\n    var contentBlock = parseText_1.parseRichText(text, style);\n    var contentWidth = contentBlock.width;\n    var outerWidth = contentBlock.outerWidth;\n    var outerHeight = contentBlock.outerHeight;\n    var textPadding = style.padding;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var defaultStyle = this._defaultStyle;\n    var textAlign = style.align || defaultStyle.align;\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n    var boxX = text_1.adjustTextX(baseX, outerWidth, textAlign);\n    var boxY = text_1.adjustTextY(baseY, outerHeight, verticalAlign);\n    var xLeft = boxX;\n    var lineTop = boxY;\n    if (textPadding) {\n      xLeft += textPadding[3];\n      lineTop += textPadding[0];\n    }\n    var xRight = xLeft + contentWidth;\n    if (needDrawBackground(style)) {\n      this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n    }\n    var bgColorDrawn = !!style.backgroundColor;\n    for (var i = 0; i < contentBlock.lines.length; i++) {\n      var line = contentBlock.lines[i];\n      var tokens = line.tokens;\n      var tokenCount = tokens.length;\n      var lineHeight = line.lineHeight;\n      var remainedWidth = line.width;\n      var leftIndex = 0;\n      var lineXLeft = xLeft;\n      var lineXRight = xRight;\n      var rightIndex = tokenCount - 1;\n      var token = void 0;\n      while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n        remainedWidth -= token.width;\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n      while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === 'right')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n        remainedWidth -= token.width;\n        lineXRight -= token.width;\n        rightIndex--;\n      }\n      lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n      while (leftIndex <= rightIndex) {\n        token = tokens[leftIndex];\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n      lineTop += lineHeight;\n    }\n  };\n  ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n    var tokenStyle = style.rich[token.styleName] || {};\n    tokenStyle.text = token.text;\n    var verticalAlign = token.verticalAlign;\n    var y = lineTop + lineHeight / 2;\n    if (verticalAlign === 'top') {\n      y = lineTop + token.height / 2;\n    } else if (verticalAlign === 'bottom') {\n      y = lineTop + lineHeight - token.height / 2;\n    }\n    var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n    needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n    var bgColorDrawn = !!tokenStyle.backgroundColor;\n    var textPadding = token.textPadding;\n    if (textPadding) {\n      x = getTextXForPadding(x, textAlign, textPadding);\n      y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n    }\n    var el = this._getOrCreateChild(TSpan_1[\"default\"]);\n    var subElStyle = el.createStyle();\n    el.useStyle(subElStyle);\n    var defaultStyle = this._defaultStyle;\n    var useDefaultFill = false;\n    var defaultLineWidth = 0;\n    var textFill = getStroke('fill' in tokenStyle ? tokenStyle.fill : 'fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke : 'stroke' in style ? style.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = tokenStyle.textShadowBlur > 0 || style.textShadowBlur > 0;\n    subElStyle.text = token.text;\n    subElStyle.x = x;\n    subElStyle.y = y;\n    if (hasShadow) {\n      subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n      subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n      subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n      subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n    }\n    subElStyle.textAlign = textAlign;\n    subElStyle.textBaseline = 'middle';\n    subElStyle.font = token.font || text_1.DEFAULT_FONT;\n    subElStyle.opacity = util_1.retrieve3(tokenStyle.opacity, style.opacity, 1);\n    if (textStroke) {\n      subElStyle.lineWidth = util_1.retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n      subElStyle.lineDash = util_1.retrieve2(tokenStyle.lineDash, style.lineDash);\n      subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      subElStyle.stroke = textStroke;\n    }\n    if (textFill) {\n      subElStyle.fill = textFill;\n    }\n    var textWidth = token.contentWidth;\n    var textHeight = token.contentHeight;\n    el.setBoundingRect(new BoundingRect_1[\"default\"](text_1.adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), text_1.adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n  };\n  ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n    var textBackgroundColor = style.backgroundColor;\n    var textBorderWidth = style.borderWidth;\n    var textBorderColor = style.borderColor;\n    var isPlainBg = util_1.isString(textBackgroundColor);\n    var textBorderRadius = style.borderRadius;\n    var self = this;\n    var rectEl;\n    var imgEl;\n    if (isPlainBg || textBorderWidth && textBorderColor) {\n      rectEl = this._getOrCreateChild(Rect_1[\"default\"]);\n      rectEl.useStyle(rectEl.createStyle());\n      rectEl.style.fill = null;\n      var rectShape = rectEl.shape;\n      rectShape.x = x;\n      rectShape.y = y;\n      rectShape.width = width;\n      rectShape.height = height;\n      rectShape.r = textBorderRadius;\n      rectEl.dirtyShape();\n    }\n    if (isPlainBg) {\n      var rectStyle = rectEl.style;\n      rectStyle.fill = textBackgroundColor || null;\n      rectStyle.fillOpacity = util_1.retrieve2(style.fillOpacity, 1);\n    } else if (textBackgroundColor && textBackgroundColor.image) {\n      imgEl = this._getOrCreateChild(Image_1[\"default\"]);\n      imgEl.onload = function () {\n        self.dirtyStyle();\n      };\n      var imgStyle = imgEl.style;\n      imgStyle.image = textBackgroundColor.image;\n      imgStyle.x = x;\n      imgStyle.y = y;\n      imgStyle.width = width;\n      imgStyle.height = height;\n    }\n    if (textBorderWidth && textBorderColor) {\n      var rectStyle = rectEl.style;\n      rectStyle.lineWidth = textBorderWidth;\n      rectStyle.stroke = textBorderColor;\n      rectStyle.strokeOpacity = util_1.retrieve2(style.strokeOpacity, 1);\n      rectStyle.lineDash = style.borderDash;\n      rectStyle.lineDashOffset = style.borderDashOffset || 0;\n      rectEl.strokeContainThreshold = 0;\n      if (rectEl.hasFill() && rectEl.hasStroke()) {\n        rectStyle.strokeFirst = true;\n        rectStyle.lineWidth *= 2;\n      }\n    }\n    var commonStyle = (rectEl || imgEl).style;\n    commonStyle.shadowBlur = style.shadowBlur || 0;\n    commonStyle.shadowColor = style.shadowColor || 'transparent';\n    commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n    commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n    commonStyle.opacity = util_1.retrieve3(style.opacity, topStyle.opacity, 1);\n  };\n  ZRText.makeFont = function (style) {\n    var font = '';\n    if (style.fontSize || style.fontFamily || style.fontWeight) {\n      var fontSize = '';\n      if (typeof style.fontSize === 'string' && (style.fontSize.indexOf('px') !== -1 || style.fontSize.indexOf('rem') !== -1 || style.fontSize.indexOf('em') !== -1)) {\n        fontSize = style.fontSize;\n      } else if (!isNaN(+style.fontSize)) {\n        fontSize = style.fontSize + 'px';\n      } else {\n        fontSize = '12px';\n      }\n      font = [style.fontStyle, style.fontWeight, fontSize, style.fontFamily || 'sans-serif'].join(' ');\n    }\n    return font && util_1.trim(font) || style.textFont || style.font;\n  };\n  return ZRText;\n}(Displayable_1[\"default\"]);\nvar VALID_TEXT_ALIGN = {\n  left: true,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n};\nfunction normalizeTextStyle(style) {\n  normalizeStyle(style);\n  util_1.each(style.rich, normalizeStyle);\n  return style;\n}\nexports.normalizeTextStyle = normalizeTextStyle;\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = ZRText.makeFont(style);\n    var textAlign = style.align;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left';\n    var verticalAlign = style.verticalAlign;\n    verticalAlign === 'center' && (verticalAlign = 'middle');\n    style.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : 'top';\n    var textPadding = style.padding;\n    if (textPadding) {\n      style.padding = util_1.normalizeCssArray(style.padding);\n    }\n  }\n}\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null : fill.image || fill.colorStops ? '#000' : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\nfunction getStyleText(style) {\n  var text = style.text;\n  text != null && (text += '');\n  return text;\n}\nfunction needDrawBackground(style) {\n  return !!(style.backgroundColor || style.borderWidth && style.borderColor);\n}\nexports[\"default\"] = ZRText;","map":{"version":3,"names":["exports","__esModule","tslib_1","require","parseText_1","TSpan_1","util_1","text_1","Image_1","Rect_1","BoundingRect_1","matrix_1","Displayable_1","DEFAULT_RICH_TEXT_COLOR","fill","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","style","defaults","stroke","fillOpacity","strokeOpacity","lineWidth","fontSize","lineHeight","width","height","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","padding","borderColor","borderWidth","borderRadius","DEFAULT_COMMON_ANIMATION_PROPS","ZRText","_super","__extends","opts","_this","call","type","_children","_defaultStyle","attr","prototype","childrenRef","update","styleChanged","_updateSubTexts","i","length","child","zlevel","z","z2","culling","cursor","invisible","attachedTransform","updateTransform","m","transform","copy","getComputedTransform","__hostTarget","updateInnerText","_childCursor","normalizeTextStyle","rich","_updateRichTexts","_updatePlainTexts","styleUpdated","addSelfToZr","zr","__zr","removeSelfFromZr","getBoundingRect","_rect","tmpRect","children","tmpMat","rect","childRect","getLocalTransform","applyTransform","clone","union","setDefaultTextStyle","defaultTextStyle","setTextContent","textContent","Error","_mergeStyle","targetStyle","sourceStyle","sourceRich","targetRich","extend","_mergeRich","richNames","keys","richName","getAnimationStyleProps","_getOrCreateChild","Ctor","parent","textFont","font","DEFAULT_FONT","textPadding","text","getStyleText","contentBlock","parsePlainText","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","textLines","lines","defaultStyle","baseX","x","baseY","y","textAlign","align","verticalAlign","textX","textY","adjustTextY","contentHeight","outerWidth_1","boxX","adjustTextX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","textFill","getFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","el","subElStyle","createStyle","useStyle","textBaseline","opacity","strokeFirst","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","lineDash","lineDashOffset","setBoundingRect","parseRichText","contentWidth","outerWidth","xLeft","lineTop","xRight","line","tokens","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","retrieve3","retrieve2","textWidth","textHeight","topStyle","textBackgroundColor","textBorderWidth","textBorderColor","isPlainBg","isString","textBorderRadius","self","rectEl","imgEl","rectShape","shape","r","dirtyShape","rectStyle","image","onload","dirtyStyle","imgStyle","borderDash","borderDashOffset","strokeContainThreshold","hasFill","hasStroke","commonStyle","makeFont","fontFamily","fontWeight","indexOf","isNaN","fontStyle","join","trim","VALID_TEXT_ALIGN","left","right","center","VALID_TEXT_VERTICAL_ALIGN","top","bottom","middle","normalizeStyle","each","normalizeCssArray","colorStops"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/zrender/lib/graphic/Text.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar parseText_1 = require(\"./helper/parseText\");\nvar TSpan_1 = require(\"./TSpan\");\nvar util_1 = require(\"../core/util\");\nvar text_1 = require(\"../contain/text\");\nvar Image_1 = require(\"./Image\");\nvar Rect_1 = require(\"./shape/Rect\");\nvar BoundingRect_1 = require(\"../core/BoundingRect\");\nvar matrix_1 = require(\"../core/matrix\");\nvar Displayable_1 = require(\"./Displayable\");\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexports.DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: util_1.defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, Displayable_1.DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    tslib_1.__extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n        var attachedTransform = this.attachedTransform;\n        if (attachedTransform) {\n            attachedTransform.updateTransform();\n            var m = attachedTransform.transform;\n            if (m) {\n                this.transform = this.transform || [];\n                matrix_1.copy(this.transform, m);\n            }\n            else {\n                this.transform = null;\n            }\n        }\n        else {\n            _super.prototype.update.call(this);\n        }\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return this.attachedTransform ? this.attachedTransform.getComputedTransform()\n            : _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect_1[\"default\"](0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        throw new Error('Can\\'t attach text on another text');\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        util_1.extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = util_1.keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            util_1.extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return exports.DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || text_1.DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parseText_1.parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = text_1.adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var outerWidth_1 = contentBlock.width;\n            textPadding && (outerWidth_1 += textPadding[1] + textPadding[3]);\n            var boxX = text_1.adjustTextX(baseX, outerWidth_1, textAlign);\n            var boxY = text_1.adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth_1, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan_1[\"default\"]);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            if (textStroke) {\n                subElStyle.stroke = textStroke;\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            if (textFill) {\n                subElStyle.fill = textFill;\n            }\n            subElStyle.font = textFont;\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect_1[\"default\"](text_1.adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), text_1.adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), style.width, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseText_1.parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = text_1.adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = text_1.adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan_1[\"default\"]);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getStroke('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || text_1.DEFAULT_FONT;\n        subElStyle.opacity = util_1.retrieve3(tokenStyle.opacity, style.opacity, 1);\n        if (textStroke) {\n            subElStyle.lineWidth = util_1.retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = util_1.retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect_1[\"default\"](text_1.adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), text_1.adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isPlainBg = util_1.isString(textBackgroundColor);\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainBg || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect_1[\"default\"]);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = util_1.retrieve2(style.fillOpacity, 1);\n        }\n        else if (textBackgroundColor && textBackgroundColor.image) {\n            imgEl = this._getOrCreateChild(Image_1[\"default\"]);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = util_1.retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = util_1.retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (style.fontSize || style.fontFamily || style.fontWeight) {\n            var fontSize = '';\n            if (typeof style.fontSize === 'string'\n                && (style.fontSize.indexOf('px') !== -1\n                    || style.fontSize.indexOf('rem') !== -1\n                    || style.fontSize.indexOf('em') !== -1)) {\n                fontSize = style.fontSize;\n            }\n            else if (!isNaN(+style.fontSize)) {\n                fontSize = style.fontSize + 'px';\n            }\n            else {\n                fontSize = '12px';\n            }\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                fontSize,\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && util_1.trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable_1[\"default\"]));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nfunction normalizeTextStyle(style) {\n    normalizeStyle(style);\n    util_1.each(style.rich, normalizeStyle);\n    return style;\n}\nexports.normalizeTextStyle = normalizeTextStyle;\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = util_1.normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || (style.borderWidth && style.borderColor));\n}\nexports[\"default\"] = ZRText;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}