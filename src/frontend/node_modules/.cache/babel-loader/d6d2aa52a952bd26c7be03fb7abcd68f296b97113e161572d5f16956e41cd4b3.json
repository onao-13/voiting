{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { Rect } from '../../../scene/shape/rect';\nimport { Text } from '../../../scene/shape/text';\nimport { BandScale } from '../../../scale/bandScale';\nimport { SeriesTooltip, SeriesNodePickMode } from '../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { CartesianSeries, CartesianSeriesNodeClickEvent } from './cartesianSeries';\nimport { ChartAxisDirection, flipChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { extent, findMinMax } from '../../../util/array';\nimport { equal } from '../../../util/equal';\nimport { sanitizeHtml } from '../../../util/sanitize';\nimport { checkDatum, isContinuous, isNumber } from '../../../util/value';\nimport { clamper, ContinuousScale } from '../../../scale/continuousScale';\nimport { BOOLEAN, BOOLEAN_ARRAY, NUMBER, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, STRING, STRING_ARRAY, COLOR_STRING_ARRAY, Validate, OPTIONAL } from '../../../util/validation';\nimport { CategoryAxis } from '../../axis/categoryAxis';\nimport { GroupedCategoryAxis } from '../../axis/groupedCategoryAxis';\nvar BAR_LABEL_PLACEMENTS = ['inside', 'outside'];\nvar OPT_BAR_LABEL_PLACEMENT = function (v, ctx) {\n  return OPTIONAL(v, ctx, function (v) {\n    return BAR_LABEL_PLACEMENTS.includes(v);\n  });\n};\nvar BarSeriesNodeTag;\n(function (BarSeriesNodeTag) {\n  BarSeriesNodeTag[BarSeriesNodeTag[\"Bar\"] = 0] = \"Bar\";\n  BarSeriesNodeTag[BarSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(BarSeriesNodeTag || (BarSeriesNodeTag = {}));\nexport var BarLabelPlacement;\n(function (BarLabelPlacement) {\n  BarLabelPlacement[\"Inside\"] = \"inside\";\n  BarLabelPlacement[\"Outside\"] = \"outside\";\n})(BarLabelPlacement || (BarLabelPlacement = {}));\nvar BarSeriesLabel = /** @class */function (_super) {\n  __extends(BarSeriesLabel, _super);\n  function BarSeriesLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.formatter = undefined;\n    _this.placement = BarLabelPlacement.Inside;\n    return _this;\n  }\n  __decorate([Validate(OPT_FUNCTION)], BarSeriesLabel.prototype, \"formatter\", void 0);\n  __decorate([Validate(OPT_BAR_LABEL_PLACEMENT)], BarSeriesLabel.prototype, \"placement\", void 0);\n  return BarSeriesLabel;\n}(Label);\nexport { BarSeriesLabel };\nvar BarSeriesTooltip = /** @class */function (_super) {\n  __extends(BarSeriesTooltip, _super);\n  function BarSeriesTooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.renderer = undefined;\n    return _this;\n  }\n  __decorate([Validate(OPT_FUNCTION)], BarSeriesTooltip.prototype, \"renderer\", void 0);\n  return BarSeriesTooltip;\n}(SeriesTooltip);\nexport { BarSeriesTooltip };\nfunction flat(arr, target) {\n  if (target === void 0) {\n    target = [];\n  }\n  arr.forEach(function (v) {\n    if (Array.isArray(v)) {\n      flat(v, target);\n    } else {\n      target.push(v);\n    }\n  });\n  return target;\n}\nfunction is2dArray(array) {\n  return array.length > 0 && Array.isArray(array[0]);\n}\nvar BarSeries = /** @class */function (_super) {\n  __extends(BarSeries, _super);\n  function BarSeries() {\n    var _a;\n    var _this = _super.call(this, {\n      pickGroupIncludes: ['datumNodes'],\n      pickModes: [SeriesNodePickMode.EXACT_SHAPE_MATCH],\n      pathsPerSeries: 0\n    }) || this;\n    _this.xData = [];\n    _this.yData = [];\n    _this.yDomain = [];\n    _this.label = new BarSeriesLabel();\n    _this.tooltip = new BarSeriesTooltip();\n    _this.flipXY = false;\n    _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = [0];\n    _this.lineDashOffset = 0;\n    _this.formatter = undefined;\n    /**\n     * Used to get the position of bars within each group.\n     */\n    _this.groupScale = new BandScale();\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKeys'], _a);\n    _this._xKey = '';\n    _this.xName = '';\n    _this.cumYKeyCount = [];\n    _this.flatYKeys = undefined; // only set when a user used a flat array for yKeys\n    _this.hideInLegend = [];\n    /**\n     * yKeys: [['coffee']] - regular bars, each category has a single bar that shows a value for coffee\n     * yKeys: [['coffee'], ['tea'], ['milk']] - each category has three bars that show values for coffee, tea and milk\n     * yKeys: [['coffee', 'tea', 'milk']] - each category has a single bar with three stacks that show values for coffee, tea and milk\n     * yKeys: [['coffee', 'tea', 'milk'], ['paper', 'ink']] - each category has 2 stacked bars,\n     *     first showing values for coffee, tea and milk and second values for paper and ink\n     */\n    _this._yKeys = [];\n    _this._visibles = [];\n    _this._grouped = false;\n    /**\n     * A map of `yKeys` to their names (used in legends and tooltips).\n     * For example, if a key is `product_name` it's name can be a more presentable `Product Name`.\n     */\n    _this._yNames = {};\n    _this.strokeWidth = 1;\n    _this.shadow = undefined;\n    _this.smallestDataInterval = undefined;\n    _this.label.enabled = false;\n    return _this;\n  }\n  BarSeries.prototype.getKeys = function (direction) {\n    var _this = this;\n    var directionKeys = this.directionKeys;\n    var keys = directionKeys && directionKeys[this.flipXY ? flipChartAxisDirection(direction) : direction];\n    var values = [];\n    if (keys) {\n      keys.forEach(function (key) {\n        var value = _this[key];\n        if (value) {\n          if (Array.isArray(value)) {\n            values = values.concat(flat(value));\n          } else {\n            values.push(value);\n          }\n        }\n      });\n    }\n    return values;\n  };\n  Object.defineProperty(BarSeries.prototype, \"xKey\", {\n    get: function () {\n      return this._xKey;\n    },\n    set: function (value) {\n      this._xKey = value;\n      this.xData = [];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"yKeys\", {\n    get: function () {\n      return this._yKeys;\n    },\n    set: function (yKeys) {\n      var _this = this;\n      var flatYKeys = undefined;\n      // Convert from flat y-keys to grouped y-keys.\n      if (!is2dArray(yKeys)) {\n        flatYKeys = yKeys;\n        yKeys = this.grouped ? flatYKeys.map(function (k) {\n          return [k];\n        }) : [flatYKeys];\n      }\n      if (!equal(this._yKeys, yKeys)) {\n        this.flatYKeys = flatYKeys ? flatYKeys : undefined;\n        this._yKeys = yKeys;\n        var prevYKeyCount_1 = 0;\n        this.cumYKeyCount = [];\n        var visibleStacks_1 = [];\n        yKeys.forEach(function (stack, index) {\n          if (stack.length > 0) {\n            visibleStacks_1.push(String(index));\n          }\n          _this.cumYKeyCount.push(prevYKeyCount_1);\n          prevYKeyCount_1 += stack.length;\n        });\n        this.yData = [];\n        this.processSeriesItemEnabled();\n        var groupScale = this.groupScale;\n        groupScale.domain = visibleStacks_1;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"visibles\", {\n    get: function () {\n      return this._visibles;\n    },\n    set: function (visibles) {\n      var flattenFn = function (r, n) {\n        return r.concat.apply(r, __spread(Array.isArray(n) ? n : [n]));\n      };\n      this._visibles = visibles.reduce(flattenFn, []);\n      this.processSeriesItemEnabled();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BarSeries.prototype.processSeriesItemEnabled = function () {\n    var _a = this,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      _b = _a._visibles,\n      visibles = _b === void 0 ? [] : _b;\n    seriesItemEnabled.clear();\n    var visiblesIdx = 0;\n    this._yKeys.forEach(function (stack) {\n      stack.forEach(function (yKey) {\n        var _a, _b;\n        return seriesItemEnabled.set(yKey, (_b = (_a = visibles) === null || _a === void 0 ? void 0 : _a[visiblesIdx++], _b !== null && _b !== void 0 ? _b : true));\n      });\n    });\n  };\n  Object.defineProperty(BarSeries.prototype, \"grouped\", {\n    get: function () {\n      return this._grouped;\n    },\n    set: function (value) {\n      if (this._grouped !== value) {\n        this._grouped = value;\n        if (this.flatYKeys) {\n          this.yKeys = this.flatYKeys;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"yNames\", {\n    get: function () {\n      return this._yNames;\n    },\n    set: function (values) {\n      if (Array.isArray(values) && this.flatYKeys) {\n        var map_1 = {};\n        this.flatYKeys.forEach(function (k, i) {\n          map_1[k] = values[i];\n        });\n        values = map_1;\n      }\n      this._yNames = values;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BarSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n  };\n  Object.defineProperty(BarSeries.prototype, \"normalizedTo\", {\n    get: function () {\n      return this._normalizedTo;\n    },\n    set: function (value) {\n      var absValue = value ? Math.abs(value) : undefined;\n      this._normalizedTo = absValue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BarSeries.prototype.processData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, xKey, yKeys, seriesItemEnabled, data, xAxis, yAxis, setSmallestXInterval, isContinuousX, isContinuousY, keysFound, prevX, yMinMax, _b, yData, normalizedTo, yAbsTotal, _c, yMin, yMax;\n      var _this = this;\n      return __generator(this, function (_d) {\n        _a = this, xKey = _a.xKey, yKeys = _a.yKeys, seriesItemEnabled = _a.seriesItemEnabled;\n        data = xKey && yKeys.length && this.data ? this.data : [];\n        xAxis = this.getCategoryAxis();\n        yAxis = this.getValueAxis();\n        if (!(xAxis && yAxis)) {\n          return [2 /*return*/];\n        }\n\n        setSmallestXInterval = function (curr, prev) {\n          if (_this.smallestDataInterval === undefined) {\n            _this.smallestDataInterval = {\n              x: Infinity,\n              y: Infinity\n            };\n          }\n          var x = _this.smallestDataInterval.x;\n          var interval = Math.abs(curr - prev);\n          if (interval > 0 && interval < x) {\n            _this.smallestDataInterval.x = interval;\n          }\n        };\n        isContinuousX = xAxis.scale instanceof ContinuousScale;\n        isContinuousY = yAxis.scale instanceof ContinuousScale;\n        keysFound = true;\n        prevX = Infinity;\n        this.xData = data.map(function (datum) {\n          if (keysFound && !(xKey in datum)) {\n            keysFound = false;\n            console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n          }\n          var x = checkDatum(datum[xKey], isContinuousX);\n          if (isContinuousX) {\n            setSmallestXInterval(x, prevX);\n          }\n          prevX = x;\n          return x;\n        });\n        this.yData = data.map(function (datum) {\n          return yKeys.map(function (stack) {\n            return stack.map(function (yKey) {\n              if (keysFound && !(yKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n              }\n              var yDatum = checkDatum(datum[yKey], isContinuousY);\n              if (!seriesItemEnabled.get(yKey) || yDatum === undefined) {\n                return NaN;\n              }\n              return yDatum;\n            });\n          });\n        });\n        yMinMax = this.yData.map(function (group) {\n          return group.map(function (stack) {\n            return findMinMax(stack);\n          });\n        });\n        _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n        yAbsTotal = this.yData.map(function (group) {\n          return group.map(function (stack) {\n            return stack.reduce(function (acc, stack) {\n              acc += isNaN(stack) ? 0 : Math.abs(stack);\n              return acc;\n            }, 0);\n          });\n        });\n        _c = this.findLargestMinMax(yMinMax), yMin = _c.min, yMax = _c.max;\n        if (yMin === Infinity && yMax === -Infinity) {\n          // There's no data in the domain.\n          this.yDomain = [];\n          return [2 /*return*/];\n        }\n\n        if (normalizedTo && isFinite(normalizedTo)) {\n          yMin = yMin < 0 ? -normalizedTo : 0;\n          yMax = yMax > 0 ? normalizedTo : 0;\n          yData.forEach(function (group, i) {\n            group.forEach(function (stack, j) {\n              stack.forEach(function (y, k) {\n                stack[k] = y / yAbsTotal[i][j] * normalizedTo;\n              });\n            });\n          });\n        }\n        this.yDomain = this.fixNumericExtent([yMin, yMax], this.yAxis);\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  BarSeries.prototype.findLargestMinMax = function (groups) {\n    var e_1, _a, e_2, _b;\n    var tallestStackMin = Infinity;\n    var tallestStackMax = -Infinity;\n    try {\n      for (var groups_1 = __values(groups), groups_1_1 = groups_1.next(); !groups_1_1.done; groups_1_1 = groups_1.next()) {\n        var group = groups_1_1.value;\n        try {\n          for (var group_1 = (e_2 = void 0, __values(group)), group_1_1 = group_1.next(); !group_1_1.done; group_1_1 = group_1.next()) {\n            var stack = group_1_1.value;\n            var _c = stack.min,\n              min = _c === void 0 ? Infinity : _c,\n              _d = stack.max,\n              max = _d === void 0 ? -Infinity : _d;\n            if (min < tallestStackMin) {\n              tallestStackMin = min;\n            }\n            if (max > tallestStackMax) {\n              tallestStackMax = max;\n            }\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (group_1_1 && !group_1_1.done && (_b = group_1.return)) _b.call(group_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (groups_1_1 && !groups_1_1.done && (_a = groups_1.return)) _a.call(groups_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return {\n      min: tallestStackMin,\n      max: tallestStackMax\n    };\n  };\n  BarSeries.prototype.getDomain = function (direction) {\n    var _a, _b, _c, _d, _e;\n    var flipXY = this.flipXY;\n    if (this.flipXY) {\n      direction = flipChartAxisDirection(direction);\n    }\n    if (direction === ChartAxisDirection.X) {\n      if (!(((_a = this.getCategoryAxis()) === null || _a === void 0 ? void 0 : _a.scale) instanceof ContinuousScale)) {\n        return this.xData;\n      }\n      // The last node will be clipped if the scale is not a band scale\n      // Extend the domain by the smallest data interval so that the last band is not clipped\n      var xDomain = extent(this.xData, isContinuous, Number) || [NaN, NaN];\n      if (flipXY) {\n        xDomain[0] = xDomain[0] - (_c = (_b = this.smallestDataInterval) === null || _b === void 0 ? void 0 : _b.x, _c !== null && _c !== void 0 ? _c : 0);\n      } else {\n        xDomain[1] = xDomain[1] + (_e = (_d = this.smallestDataInterval) === null || _d === void 0 ? void 0 : _d.x, _e !== null && _e !== void 0 ? _e : 0);\n      }\n      return xDomain;\n    } else {\n      return this.yDomain;\n    }\n  };\n  BarSeries.prototype.getNodeClickEvent = function (event, datum) {\n    return new CartesianSeriesNodeClickEvent(this.xKey, datum.yKey, event, datum, this);\n  };\n  BarSeries.prototype.getCategoryAxis = function () {\n    return this.flipXY ? this.yAxis : this.xAxis;\n  };\n  BarSeries.prototype.getValueAxis = function () {\n    return this.flipXY ? this.xAxis : this.yAxis;\n  };\n  BarSeries.prototype.calculateStep = function (range) {\n    var _a, _b;\n    var smallestInterval = this.smallestDataInterval;\n    var xAxis = this.getCategoryAxis();\n    if (!xAxis) {\n      return;\n    }\n    // calculate step\n    var domainLength = xAxis.dataDomain[1] - xAxis.dataDomain[0];\n    var intervals = domainLength / (_b = (_a = smallestInterval) === null || _a === void 0 ? void 0 : _a.x, _b !== null && _b !== void 0 ? _b : 1) + 1;\n    // The number of intervals/bands is used to determine the width of individual bands by dividing the available range.\n    // Allow a maximum number of bands to ensure the step does not fall below 1 pixel.\n    // This means there could be some overlap of the bands in the chart.\n    var maxBands = Math.floor(range); // A minimum of 1px per bar/column means the maximum number of bands will equal the available range\n    var bands = Math.min(intervals, maxBands);\n    var step = range / Math.max(1, bands);\n    return step;\n  };\n  BarSeries.prototype.createNodeData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, chart, data, visible, xAxis, yAxis, xScale, yScale, _b, groupScale, yKeys, cumYKeyCount, fills, strokes, strokeWidth, seriesItemEnabled, xData, yData, label, flipXY, seriesId, labelFontStyle, labelFontWeight, labelFontSize, labelFontFamily, labelColor, labelFormatter, labelPlacement, xBandWidth, availableRange, step, barWidth, contexts;\n      var _this = this;\n      return __generator(this, function (_c) {\n        _a = this, chart = _a.chart, data = _a.data, visible = _a.visible;\n        xAxis = this.getCategoryAxis();\n        yAxis = this.getValueAxis();\n        if (!(chart && data && visible && xAxis && yAxis)) {\n          return [2 /*return*/, []];\n        }\n        xScale = xAxis.scale;\n        yScale = yAxis.scale;\n        _b = this, groupScale = _b.groupScale, yKeys = _b.yKeys, cumYKeyCount = _b.cumYKeyCount, fills = _b.fills, strokes = _b.strokes, strokeWidth = _b.strokeWidth, seriesItemEnabled = _b.seriesItemEnabled, xData = _b.xData, yData = _b.yData, label = _b.label, flipXY = _b.flipXY, seriesId = _b.id;\n        labelFontStyle = label.fontStyle, labelFontWeight = label.fontWeight, labelFontSize = label.fontSize, labelFontFamily = label.fontFamily, labelColor = label.color, labelFormatter = label.formatter, labelPlacement = label.placement;\n        xBandWidth = xScale.bandwidth;\n        if (xScale instanceof ContinuousScale) {\n          availableRange = Math.max(xAxis.range[0], xAxis.range[1]);\n          step = this.calculateStep(availableRange);\n          xBandWidth = step;\n        }\n        groupScale.range = [0, xBandWidth];\n        if (xAxis instanceof CategoryAxis) {\n          groupScale.padding = xAxis.groupPaddingInner;\n        } else if (xAxis instanceof GroupedCategoryAxis) {\n          groupScale.padding = 0.1;\n        } else {\n          // Number or Time axis\n          groupScale.padding = 0;\n        }\n        // To get exactly `0` padding we need to turn off rounding\n        if (groupScale.padding === 0) {\n          groupScale.round = false;\n        } else {\n          groupScale.round = true;\n        }\n        barWidth = groupScale.bandwidth >= 1 ?\n        // Pixel-rounded value for low-volume bar charts.\n        groupScale.bandwidth :\n        // Handle high-volume bar charts gracefully.\n        groupScale.rawBandwidth;\n        contexts = [];\n        xData.forEach(function (group, groupIndex) {\n          var _a, _b;\n          var seriesDatum = data[groupIndex];\n          var x = xScale.convert(group);\n          var groupYs = yData[groupIndex]; // y-data for groups of stacks\n          for (var stackIndex = 0; stackIndex < groupYs.length; stackIndex++) {\n            var stackYs = groupYs[stackIndex]; // y-data for a stack within a group\n            contexts[stackIndex] = (_a = contexts[stackIndex], _a !== null && _a !== void 0 ? _a : []);\n            var prevMinY = 0;\n            var prevMaxY = 0;\n            for (var levelIndex = 0; levelIndex < stackYs.length; levelIndex++) {\n              var currY = +stackYs[levelIndex];\n              var yKey = yKeys[stackIndex][levelIndex];\n              var barX = x + groupScale.convert(String(stackIndex));\n              contexts[stackIndex][levelIndex] = (_b = contexts[stackIndex][levelIndex], _b !== null && _b !== void 0 ? _b : {\n                itemId: yKey,\n                nodeData: [],\n                labelData: []\n              });\n              // Bars outside of visible range are not rendered, so we create node data\n              // only for the visible subset of user data.\n              if (!xAxis.inRange(barX, barWidth)) {\n                continue;\n              }\n              if (isNaN(currY)) {\n                continue;\n              }\n              var prevY = currY < 0 ? prevMinY : prevMaxY;\n              var continuousY = yScale instanceof ContinuousScale;\n              var y = yScale.convert(prevY + currY, continuousY ? clamper : undefined);\n              var bottomY = yScale.convert(prevY, continuousY ? clamper : undefined);\n              var yValue = seriesDatum[yKey]; // unprocessed y-value\n              var labelText = void 0;\n              if (labelFormatter) {\n                labelText = labelFormatter({\n                  value: isNumber(yValue) ? yValue : undefined,\n                  seriesId: seriesId\n                });\n              } else {\n                labelText = isNumber(yValue) ? yValue.toFixed(2) : '';\n              }\n              var labelX = void 0;\n              var labelY = void 0;\n              if (flipXY) {\n                labelY = barX + barWidth / 2;\n                if (labelPlacement === BarLabelPlacement.Inside) {\n                  labelX = y + (yValue >= 0 ? -1 : 1) * Math.abs(bottomY - y) / 2;\n                } else {\n                  labelX = y + (yValue >= 0 ? 1 : -1) * 4;\n                }\n              } else {\n                labelX = barX + barWidth / 2;\n                if (labelPlacement === BarLabelPlacement.Inside) {\n                  labelY = y + (yValue >= 0 ? 1 : -1) * Math.abs(bottomY - y) / 2;\n                } else {\n                  labelY = y + (yValue >= 0 ? -3 : 4);\n                }\n              }\n              var labelTextAlign = void 0;\n              var labelTextBaseline = void 0;\n              if (labelPlacement === BarLabelPlacement.Inside) {\n                labelTextAlign = 'center';\n                labelTextBaseline = 'middle';\n              } else {\n                labelTextAlign = flipXY ? yValue >= 0 ? 'start' : 'end' : 'center';\n                labelTextBaseline = flipXY ? 'middle' : yValue >= 0 ? 'bottom' : 'top';\n              }\n              var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n              var nodeData = {\n                index: groupIndex,\n                series: _this,\n                itemId: yKey,\n                datum: seriesDatum,\n                yValue: yValue,\n                yKey: yKey,\n                x: flipXY ? Math.min(y, bottomY) : barX,\n                y: flipXY ? barX : Math.min(y, bottomY),\n                width: flipXY ? Math.abs(bottomY - y) : barWidth,\n                height: flipXY ? barWidth : Math.abs(bottomY - y),\n                colorIndex: colorIndex,\n                fill: fills[colorIndex % fills.length],\n                stroke: strokes[colorIndex % strokes.length],\n                strokeWidth: strokeWidth,\n                label: seriesItemEnabled.get(yKey) && labelText ? {\n                  text: labelText,\n                  fontStyle: labelFontStyle,\n                  fontWeight: labelFontWeight,\n                  fontSize: labelFontSize,\n                  fontFamily: labelFontFamily,\n                  textAlign: labelTextAlign,\n                  textBaseline: labelTextBaseline,\n                  fill: labelColor,\n                  x: labelX,\n                  y: labelY\n                } : undefined\n              };\n              contexts[stackIndex][levelIndex].nodeData.push(nodeData);\n              contexts[stackIndex][levelIndex].labelData.push(nodeData);\n              if (currY < 0) {\n                prevMinY += currY;\n              } else {\n                prevMaxY += currY;\n              }\n            }\n          }\n        });\n        return [2 /*return*/, contexts.reduce(function (r, n) {\n          return r.concat.apply(r, __spread(n));\n        }, [])];\n      });\n    });\n  };\n  BarSeries.prototype.updateDatumSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var nodeData, datumSelection, updateRects, enterRects;\n      return __generator(this, function (_a) {\n        nodeData = opts.nodeData, datumSelection = opts.datumSelection;\n        updateRects = datumSelection.setData(nodeData);\n        updateRects.exit.remove();\n        enterRects = updateRects.enter.append(Rect).each(function (rect) {\n          rect.tag = BarSeriesNodeTag.Bar;\n        });\n        return [2 /*return*/, updateRects.merge(enterRects)];\n      });\n    });\n  };\n  BarSeries.prototype.updateDatumNodes = function (opts) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function () {\n      var datumSelection, isDatumHighlighted, _c, fills, strokes, seriesFillOpacity, strokeOpacity, shadow, formatter, xKey, flipXY, _d, deprecatedFill, deprecatedStroke, deprecatedStrokeWidth, _e, _f, highlightedFill, _g, highlightFillOpacity, _h, highlightedStroke, _j, highlightedDatumStrokeWidth, seriesId, _k, visibleMin, visibleMax, isZoomed, crisp;\n      var _this = this;\n      return __generator(this, function (_l) {\n        datumSelection = opts.datumSelection, isDatumHighlighted = opts.isHighlight;\n        _c = this, fills = _c.fills, strokes = _c.strokes, seriesFillOpacity = _c.fillOpacity, strokeOpacity = _c.strokeOpacity, shadow = _c.shadow, formatter = _c.formatter, xKey = _c.xKey, flipXY = _c.flipXY, _d = _c.highlightStyle, deprecatedFill = _d.fill, deprecatedStroke = _d.stroke, deprecatedStrokeWidth = _d.strokeWidth, _e = _d.item, _f = _e.fill, highlightedFill = _f === void 0 ? deprecatedFill : _f, _g = _e.fillOpacity, highlightFillOpacity = _g === void 0 ? seriesFillOpacity : _g, _h = _e.stroke, highlightedStroke = _h === void 0 ? deprecatedStroke : _h, _j = _e.strokeWidth, highlightedDatumStrokeWidth = _j === void 0 ? deprecatedStrokeWidth : _j, seriesId = _c.id;\n        _k = __read((_b = (_a = this.xAxis) === null || _a === void 0 ? void 0 : _a.visibleRange, _b !== null && _b !== void 0 ? _b : []), 2), visibleMin = _k[0], visibleMax = _k[1];\n        isZoomed = visibleMin !== 0 || visibleMax !== 1;\n        crisp = !isZoomed;\n        datumSelection.each(function (rect, datum) {\n          var colorIndex = datum.colorIndex;\n          var fill = isDatumHighlighted && highlightedFill !== undefined ? highlightedFill : fills[colorIndex % fills.length];\n          var stroke = isDatumHighlighted && highlightedStroke !== undefined ? highlightedStroke : strokes[colorIndex % fills.length];\n          var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined ? highlightedDatumStrokeWidth : _this.getStrokeWidth(_this.strokeWidth, datum);\n          var fillOpacity = isDatumHighlighted ? highlightFillOpacity : seriesFillOpacity;\n          var format = undefined;\n          if (formatter) {\n            format = formatter({\n              datum: datum.datum,\n              fill: fill,\n              stroke: stroke,\n              strokeWidth: strokeWidth,\n              highlighted: isDatumHighlighted,\n              xKey: xKey,\n              yKey: datum.yKey,\n              seriesId: seriesId\n            });\n          }\n          rect.crisp = crisp;\n          rect.x = datum.x;\n          rect.y = datum.y;\n          rect.width = datum.width;\n          rect.height = datum.height;\n          rect.fill = format && format.fill || fill;\n          rect.stroke = format && format.stroke || stroke;\n          rect.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n          rect.fillOpacity = fillOpacity;\n          rect.strokeOpacity = strokeOpacity;\n          rect.lineDash = _this.lineDash;\n          rect.lineDashOffset = _this.lineDashOffset;\n          rect.fillShadow = shadow;\n          // Prevent stroke from rendering for zero height columns and zero width bars.\n          rect.visible = flipXY ? datum.width > 0 : datum.height > 0;\n        });\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  BarSeries.prototype.updateLabelSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var labelData, labelSelection, enabled, data, updateLabels, enterLabels;\n      return __generator(this, function (_a) {\n        labelData = opts.labelData, labelSelection = opts.labelSelection;\n        enabled = this.label.enabled;\n        data = enabled ? labelData : [];\n        updateLabels = labelSelection.setData(data);\n        updateLabels.exit.remove();\n        enterLabels = updateLabels.enter.append(Text).each(function (text) {\n          text.tag = BarSeriesNodeTag.Label;\n          text.pointerEvents = PointerEvents.None;\n        });\n        return [2 /*return*/, updateLabels.merge(enterLabels)];\n      });\n    });\n  };\n  BarSeries.prototype.updateLabelNodes = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var labelSelection, _a, labelEnabled, fontStyle, fontWeight, fontSize, fontFamily, color;\n      return __generator(this, function (_b) {\n        labelSelection = opts.labelSelection;\n        _a = this.label, labelEnabled = _a.enabled, fontStyle = _a.fontStyle, fontWeight = _a.fontWeight, fontSize = _a.fontSize, fontFamily = _a.fontFamily, color = _a.color;\n        labelSelection.each(function (text, datum) {\n          var label = datum.label;\n          if (label && labelEnabled) {\n            text.fontStyle = fontStyle;\n            text.fontWeight = fontWeight;\n            text.fontSize = fontSize;\n            text.fontFamily = fontFamily;\n            text.textAlign = label.textAlign;\n            text.textBaseline = label.textBaseline;\n            text.text = label.text;\n            text.x = label.x;\n            text.y = label.y;\n            text.fill = color;\n            text.visible = true;\n          } else {\n            text.visible = false;\n          }\n        });\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  BarSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var _a = this,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      yData = _a.yData;\n    var xAxis = this.getCategoryAxis();\n    var yAxis = this.getValueAxis();\n    var yKey = nodeDatum.yKey;\n    if (!yData.length || !xKey || !yKey || !xAxis || !yAxis) {\n      return '';\n    }\n    var yGroup = yData[nodeDatum.index];\n    var fillIndex = 0;\n    var i = 0;\n    var j = 0;\n    for (; j < yKeys.length; j++) {\n      var stack = yKeys[j];\n      i = stack.indexOf(yKey);\n      if (i >= 0) {\n        fillIndex += i;\n        break;\n      }\n      fillIndex += stack.length;\n    }\n    var _b = this,\n      xName = _b.xName,\n      yNames = _b.yNames,\n      fills = _b.fills,\n      strokes = _b.strokes,\n      tooltip = _b.tooltip,\n      formatter = _b.formatter,\n      seriesId = _b.id;\n    var tooltipRenderer = tooltip.renderer;\n    var datum = nodeDatum.datum;\n    var yName = yNames[yKey];\n    var fill = fills[fillIndex % fills.length];\n    var stroke = strokes[fillIndex % fills.length];\n    var strokeWidth = this.getStrokeWidth(this.strokeWidth);\n    var xValue = datum[xKey];\n    var yValue = datum[yKey];\n    var processedYValue = yGroup[j][i];\n    var xString = sanitizeHtml(xAxis.formatDatum(xValue));\n    var yString = sanitizeHtml(yAxis.formatDatum(yValue));\n    var title = sanitizeHtml(yName);\n    var content = xString + ': ' + yString;\n    var format = undefined;\n    if (formatter) {\n      format = formatter({\n        datum: datum,\n        fill: fill,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        highlighted: false,\n        xKey: xKey,\n        yKey: yKey,\n        seriesId: seriesId\n      });\n    }\n    var color = format && format.fill || fill;\n    var defaults = {\n      title: title,\n      backgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        xKey: xKey,\n        xValue: xValue,\n        xName: xName,\n        yKey: yKey,\n        yValue: yValue,\n        processedYValue: processedYValue,\n        yName: yName,\n        color: color,\n        title: title,\n        seriesId: seriesId\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  BarSeries.prototype.getLegendData = function () {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      yNames = _a.yNames,\n      cumYKeyCount = _a.cumYKeyCount,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      hideInLegend = _a.hideInLegend,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity,\n      flipXY = _a.flipXY;\n    if (!data || !data.length || !xKey || !yKeys.length) {\n      return [];\n    }\n    var legendData = [];\n    this.yKeys.forEach(function (stack, stackIndex) {\n      // Column stacks should be listed in the legend in reverse order, for symmetry with the\n      // vertical stack display order. Bar stacks are already consistent left-to-right with\n      // the legend.\n      var startLevel = flipXY ? 0 : stack.length - 1;\n      var direction = flipXY ? 1 : -1;\n      for (var levelIndex = startLevel, step = 0; step < stack.length; levelIndex += direction, step++) {\n        var yKey = stack[levelIndex];\n        if (hideInLegend.indexOf(yKey) >= 0) {\n          return;\n        }\n        var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n        legendData.push({\n          id: id,\n          itemId: yKey,\n          seriesId: id,\n          enabled: seriesItemEnabled.get(yKey) || false,\n          label: {\n            text: yNames[yKey] || yKey\n          },\n          marker: {\n            fill: fills[colorIndex % fills.length],\n            stroke: strokes[colorIndex % strokes.length],\n            fillOpacity: fillOpacity,\n            strokeOpacity: strokeOpacity\n          }\n        });\n      }\n    });\n    return legendData;\n  };\n  BarSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    _super.prototype.toggleSeriesItem.call(this, itemId, enabled);\n    var yKeys = this.yKeys.map(function (stack) {\n      return stack.slice();\n    }); // deep clone\n    this.seriesItemEnabled.forEach(function (enabled, yKey) {\n      if (!enabled) {\n        yKeys.forEach(function (stack) {\n          var index = stack.indexOf(yKey);\n          if (index >= 0) {\n            stack.splice(index, 1);\n          }\n        });\n      }\n    });\n    var visibleStacks = [];\n    yKeys.forEach(function (stack, index) {\n      if (stack.length > 0) {\n        visibleStacks.push(String(index));\n      }\n    });\n    this.groupScale.domain = visibleStacks;\n    this.nodeDataRefresh = true;\n  };\n  BarSeries.prototype.isLabelEnabled = function () {\n    return this.label.enabled;\n  };\n  BarSeries.className = 'BarSeries';\n  BarSeries.type = 'bar';\n  __decorate([Validate(BOOLEAN)], BarSeries.prototype, \"flipXY\", void 0);\n  __decorate([Validate(COLOR_STRING_ARRAY)], BarSeries.prototype, \"fills\", void 0);\n  __decorate([Validate(COLOR_STRING_ARRAY)], BarSeries.prototype, \"strokes\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], BarSeries.prototype, \"fillOpacity\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], BarSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate([Validate(OPT_LINE_DASH)], BarSeries.prototype, \"lineDash\", void 0);\n  __decorate([Validate(NUMBER(0))], BarSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate([Validate(OPT_FUNCTION)], BarSeries.prototype, \"formatter\", void 0);\n  __decorate([Validate(STRING)], BarSeries.prototype, \"_xKey\", void 0);\n  __decorate([Validate(STRING)], BarSeries.prototype, \"xName\", void 0);\n  __decorate([Validate(STRING_ARRAY)], BarSeries.prototype, \"hideInLegend\", void 0);\n  __decorate([Validate(BOOLEAN_ARRAY)], BarSeries.prototype, \"_visibles\", void 0);\n  __decorate([Validate(BOOLEAN)], BarSeries.prototype, \"_grouped\", void 0);\n  __decorate([Validate(OPT_NUMBER())], BarSeries.prototype, \"_normalizedTo\", void 0);\n  __decorate([Validate(NUMBER(0))], BarSeries.prototype, \"strokeWidth\", void 0);\n  return BarSeries;\n}(CartesianSeries);\nexport { BarSeries };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","__read","o","m","ar","error","__spread","concat","__values","s","Rect","Text","BandScale","SeriesTooltip","SeriesNodePickMode","Label","PointerEvents","CartesianSeries","CartesianSeriesNodeClickEvent","ChartAxisDirection","flipChartAxisDirection","toTooltipHtml","extent","findMinMax","equal","sanitizeHtml","checkDatum","isContinuous","isNumber","clamper","ContinuousScale","BOOLEAN","BOOLEAN_ARRAY","NUMBER","OPT_FUNCTION","OPT_LINE_DASH","OPT_NUMBER","STRING","STRING_ARRAY","COLOR_STRING_ARRAY","Validate","OPTIONAL","CategoryAxis","GroupedCategoryAxis","BAR_LABEL_PLACEMENTS","OPT_BAR_LABEL_PLACEMENT","ctx","includes","BarSeriesNodeTag","BarLabelPlacement","BarSeriesLabel","_super","_this","formatter","undefined","placement","Inside","BarSeriesTooltip","renderer","flat","arr","forEach","isArray","is2dArray","array","BarSeries","_a","pickGroupIncludes","pickModes","EXACT_SHAPE_MATCH","pathsPerSeries","xData","yData","yDomain","tooltip","flipXY","fills","strokes","fillOpacity","strokeOpacity","lineDash","lineDashOffset","groupScale","directionKeys","X","Y","_xKey","xName","cumYKeyCount","flatYKeys","hideInLegend","_yKeys","_visibles","_grouped","_yNames","strokeWidth","shadow","smallestDataInterval","enabled","getKeys","direction","keys","values","get","set","enumerable","configurable","yKeys","grouped","map","k","prevYKeyCount_1","visibleStacks_1","stack","index","String","processSeriesItemEnabled","domain","visibles","flattenFn","reduce","seriesItemEnabled","_b","clear","visiblesIdx","yKey","map_1","setColors","_normalizedTo","absValue","Math","abs","processData","xKey","data","xAxis","yAxis","setSmallestXInterval","isContinuousX","isContinuousY","keysFound","prevX","yMinMax","normalizedTo","yAbsTotal","_c","yMin","yMax","_d","getCategoryAxis","getValueAxis","curr","prev","x","Infinity","interval","scale","datum","console","warn","yDatum","NaN","group","acc","isNaN","findLargestMinMax","min","max","isFinite","j","fixNumericExtent","groups","e_1","e_2","tallestStackMin","tallestStackMax","groups_1","groups_1_1","group_1","group_1_1","e_2_1","return","e_1_1","getDomain","_e","xDomain","Number","getNodeClickEvent","event","calculateStep","range","smallestInterval","domainLength","dataDomain","intervals","maxBands","floor","bands","createNodeData","chart","visible","xScale","yScale","seriesId","labelFontStyle","labelFontWeight","labelFontSize","labelFontFamily","labelColor","labelFormatter","labelPlacement","xBandWidth","availableRange","barWidth","contexts","id","fontStyle","fontWeight","fontSize","fontFamily","color","bandwidth","padding","groupPaddingInner","round","rawBandwidth","groupIndex","seriesDatum","convert","groupYs","stackIndex","stackYs","prevMinY","prevMaxY","levelIndex","currY","barX","itemId","nodeData","labelData","inRange","prevY","continuousY","bottomY","yValue","labelText","toFixed","labelX","labelY","labelTextAlign","labelTextBaseline","colorIndex","series","width","height","fill","stroke","text","textAlign","textBaseline","updateDatumSelection","opts","datumSelection","updateRects","enterRects","setData","exit","remove","enter","append","each","rect","tag","Bar","merge","updateDatumNodes","isDatumHighlighted","seriesFillOpacity","deprecatedFill","deprecatedStroke","deprecatedStrokeWidth","_f","highlightedFill","_g","highlightFillOpacity","_h","highlightedStroke","_j","highlightedDatumStrokeWidth","_k","visibleMin","visibleMax","isZoomed","crisp","_l","isHighlight","highlightStyle","item","visibleRange","getStrokeWidth","format","highlighted","fillShadow","updateLabelSelection","labelSelection","updateLabels","enterLabels","pointerEvents","None","updateLabelNodes","labelEnabled","getTooltipHtml","nodeDatum","yGroup","fillIndex","indexOf","yNames","tooltipRenderer","yName","xValue","processedYValue","xString","formatDatum","yString","title","content","defaults","backgroundColor","getLegendData","legendData","startLevel","marker","toggleSeriesItem","slice","splice","visibleStacks","nodeDataRefresh","isLabelEnabled","className","type"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/ag-charts-community/dist/esm/es5/chart/series/cartesian/barSeries.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { Rect } from '../../../scene/shape/rect';\nimport { Text } from '../../../scene/shape/text';\nimport { BandScale } from '../../../scale/bandScale';\nimport { SeriesTooltip, SeriesNodePickMode, } from '../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { CartesianSeries, CartesianSeriesNodeClickEvent } from './cartesianSeries';\nimport { ChartAxisDirection, flipChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { extent, findMinMax } from '../../../util/array';\nimport { equal } from '../../../util/equal';\nimport { sanitizeHtml } from '../../../util/sanitize';\nimport { checkDatum, isContinuous, isNumber } from '../../../util/value';\nimport { clamper, ContinuousScale } from '../../../scale/continuousScale';\nimport { BOOLEAN, BOOLEAN_ARRAY, NUMBER, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, STRING, STRING_ARRAY, COLOR_STRING_ARRAY, Validate, OPTIONAL, } from '../../../util/validation';\nimport { CategoryAxis } from '../../axis/categoryAxis';\nimport { GroupedCategoryAxis } from '../../axis/groupedCategoryAxis';\nvar BAR_LABEL_PLACEMENTS = ['inside', 'outside'];\nvar OPT_BAR_LABEL_PLACEMENT = function (v, ctx) {\n    return OPTIONAL(v, ctx, function (v) { return BAR_LABEL_PLACEMENTS.includes(v); });\n};\nvar BarSeriesNodeTag;\n(function (BarSeriesNodeTag) {\n    BarSeriesNodeTag[BarSeriesNodeTag[\"Bar\"] = 0] = \"Bar\";\n    BarSeriesNodeTag[BarSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(BarSeriesNodeTag || (BarSeriesNodeTag = {}));\nexport var BarLabelPlacement;\n(function (BarLabelPlacement) {\n    BarLabelPlacement[\"Inside\"] = \"inside\";\n    BarLabelPlacement[\"Outside\"] = \"outside\";\n})(BarLabelPlacement || (BarLabelPlacement = {}));\nvar BarSeriesLabel = /** @class */ (function (_super) {\n    __extends(BarSeriesLabel, _super);\n    function BarSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.formatter = undefined;\n        _this.placement = BarLabelPlacement.Inside;\n        return _this;\n    }\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], BarSeriesLabel.prototype, \"formatter\", void 0);\n    __decorate([\n        Validate(OPT_BAR_LABEL_PLACEMENT)\n    ], BarSeriesLabel.prototype, \"placement\", void 0);\n    return BarSeriesLabel;\n}(Label));\nexport { BarSeriesLabel };\nvar BarSeriesTooltip = /** @class */ (function (_super) {\n    __extends(BarSeriesTooltip, _super);\n    function BarSeriesTooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderer = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], BarSeriesTooltip.prototype, \"renderer\", void 0);\n    return BarSeriesTooltip;\n}(SeriesTooltip));\nexport { BarSeriesTooltip };\nfunction flat(arr, target) {\n    if (target === void 0) { target = []; }\n    arr.forEach(function (v) {\n        if (Array.isArray(v)) {\n            flat(v, target);\n        }\n        else {\n            target.push(v);\n        }\n    });\n    return target;\n}\nfunction is2dArray(array) {\n    return array.length > 0 && Array.isArray(array[0]);\n}\nvar BarSeries = /** @class */ (function (_super) {\n    __extends(BarSeries, _super);\n    function BarSeries() {\n        var _a;\n        var _this = _super.call(this, {\n            pickGroupIncludes: ['datumNodes'],\n            pickModes: [SeriesNodePickMode.EXACT_SHAPE_MATCH],\n            pathsPerSeries: 0,\n        }) || this;\n        _this.xData = [];\n        _this.yData = [];\n        _this.yDomain = [];\n        _this.label = new BarSeriesLabel();\n        _this.tooltip = new BarSeriesTooltip();\n        _this.flipXY = false;\n        _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n        _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = [0];\n        _this.lineDashOffset = 0;\n        _this.formatter = undefined;\n        /**\n         * Used to get the position of bars within each group.\n         */\n        _this.groupScale = new BandScale();\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKeys'],\n            _a);\n        _this._xKey = '';\n        _this.xName = '';\n        _this.cumYKeyCount = [];\n        _this.flatYKeys = undefined; // only set when a user used a flat array for yKeys\n        _this.hideInLegend = [];\n        /**\n         * yKeys: [['coffee']] - regular bars, each category has a single bar that shows a value for coffee\n         * yKeys: [['coffee'], ['tea'], ['milk']] - each category has three bars that show values for coffee, tea and milk\n         * yKeys: [['coffee', 'tea', 'milk']] - each category has a single bar with three stacks that show values for coffee, tea and milk\n         * yKeys: [['coffee', 'tea', 'milk'], ['paper', 'ink']] - each category has 2 stacked bars,\n         *     first showing values for coffee, tea and milk and second values for paper and ink\n         */\n        _this._yKeys = [];\n        _this._visibles = [];\n        _this._grouped = false;\n        /**\n         * A map of `yKeys` to their names (used in legends and tooltips).\n         * For example, if a key is `product_name` it's name can be a more presentable `Product Name`.\n         */\n        _this._yNames = {};\n        _this.strokeWidth = 1;\n        _this.shadow = undefined;\n        _this.smallestDataInterval = undefined;\n        _this.label.enabled = false;\n        return _this;\n    }\n    BarSeries.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[this.flipXY ? flipChartAxisDirection(direction) : direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values = values.concat(flat(value));\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    Object.defineProperty(BarSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            this._xKey = value;\n            this.xData = [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"yKeys\", {\n        get: function () {\n            return this._yKeys;\n        },\n        set: function (yKeys) {\n            var _this = this;\n            var flatYKeys = undefined;\n            // Convert from flat y-keys to grouped y-keys.\n            if (!is2dArray(yKeys)) {\n                flatYKeys = yKeys;\n                yKeys = this.grouped ? flatYKeys.map(function (k) { return [k]; }) : [flatYKeys];\n            }\n            if (!equal(this._yKeys, yKeys)) {\n                this.flatYKeys = flatYKeys ? flatYKeys : undefined;\n                this._yKeys = yKeys;\n                var prevYKeyCount_1 = 0;\n                this.cumYKeyCount = [];\n                var visibleStacks_1 = [];\n                yKeys.forEach(function (stack, index) {\n                    if (stack.length > 0) {\n                        visibleStacks_1.push(String(index));\n                    }\n                    _this.cumYKeyCount.push(prevYKeyCount_1);\n                    prevYKeyCount_1 += stack.length;\n                });\n                this.yData = [];\n                this.processSeriesItemEnabled();\n                var groupScale = this.groupScale;\n                groupScale.domain = visibleStacks_1;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"visibles\", {\n        get: function () {\n            return this._visibles;\n        },\n        set: function (visibles) {\n            var flattenFn = function (r, n) { return r.concat.apply(r, __spread((Array.isArray(n) ? n : [n]))); };\n            this._visibles = visibles.reduce(flattenFn, []);\n            this.processSeriesItemEnabled();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BarSeries.prototype.processSeriesItemEnabled = function () {\n        var _a = this, seriesItemEnabled = _a.seriesItemEnabled, _b = _a._visibles, visibles = _b === void 0 ? [] : _b;\n        seriesItemEnabled.clear();\n        var visiblesIdx = 0;\n        this._yKeys.forEach(function (stack) {\n            stack.forEach(function (yKey) { var _a, _b; return seriesItemEnabled.set(yKey, (_b = (_a = visibles) === null || _a === void 0 ? void 0 : _a[visiblesIdx++], (_b !== null && _b !== void 0 ? _b : true))); });\n        });\n    };\n    Object.defineProperty(BarSeries.prototype, \"grouped\", {\n        get: function () {\n            return this._grouped;\n        },\n        set: function (value) {\n            if (this._grouped !== value) {\n                this._grouped = value;\n                if (this.flatYKeys) {\n                    this.yKeys = this.flatYKeys;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"yNames\", {\n        get: function () {\n            return this._yNames;\n        },\n        set: function (values) {\n            if (Array.isArray(values) && this.flatYKeys) {\n                var map_1 = {};\n                this.flatYKeys.forEach(function (k, i) {\n                    map_1[k] = values[i];\n                });\n                values = map_1;\n            }\n            this._yNames = values;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BarSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n    };\n    Object.defineProperty(BarSeries.prototype, \"normalizedTo\", {\n        get: function () {\n            return this._normalizedTo;\n        },\n        set: function (value) {\n            var absValue = value ? Math.abs(value) : undefined;\n            this._normalizedTo = absValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BarSeries.prototype.processData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, xKey, yKeys, seriesItemEnabled, data, xAxis, yAxis, setSmallestXInterval, isContinuousX, isContinuousY, keysFound, prevX, yMinMax, _b, yData, normalizedTo, yAbsTotal, _c, yMin, yMax;\n            var _this = this;\n            return __generator(this, function (_d) {\n                _a = this, xKey = _a.xKey, yKeys = _a.yKeys, seriesItemEnabled = _a.seriesItemEnabled;\n                data = xKey && yKeys.length && this.data ? this.data : [];\n                xAxis = this.getCategoryAxis();\n                yAxis = this.getValueAxis();\n                if (!(xAxis && yAxis)) {\n                    return [2 /*return*/];\n                }\n                setSmallestXInterval = function (curr, prev) {\n                    if (_this.smallestDataInterval === undefined) {\n                        _this.smallestDataInterval = { x: Infinity, y: Infinity };\n                    }\n                    var x = _this.smallestDataInterval.x;\n                    var interval = Math.abs(curr - prev);\n                    if (interval > 0 && interval < x) {\n                        _this.smallestDataInterval.x = interval;\n                    }\n                };\n                isContinuousX = xAxis.scale instanceof ContinuousScale;\n                isContinuousY = yAxis.scale instanceof ContinuousScale;\n                keysFound = true;\n                prevX = Infinity;\n                this.xData = data.map(function (datum) {\n                    if (keysFound && !(xKey in datum)) {\n                        keysFound = false;\n                        console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n                    }\n                    var x = checkDatum(datum[xKey], isContinuousX);\n                    if (isContinuousX) {\n                        setSmallestXInterval(x, prevX);\n                    }\n                    prevX = x;\n                    return x;\n                });\n                this.yData = data.map(function (datum) {\n                    return yKeys.map(function (stack) {\n                        return stack.map(function (yKey) {\n                            if (keysFound && !(yKey in datum)) {\n                                keysFound = false;\n                                console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n                            }\n                            var yDatum = checkDatum(datum[yKey], isContinuousY);\n                            if (!seriesItemEnabled.get(yKey) || yDatum === undefined) {\n                                return NaN;\n                            }\n                            return yDatum;\n                        });\n                    });\n                });\n                yMinMax = this.yData.map(function (group) { return group.map(function (stack) { return findMinMax(stack); }); });\n                _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n                yAbsTotal = this.yData.map(function (group) {\n                    return group.map(function (stack) {\n                        return stack.reduce(function (acc, stack) {\n                            acc += isNaN(stack) ? 0 : Math.abs(stack);\n                            return acc;\n                        }, 0);\n                    });\n                });\n                _c = this.findLargestMinMax(yMinMax), yMin = _c.min, yMax = _c.max;\n                if (yMin === Infinity && yMax === -Infinity) {\n                    // There's no data in the domain.\n                    this.yDomain = [];\n                    return [2 /*return*/];\n                }\n                if (normalizedTo && isFinite(normalizedTo)) {\n                    yMin = yMin < 0 ? -normalizedTo : 0;\n                    yMax = yMax > 0 ? normalizedTo : 0;\n                    yData.forEach(function (group, i) {\n                        group.forEach(function (stack, j) {\n                            stack.forEach(function (y, k) {\n                                stack[k] = (y / yAbsTotal[i][j]) * normalizedTo;\n                            });\n                        });\n                    });\n                }\n                this.yDomain = this.fixNumericExtent([yMin, yMax], this.yAxis);\n                return [2 /*return*/];\n            });\n        });\n    };\n    BarSeries.prototype.findLargestMinMax = function (groups) {\n        var e_1, _a, e_2, _b;\n        var tallestStackMin = Infinity;\n        var tallestStackMax = -Infinity;\n        try {\n            for (var groups_1 = __values(groups), groups_1_1 = groups_1.next(); !groups_1_1.done; groups_1_1 = groups_1.next()) {\n                var group = groups_1_1.value;\n                try {\n                    for (var group_1 = (e_2 = void 0, __values(group)), group_1_1 = group_1.next(); !group_1_1.done; group_1_1 = group_1.next()) {\n                        var stack = group_1_1.value;\n                        var _c = stack.min, min = _c === void 0 ? Infinity : _c, _d = stack.max, max = _d === void 0 ? -Infinity : _d;\n                        if (min < tallestStackMin) {\n                            tallestStackMin = min;\n                        }\n                        if (max > tallestStackMax) {\n                            tallestStackMax = max;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (group_1_1 && !group_1_1.done && (_b = group_1.return)) _b.call(group_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (groups_1_1 && !groups_1_1.done && (_a = groups_1.return)) _a.call(groups_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return { min: tallestStackMin, max: tallestStackMax };\n    };\n    BarSeries.prototype.getDomain = function (direction) {\n        var _a, _b, _c, _d, _e;\n        var flipXY = this.flipXY;\n        if (this.flipXY) {\n            direction = flipChartAxisDirection(direction);\n        }\n        if (direction === ChartAxisDirection.X) {\n            if (!(((_a = this.getCategoryAxis()) === null || _a === void 0 ? void 0 : _a.scale) instanceof ContinuousScale)) {\n                return this.xData;\n            }\n            // The last node will be clipped if the scale is not a band scale\n            // Extend the domain by the smallest data interval so that the last band is not clipped\n            var xDomain = extent(this.xData, isContinuous, Number) || [NaN, NaN];\n            if (flipXY) {\n                xDomain[0] = xDomain[0] - (_c = (_b = this.smallestDataInterval) === null || _b === void 0 ? void 0 : _b.x, (_c !== null && _c !== void 0 ? _c : 0));\n            }\n            else {\n                xDomain[1] = xDomain[1] + (_e = (_d = this.smallestDataInterval) === null || _d === void 0 ? void 0 : _d.x, (_e !== null && _e !== void 0 ? _e : 0));\n            }\n            return xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    BarSeries.prototype.getNodeClickEvent = function (event, datum) {\n        return new CartesianSeriesNodeClickEvent(this.xKey, datum.yKey, event, datum, this);\n    };\n    BarSeries.prototype.getCategoryAxis = function () {\n        return this.flipXY ? this.yAxis : this.xAxis;\n    };\n    BarSeries.prototype.getValueAxis = function () {\n        return this.flipXY ? this.xAxis : this.yAxis;\n    };\n    BarSeries.prototype.calculateStep = function (range) {\n        var _a, _b;\n        var smallestInterval = this.smallestDataInterval;\n        var xAxis = this.getCategoryAxis();\n        if (!xAxis) {\n            return;\n        }\n        // calculate step\n        var domainLength = xAxis.dataDomain[1] - xAxis.dataDomain[0];\n        var intervals = domainLength / (_b = (_a = smallestInterval) === null || _a === void 0 ? void 0 : _a.x, (_b !== null && _b !== void 0 ? _b : 1)) + 1;\n        // The number of intervals/bands is used to determine the width of individual bands by dividing the available range.\n        // Allow a maximum number of bands to ensure the step does not fall below 1 pixel.\n        // This means there could be some overlap of the bands in the chart.\n        var maxBands = Math.floor(range); // A minimum of 1px per bar/column means the maximum number of bands will equal the available range\n        var bands = Math.min(intervals, maxBands);\n        var step = range / Math.max(1, bands);\n        return step;\n    };\n    BarSeries.prototype.createNodeData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, chart, data, visible, xAxis, yAxis, xScale, yScale, _b, groupScale, yKeys, cumYKeyCount, fills, strokes, strokeWidth, seriesItemEnabled, xData, yData, label, flipXY, seriesId, labelFontStyle, labelFontWeight, labelFontSize, labelFontFamily, labelColor, labelFormatter, labelPlacement, xBandWidth, availableRange, step, barWidth, contexts;\n            var _this = this;\n            return __generator(this, function (_c) {\n                _a = this, chart = _a.chart, data = _a.data, visible = _a.visible;\n                xAxis = this.getCategoryAxis();\n                yAxis = this.getValueAxis();\n                if (!(chart && data && visible && xAxis && yAxis)) {\n                    return [2 /*return*/, []];\n                }\n                xScale = xAxis.scale;\n                yScale = yAxis.scale;\n                _b = this, groupScale = _b.groupScale, yKeys = _b.yKeys, cumYKeyCount = _b.cumYKeyCount, fills = _b.fills, strokes = _b.strokes, strokeWidth = _b.strokeWidth, seriesItemEnabled = _b.seriesItemEnabled, xData = _b.xData, yData = _b.yData, label = _b.label, flipXY = _b.flipXY, seriesId = _b.id;\n                labelFontStyle = label.fontStyle, labelFontWeight = label.fontWeight, labelFontSize = label.fontSize, labelFontFamily = label.fontFamily, labelColor = label.color, labelFormatter = label.formatter, labelPlacement = label.placement;\n                xBandWidth = xScale.bandwidth;\n                if (xScale instanceof ContinuousScale) {\n                    availableRange = Math.max(xAxis.range[0], xAxis.range[1]);\n                    step = this.calculateStep(availableRange);\n                    xBandWidth = step;\n                }\n                groupScale.range = [0, xBandWidth];\n                if (xAxis instanceof CategoryAxis) {\n                    groupScale.padding = xAxis.groupPaddingInner;\n                }\n                else if (xAxis instanceof GroupedCategoryAxis) {\n                    groupScale.padding = 0.1;\n                }\n                else {\n                    // Number or Time axis\n                    groupScale.padding = 0;\n                }\n                // To get exactly `0` padding we need to turn off rounding\n                if (groupScale.padding === 0) {\n                    groupScale.round = false;\n                }\n                else {\n                    groupScale.round = true;\n                }\n                barWidth = groupScale.bandwidth >= 1\n                    ? // Pixel-rounded value for low-volume bar charts.\n                        groupScale.bandwidth\n                    : // Handle high-volume bar charts gracefully.\n                        groupScale.rawBandwidth;\n                contexts = [];\n                xData.forEach(function (group, groupIndex) {\n                    var _a, _b;\n                    var seriesDatum = data[groupIndex];\n                    var x = xScale.convert(group);\n                    var groupYs = yData[groupIndex]; // y-data for groups of stacks\n                    for (var stackIndex = 0; stackIndex < groupYs.length; stackIndex++) {\n                        var stackYs = groupYs[stackIndex]; // y-data for a stack within a group\n                        contexts[stackIndex] = (_a = contexts[stackIndex], (_a !== null && _a !== void 0 ? _a : []));\n                        var prevMinY = 0;\n                        var prevMaxY = 0;\n                        for (var levelIndex = 0; levelIndex < stackYs.length; levelIndex++) {\n                            var currY = +stackYs[levelIndex];\n                            var yKey = yKeys[stackIndex][levelIndex];\n                            var barX = x + groupScale.convert(String(stackIndex));\n                            contexts[stackIndex][levelIndex] = (_b = contexts[stackIndex][levelIndex], (_b !== null && _b !== void 0 ? _b : {\n                                itemId: yKey,\n                                nodeData: [],\n                                labelData: [],\n                            }));\n                            // Bars outside of visible range are not rendered, so we create node data\n                            // only for the visible subset of user data.\n                            if (!xAxis.inRange(barX, barWidth)) {\n                                continue;\n                            }\n                            if (isNaN(currY)) {\n                                continue;\n                            }\n                            var prevY = currY < 0 ? prevMinY : prevMaxY;\n                            var continuousY = yScale instanceof ContinuousScale;\n                            var y = yScale.convert(prevY + currY, continuousY ? clamper : undefined);\n                            var bottomY = yScale.convert(prevY, continuousY ? clamper : undefined);\n                            var yValue = seriesDatum[yKey]; // unprocessed y-value\n                            var labelText = void 0;\n                            if (labelFormatter) {\n                                labelText = labelFormatter({\n                                    value: isNumber(yValue) ? yValue : undefined,\n                                    seriesId: seriesId,\n                                });\n                            }\n                            else {\n                                labelText = isNumber(yValue) ? yValue.toFixed(2) : '';\n                            }\n                            var labelX = void 0;\n                            var labelY = void 0;\n                            if (flipXY) {\n                                labelY = barX + barWidth / 2;\n                                if (labelPlacement === BarLabelPlacement.Inside) {\n                                    labelX = y + ((yValue >= 0 ? -1 : 1) * Math.abs(bottomY - y)) / 2;\n                                }\n                                else {\n                                    labelX = y + (yValue >= 0 ? 1 : -1) * 4;\n                                }\n                            }\n                            else {\n                                labelX = barX + barWidth / 2;\n                                if (labelPlacement === BarLabelPlacement.Inside) {\n                                    labelY = y + ((yValue >= 0 ? 1 : -1) * Math.abs(bottomY - y)) / 2;\n                                }\n                                else {\n                                    labelY = y + (yValue >= 0 ? -3 : 4);\n                                }\n                            }\n                            var labelTextAlign = void 0;\n                            var labelTextBaseline = void 0;\n                            if (labelPlacement === BarLabelPlacement.Inside) {\n                                labelTextAlign = 'center';\n                                labelTextBaseline = 'middle';\n                            }\n                            else {\n                                labelTextAlign = flipXY ? (yValue >= 0 ? 'start' : 'end') : 'center';\n                                labelTextBaseline = flipXY ? 'middle' : yValue >= 0 ? 'bottom' : 'top';\n                            }\n                            var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n                            var nodeData = {\n                                index: groupIndex,\n                                series: _this,\n                                itemId: yKey,\n                                datum: seriesDatum,\n                                yValue: yValue,\n                                yKey: yKey,\n                                x: flipXY ? Math.min(y, bottomY) : barX,\n                                y: flipXY ? barX : Math.min(y, bottomY),\n                                width: flipXY ? Math.abs(bottomY - y) : barWidth,\n                                height: flipXY ? barWidth : Math.abs(bottomY - y),\n                                colorIndex: colorIndex,\n                                fill: fills[colorIndex % fills.length],\n                                stroke: strokes[colorIndex % strokes.length],\n                                strokeWidth: strokeWidth,\n                                label: seriesItemEnabled.get(yKey) && labelText\n                                    ? {\n                                        text: labelText,\n                                        fontStyle: labelFontStyle,\n                                        fontWeight: labelFontWeight,\n                                        fontSize: labelFontSize,\n                                        fontFamily: labelFontFamily,\n                                        textAlign: labelTextAlign,\n                                        textBaseline: labelTextBaseline,\n                                        fill: labelColor,\n                                        x: labelX,\n                                        y: labelY,\n                                    }\n                                    : undefined,\n                            };\n                            contexts[stackIndex][levelIndex].nodeData.push(nodeData);\n                            contexts[stackIndex][levelIndex].labelData.push(nodeData);\n                            if (currY < 0) {\n                                prevMinY += currY;\n                            }\n                            else {\n                                prevMaxY += currY;\n                            }\n                        }\n                    }\n                });\n                return [2 /*return*/, contexts.reduce(function (r, n) { return r.concat.apply(r, __spread(n)); }, [])];\n            });\n        });\n    };\n    BarSeries.prototype.updateDatumSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var nodeData, datumSelection, updateRects, enterRects;\n            return __generator(this, function (_a) {\n                nodeData = opts.nodeData, datumSelection = opts.datumSelection;\n                updateRects = datumSelection.setData(nodeData);\n                updateRects.exit.remove();\n                enterRects = updateRects.enter.append(Rect).each(function (rect) {\n                    rect.tag = BarSeriesNodeTag.Bar;\n                });\n                return [2 /*return*/, updateRects.merge(enterRects)];\n            });\n        });\n    };\n    BarSeries.prototype.updateDatumNodes = function (opts) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var datumSelection, isDatumHighlighted, _c, fills, strokes, seriesFillOpacity, strokeOpacity, shadow, formatter, xKey, flipXY, _d, deprecatedFill, deprecatedStroke, deprecatedStrokeWidth, _e, _f, highlightedFill, _g, highlightFillOpacity, _h, highlightedStroke, _j, highlightedDatumStrokeWidth, seriesId, _k, visibleMin, visibleMax, isZoomed, crisp;\n            var _this = this;\n            return __generator(this, function (_l) {\n                datumSelection = opts.datumSelection, isDatumHighlighted = opts.isHighlight;\n                _c = this, fills = _c.fills, strokes = _c.strokes, seriesFillOpacity = _c.fillOpacity, strokeOpacity = _c.strokeOpacity, shadow = _c.shadow, formatter = _c.formatter, xKey = _c.xKey, flipXY = _c.flipXY, _d = _c.highlightStyle, deprecatedFill = _d.fill, deprecatedStroke = _d.stroke, deprecatedStrokeWidth = _d.strokeWidth, _e = _d.item, _f = _e.fill, highlightedFill = _f === void 0 ? deprecatedFill : _f, _g = _e.fillOpacity, highlightFillOpacity = _g === void 0 ? seriesFillOpacity : _g, _h = _e.stroke, highlightedStroke = _h === void 0 ? deprecatedStroke : _h, _j = _e.strokeWidth, highlightedDatumStrokeWidth = _j === void 0 ? deprecatedStrokeWidth : _j, seriesId = _c.id;\n                _k = __read((_b = (_a = this.xAxis) === null || _a === void 0 ? void 0 : _a.visibleRange, (_b !== null && _b !== void 0 ? _b : [])), 2), visibleMin = _k[0], visibleMax = _k[1];\n                isZoomed = visibleMin !== 0 || visibleMax !== 1;\n                crisp = !isZoomed;\n                datumSelection.each(function (rect, datum) {\n                    var colorIndex = datum.colorIndex;\n                    var fill = isDatumHighlighted && highlightedFill !== undefined\n                        ? highlightedFill\n                        : fills[colorIndex % fills.length];\n                    var stroke = isDatumHighlighted && highlightedStroke !== undefined\n                        ? highlightedStroke\n                        : strokes[colorIndex % fills.length];\n                    var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined\n                        ? highlightedDatumStrokeWidth\n                        : _this.getStrokeWidth(_this.strokeWidth, datum);\n                    var fillOpacity = isDatumHighlighted ? highlightFillOpacity : seriesFillOpacity;\n                    var format = undefined;\n                    if (formatter) {\n                        format = formatter({\n                            datum: datum.datum,\n                            fill: fill,\n                            stroke: stroke,\n                            strokeWidth: strokeWidth,\n                            highlighted: isDatumHighlighted,\n                            xKey: xKey,\n                            yKey: datum.yKey,\n                            seriesId: seriesId,\n                        });\n                    }\n                    rect.crisp = crisp;\n                    rect.x = datum.x;\n                    rect.y = datum.y;\n                    rect.width = datum.width;\n                    rect.height = datum.height;\n                    rect.fill = (format && format.fill) || fill;\n                    rect.stroke = (format && format.stroke) || stroke;\n                    rect.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n                    rect.fillOpacity = fillOpacity;\n                    rect.strokeOpacity = strokeOpacity;\n                    rect.lineDash = _this.lineDash;\n                    rect.lineDashOffset = _this.lineDashOffset;\n                    rect.fillShadow = shadow;\n                    // Prevent stroke from rendering for zero height columns and zero width bars.\n                    rect.visible = flipXY ? datum.width > 0 : datum.height > 0;\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    BarSeries.prototype.updateLabelSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var labelData, labelSelection, enabled, data, updateLabels, enterLabels;\n            return __generator(this, function (_a) {\n                labelData = opts.labelData, labelSelection = opts.labelSelection;\n                enabled = this.label.enabled;\n                data = enabled ? labelData : [];\n                updateLabels = labelSelection.setData(data);\n                updateLabels.exit.remove();\n                enterLabels = updateLabels.enter.append(Text).each(function (text) {\n                    text.tag = BarSeriesNodeTag.Label;\n                    text.pointerEvents = PointerEvents.None;\n                });\n                return [2 /*return*/, updateLabels.merge(enterLabels)];\n            });\n        });\n    };\n    BarSeries.prototype.updateLabelNodes = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var labelSelection, _a, labelEnabled, fontStyle, fontWeight, fontSize, fontFamily, color;\n            return __generator(this, function (_b) {\n                labelSelection = opts.labelSelection;\n                _a = this.label, labelEnabled = _a.enabled, fontStyle = _a.fontStyle, fontWeight = _a.fontWeight, fontSize = _a.fontSize, fontFamily = _a.fontFamily, color = _a.color;\n                labelSelection.each(function (text, datum) {\n                    var label = datum.label;\n                    if (label && labelEnabled) {\n                        text.fontStyle = fontStyle;\n                        text.fontWeight = fontWeight;\n                        text.fontSize = fontSize;\n                        text.fontFamily = fontFamily;\n                        text.textAlign = label.textAlign;\n                        text.textBaseline = label.textBaseline;\n                        text.text = label.text;\n                        text.x = label.x;\n                        text.y = label.y;\n                        text.fill = color;\n                        text.visible = true;\n                    }\n                    else {\n                        text.visible = false;\n                    }\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    BarSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys, yData = _a.yData;\n        var xAxis = this.getCategoryAxis();\n        var yAxis = this.getValueAxis();\n        var yKey = nodeDatum.yKey;\n        if (!yData.length || !xKey || !yKey || !xAxis || !yAxis) {\n            return '';\n        }\n        var yGroup = yData[nodeDatum.index];\n        var fillIndex = 0;\n        var i = 0;\n        var j = 0;\n        for (; j < yKeys.length; j++) {\n            var stack = yKeys[j];\n            i = stack.indexOf(yKey);\n            if (i >= 0) {\n                fillIndex += i;\n                break;\n            }\n            fillIndex += stack.length;\n        }\n        var _b = this, xName = _b.xName, yNames = _b.yNames, fills = _b.fills, strokes = _b.strokes, tooltip = _b.tooltip, formatter = _b.formatter, seriesId = _b.id;\n        var tooltipRenderer = tooltip.renderer;\n        var datum = nodeDatum.datum;\n        var yName = yNames[yKey];\n        var fill = fills[fillIndex % fills.length];\n        var stroke = strokes[fillIndex % fills.length];\n        var strokeWidth = this.getStrokeWidth(this.strokeWidth);\n        var xValue = datum[xKey];\n        var yValue = datum[yKey];\n        var processedYValue = yGroup[j][i];\n        var xString = sanitizeHtml(xAxis.formatDatum(xValue));\n        var yString = sanitizeHtml(yAxis.formatDatum(yValue));\n        var title = sanitizeHtml(yName);\n        var content = xString + ': ' + yString;\n        var format = undefined;\n        if (formatter) {\n            format = formatter({\n                datum: datum,\n                fill: fill,\n                stroke: stroke,\n                strokeWidth: strokeWidth,\n                highlighted: false,\n                xKey: xKey,\n                yKey: yKey,\n                seriesId: seriesId,\n            });\n        }\n        var color = (format && format.fill) || fill;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content,\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                xKey: xKey,\n                xValue: xValue,\n                xName: xName,\n                yKey: yKey,\n                yValue: yValue,\n                processedYValue: processedYValue,\n                yName: yName,\n                color: color,\n                title: title,\n                seriesId: seriesId,\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    BarSeries.prototype.getLegendData = function () {\n        var _a = this, id = _a.id, data = _a.data, xKey = _a.xKey, yKeys = _a.yKeys, yNames = _a.yNames, cumYKeyCount = _a.cumYKeyCount, seriesItemEnabled = _a.seriesItemEnabled, hideInLegend = _a.hideInLegend, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, flipXY = _a.flipXY;\n        if (!data || !data.length || !xKey || !yKeys.length) {\n            return [];\n        }\n        var legendData = [];\n        this.yKeys.forEach(function (stack, stackIndex) {\n            // Column stacks should be listed in the legend in reverse order, for symmetry with the\n            // vertical stack display order. Bar stacks are already consistent left-to-right with\n            // the legend.\n            var startLevel = flipXY ? 0 : stack.length - 1;\n            var direction = flipXY ? 1 : -1;\n            for (var levelIndex = startLevel, step = 0; step < stack.length; levelIndex += direction, step++) {\n                var yKey = stack[levelIndex];\n                if (hideInLegend.indexOf(yKey) >= 0) {\n                    return;\n                }\n                var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n                legendData.push({\n                    id: id,\n                    itemId: yKey,\n                    seriesId: id,\n                    enabled: seriesItemEnabled.get(yKey) || false,\n                    label: {\n                        text: yNames[yKey] || yKey,\n                    },\n                    marker: {\n                        fill: fills[colorIndex % fills.length],\n                        stroke: strokes[colorIndex % strokes.length],\n                        fillOpacity: fillOpacity,\n                        strokeOpacity: strokeOpacity,\n                    },\n                });\n            }\n        });\n        return legendData;\n    };\n    BarSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        _super.prototype.toggleSeriesItem.call(this, itemId, enabled);\n        var yKeys = this.yKeys.map(function (stack) { return stack.slice(); }); // deep clone\n        this.seriesItemEnabled.forEach(function (enabled, yKey) {\n            if (!enabled) {\n                yKeys.forEach(function (stack) {\n                    var index = stack.indexOf(yKey);\n                    if (index >= 0) {\n                        stack.splice(index, 1);\n                    }\n                });\n            }\n        });\n        var visibleStacks = [];\n        yKeys.forEach(function (stack, index) {\n            if (stack.length > 0) {\n                visibleStacks.push(String(index));\n            }\n        });\n        this.groupScale.domain = visibleStacks;\n        this.nodeDataRefresh = true;\n    };\n    BarSeries.prototype.isLabelEnabled = function () {\n        return this.label.enabled;\n    };\n    BarSeries.className = 'BarSeries';\n    BarSeries.type = 'bar';\n    __decorate([\n        Validate(BOOLEAN)\n    ], BarSeries.prototype, \"flipXY\", void 0);\n    __decorate([\n        Validate(COLOR_STRING_ARRAY)\n    ], BarSeries.prototype, \"fills\", void 0);\n    __decorate([\n        Validate(COLOR_STRING_ARRAY)\n    ], BarSeries.prototype, \"strokes\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], BarSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], BarSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        Validate(OPT_LINE_DASH)\n    ], BarSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], BarSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], BarSeries.prototype, \"formatter\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], BarSeries.prototype, \"_xKey\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], BarSeries.prototype, \"xName\", void 0);\n    __decorate([\n        Validate(STRING_ARRAY)\n    ], BarSeries.prototype, \"hideInLegend\", void 0);\n    __decorate([\n        Validate(BOOLEAN_ARRAY)\n    ], BarSeries.prototype, \"_visibles\", void 0);\n    __decorate([\n        Validate(BOOLEAN)\n    ], BarSeries.prototype, \"_grouped\", void 0);\n    __decorate([\n        Validate(OPT_NUMBER())\n    ], BarSeries.prototype, \"_normalizedTo\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], BarSeries.prototype, \"strokeWidth\", void 0);\n    return BarSeries;\n}(CartesianSeries));\nexport { BarSeries };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}