{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { Series, SeriesNodeClickEvent } from '../series';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { SeriesMarker } from '../seriesMarker';\nimport { isContinuous, isDiscrete } from '../../../util/value';\nimport { Path } from '../../../scene/shape/path';\nimport { Selection } from '../../../scene/selection';\nimport { Group } from '../../../scene/group';\nimport { RedrawType } from '../../../scene/changeDetectable';\nimport { CategoryAxis } from '../../axis/categoryAxis';\nimport { Layers } from '../../layers';\nimport { OPT_FUNCTION, ValidateAndChangeDetection } from '../../../util/validation';\nimport { jsonDiff } from '../../../util/json';\nvar CartesianSeriesNodeClickEvent = /** @class */function (_super) {\n  __extends(CartesianSeriesNodeClickEvent, _super);\n  function CartesianSeriesNodeClickEvent(xKey, yKey, nativeEvent, datum, series) {\n    var _this = _super.call(this, nativeEvent, datum, series) || this;\n    _this.xKey = xKey;\n    _this.yKey = yKey;\n    return _this;\n  }\n  return CartesianSeriesNodeClickEvent;\n}(SeriesNodeClickEvent);\nexport { CartesianSeriesNodeClickEvent };\nvar CartesianSeries = /** @class */function (_super) {\n  __extends(CartesianSeries, _super);\n  function CartesianSeries(opts) {\n    var _a;\n    if (opts === void 0) {\n      opts = {};\n    }\n    var _this = _super.call(this, {\n      useSeriesGroupLayer: true,\n      pickModes: opts.pickModes\n    }) || this;\n    _this._contextNodeData = [];\n    _this.nodeDataDependencies = {};\n    _this.highlightSelection = Selection.select(_this.highlightNode).selectAll();\n    _this.highlightLabelSelection = Selection.select(_this.highlightLabel).selectAll();\n    _this.subGroups = [];\n    _this.subGroupId = 0;\n    /**\n     * The assumption is that the values will be reset (to `true`)\n     * in the {@link yKeys} setter.\n     */\n    _this.seriesItemEnabled = new Map();\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKey'], _a);\n    var _b = opts.pickGroupIncludes,\n      pickGroupIncludes = _b === void 0 ? ['datumNodes'] : _b,\n      _c = opts.pathsPerSeries,\n      pathsPerSeries = _c === void 0 ? 1 : _c,\n      _d = opts.features,\n      features = _d === void 0 ? [] : _d,\n      _e = opts.pathsZIndexSubOrderOffset,\n      pathsZIndexSubOrderOffset = _e === void 0 ? [] : _e,\n      _f = opts.renderLayerPerSubSeries,\n      renderLayerPerSubSeries = _f === void 0 ? true : _f;\n    _this.opts = {\n      pickGroupIncludes: pickGroupIncludes,\n      pathsPerSeries: pathsPerSeries,\n      features: features,\n      pathsZIndexSubOrderOffset: pathsZIndexSubOrderOffset,\n      renderLayerPerSubSeries: renderLayerPerSubSeries\n    };\n    return _this;\n  }\n  Object.defineProperty(CartesianSeries.prototype, \"contextNodeData\", {\n    get: function () {\n      var _a;\n      return (_a = this._contextNodeData) === null || _a === void 0 ? void 0 : _a.slice();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CartesianSeries.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this._contextNodeData.splice(0, this._contextNodeData.length);\n    this.subGroups.splice(0, this.subGroups.length);\n  };\n  /**\n   * Note: we are passing `isContinuousX` and `isContinuousY` into this method because it will\n   *       typically be called inside a loop and this check only needs to happen once.\n   * @param x A domain value to be plotted along the x-axis.\n   * @param y A domain value to be plotted along the y-axis.\n   * @param isContinuousX Typically this will be the value of `xAxis.scale instanceof ContinuousScale`.\n   * @param isContinuousY Typically this will be the value of `yAxis.scale instanceof ContinuousScale`.\n   * @returns `[x, y]`, if both x and y are valid domain values for their respective axes/scales, or `undefined`.\n   */\n  CartesianSeries.prototype.checkDomainXY = function (x, y, isContinuousX, isContinuousY) {\n    var isValidDatum = (isContinuousX && isContinuous(x) || !isContinuousX && isDiscrete(x)) && (isContinuousY && isContinuous(y) || !isContinuousY && isDiscrete(y));\n    return isValidDatum ? [x, y] : undefined;\n  };\n  /**\n   * Note: we are passing the xAxis and yAxis because the calling code is supposed to make sure\n   *       that series has both of them defined, and also to avoid one level of indirection,\n   *       e.g. `this.xAxis!.inRange(x)`, both of which are suboptimal in tight loops where this method is used.\n   * @param x A range value to be plotted along the x-axis.\n   * @param y A range value to be plotted along the y-axis.\n   * @param xAxis The series' x-axis.\n   * @param yAxis The series' y-axis.\n   * @returns\n   */\n  CartesianSeries.prototype.checkRangeXY = function (x, y, xAxis, yAxis) {\n    return !isNaN(x) && !isNaN(y) && xAxis.inRange(x) && yAxis.inRange(y);\n  };\n  CartesianSeries.prototype.update = function (_a) {\n    var seriesRect = _a.seriesRect;\n    var _b, _c;\n    return __awaiter(this, void 0, void 0, function () {\n      var _d, seriesItemEnabled, visible, _e, _f, _g, series, seriesHighlighted, anySeriesItemEnabled, newNodeDataDependencies;\n      return __generator(this, function (_h) {\n        switch (_h.label) {\n          case 0:\n            _d = this, seriesItemEnabled = _d.seriesItemEnabled, visible = _d.visible, _e = _d.chart, _f = (_e === void 0 ? {} : _e).highlightedDatum, _g = (_f === void 0 ? {} : _f).series, series = _g === void 0 ? undefined : _g;\n            seriesHighlighted = series ? series === this : undefined;\n            anySeriesItemEnabled = visible && seriesItemEnabled.size === 0 || __spread(seriesItemEnabled.values()).some(function (v) {\n              return v === true;\n            });\n            newNodeDataDependencies = {\n              seriesRectWidth: (_b = seriesRect) === null || _b === void 0 ? void 0 : _b.width,\n              seriesRectHeight: (_c = seriesRect) === null || _c === void 0 ? void 0 : _c.height\n            };\n            if (jsonDiff(this.nodeDataDependencies, newNodeDataDependencies) != null) {\n              this.nodeDataDependencies = newNodeDataDependencies;\n              this.markNodeDataDirty();\n            }\n            return [4 /*yield*/, this.updateSelections(seriesHighlighted, anySeriesItemEnabled)];\n          case 1:\n            _h.sent();\n            return [4 /*yield*/, this.updateNodes(seriesHighlighted, anySeriesItemEnabled)];\n          case 2:\n            _h.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateSelections = function (seriesHighlighted, anySeriesItemEnabled) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n      var _this = this;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.updateHighlightSelection(seriesHighlighted)];\n          case 1:\n            _b.sent();\n            if (!anySeriesItemEnabled) {\n              return [2 /*return*/];\n            }\n\n            if (!this.nodeDataRefresh && !this.isPathOrSelectionDirty()) {\n              return [2 /*return*/];\n            }\n\n            if (!this.nodeDataRefresh) return [3 /*break*/, 4];\n            this.nodeDataRefresh = false;\n            _a = this;\n            return [4 /*yield*/, this.createNodeData()];\n          case 2:\n            _a._contextNodeData = _b.sent();\n            return [4 /*yield*/, this.updateSeriesGroups()];\n          case 3:\n            _b.sent();\n            _b.label = 4;\n          case 4:\n            return [4 /*yield*/, Promise.all(this.subGroups.map(function (g, i) {\n              return _this.updateSeriesGroupSelections(g, i, seriesHighlighted);\n            }))];\n          case 5:\n            _b.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateSeriesGroupSelections = function (subGroup, seriesIdx, seriesHighlighted) {\n    return __awaiter(this, void 0, void 0, function () {\n      var datumSelection, labelSelection, markerSelection, paths, contextData, nodeData, labelData, itemId, _a, _b, _c;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            datumSelection = subGroup.datumSelection, labelSelection = subGroup.labelSelection, markerSelection = subGroup.markerSelection, paths = subGroup.paths;\n            contextData = this._contextNodeData[seriesIdx];\n            nodeData = contextData.nodeData, labelData = contextData.labelData, itemId = contextData.itemId;\n            return [4 /*yield*/, this.updatePaths({\n              seriesHighlighted: seriesHighlighted,\n              itemId: itemId,\n              contextData: contextData,\n              paths: paths,\n              seriesIdx: seriesIdx\n            })];\n          case 1:\n            _d.sent();\n            _a = subGroup;\n            return [4 /*yield*/, this.updateDatumSelection({\n              nodeData: nodeData,\n              datumSelection: datumSelection,\n              seriesIdx: seriesIdx\n            })];\n          case 2:\n            _a.datumSelection = _d.sent();\n            _b = subGroup;\n            return [4 /*yield*/, this.updateLabelSelection({\n              labelData: labelData,\n              labelSelection: labelSelection,\n              seriesIdx: seriesIdx\n            })];\n          case 3:\n            _b.labelSelection = _d.sent();\n            if (!markerSelection) return [3 /*break*/, 5];\n            _c = subGroup;\n            return [4 /*yield*/, this.updateMarkerSelection({\n              nodeData: nodeData,\n              markerSelection: markerSelection,\n              seriesIdx: seriesIdx\n            })];\n          case 4:\n            _c.markerSelection = _d.sent();\n            _d.label = 5;\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateSeriesGroups = function () {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var _b, contextNodeData, seriesGroup, subGroups, _c, pickGroupIncludes, pathsPerSeries, features, pathsZIndexSubOrderOffset, renderLayerPerSubSeries, totalGroups, layer, subGroupId, subGroupZOffset, group, markerGroup, labelGroup, pickGroup, pathParentGroup, datumParentGroup, paths, index;\n      return __generator(this, function (_d) {\n        _b = this, contextNodeData = _b._contextNodeData, seriesGroup = _b.seriesGroup, subGroups = _b.subGroups, _c = _b.opts, pickGroupIncludes = _c.pickGroupIncludes, pathsPerSeries = _c.pathsPerSeries, features = _c.features, pathsZIndexSubOrderOffset = _c.pathsZIndexSubOrderOffset, renderLayerPerSubSeries = _c.renderLayerPerSubSeries;\n        if (contextNodeData.length === subGroups.length) {\n          return [2 /*return*/];\n        }\n\n        if (contextNodeData.length < subGroups.length) {\n          subGroups.splice(contextNodeData.length).forEach(function (_a) {\n            var e_1, _b;\n            var group = _a.group,\n              markerGroup = _a.markerGroup,\n              paths = _a.paths;\n            seriesGroup.removeChild(group);\n            if (markerGroup) {\n              seriesGroup.removeChild(markerGroup);\n            }\n            if (!pickGroupIncludes.includes('mainPath')) {\n              try {\n                for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n                  var path = paths_1_1.value;\n                  seriesGroup.removeChild(path);\n                }\n              } catch (e_1_1) {\n                e_1 = {\n                  error: e_1_1\n                };\n              } finally {\n                try {\n                  if (paths_1_1 && !paths_1_1.done && (_b = paths_1.return)) _b.call(paths_1);\n                } finally {\n                  if (e_1) throw e_1.error;\n                }\n              }\n            }\n          });\n        }\n        totalGroups = contextNodeData.length;\n        while (totalGroups > subGroups.length) {\n          layer = renderLayerPerSubSeries;\n          subGroupId = this.subGroupId++;\n          subGroupZOffset = subGroupId;\n          group = new Group({\n            name: this.id + \"-series-sub\" + subGroupId,\n            layer: layer,\n            zIndex: Layers.SERIES_LAYER_ZINDEX,\n            zIndexSubOrder: [this.id, subGroupZOffset]\n          });\n          markerGroup = features.includes('markers') ? new Group({\n            name: this.id + \"-series-sub\" + this.subGroupId++ + \"-markers\",\n            layer: layer,\n            zIndex: Layers.SERIES_LAYER_ZINDEX,\n            zIndexSubOrder: [this.id, 10000 + subGroupId]\n          }) : undefined;\n          labelGroup = new Group({\n            name: this.id + \"-series-sub\" + this.subGroupId++ + \"-labels\",\n            layer: layer,\n            zIndex: Layers.SERIES_LABEL_ZINDEX,\n            zIndexSubOrder: [this.id, subGroupId]\n          });\n          pickGroup = new Group({\n            name: this.id + \"-series-sub\" + this.subGroupId++ + \"-pickGroup\",\n            zIndex: Layers.SERIES_LAYER_ZINDEX,\n            zIndexSubOrder: [this.id, 10000 + subGroupId]\n          });\n          pathParentGroup = pickGroupIncludes.includes('mainPath') ? pickGroup : renderLayerPerSubSeries ? group : seriesGroup;\n          datumParentGroup = pickGroupIncludes.includes('datumNodes') ? pickGroup : group;\n          seriesGroup.appendChild(group);\n          seriesGroup.appendChild(labelGroup);\n          if (markerGroup) {\n            seriesGroup.appendChild(markerGroup);\n          }\n          paths = [];\n          for (index = 0; index < pathsPerSeries; index++) {\n            paths[index] = new Path();\n            paths[index].zIndex = Layers.SERIES_LAYER_ZINDEX;\n            paths[index].zIndexSubOrder = [this.id, (_a = pathsZIndexSubOrderOffset[index], _a !== null && _a !== void 0 ? _a : 0) + subGroupZOffset];\n            pathParentGroup.appendChild(paths[index]);\n          }\n          group.appendChild(pickGroup);\n          subGroups.push({\n            paths: paths,\n            group: group,\n            pickGroup: pickGroup,\n            markerGroup: markerGroup,\n            labelGroup: labelGroup,\n            labelSelection: Selection.select(labelGroup).selectAll(),\n            datumSelection: Selection.select(datumParentGroup).selectAll(),\n            markerSelection: markerGroup ? Selection.select(markerGroup).selectAll() : undefined\n          });\n        }\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateNodes = function (seriesHighlighted, anySeriesItemEnabled) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var _b, highlightSelection, highlightLabelSelection, contextNodeData, seriesItemEnabled, features, markersEnabled, visible;\n      var _this = this;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _b = this, highlightSelection = _b.highlightSelection, highlightLabelSelection = _b.highlightLabelSelection, contextNodeData = _b._contextNodeData, seriesItemEnabled = _b.seriesItemEnabled, features = _b.opts.features;\n            markersEnabled = features.includes('markers');\n            visible = this.visible && ((_a = this._contextNodeData) === null || _a === void 0 ? void 0 : _a.length) > 0 && anySeriesItemEnabled;\n            this.group.visible = visible;\n            this.seriesGroup.visible = visible;\n            this.highlightGroup.visible = visible && !!seriesHighlighted;\n            this.seriesGroup.opacity = this.getOpacity();\n            if (!markersEnabled) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.updateMarkerNodes({\n              markerSelection: highlightSelection,\n              isHighlight: true,\n              seriesIdx: -1\n            })];\n          case 1:\n            _c.sent();\n            return [3 /*break*/, 4];\n          case 2:\n            return [4 /*yield*/, this.updateDatumNodes({\n              datumSelection: highlightSelection,\n              isHighlight: true,\n              seriesIdx: -1\n            })];\n          case 3:\n            _c.sent();\n            _c.label = 4;\n          case 4:\n            return [4 /*yield*/, this.updateLabelNodes({\n              labelSelection: highlightLabelSelection,\n              seriesIdx: -1\n            })];\n          case 5:\n            _c.sent();\n            return [4 /*yield*/, Promise.all(this.subGroups.map(function (subGroup, seriesIdx) {\n              return __awaiter(_this, void 0, void 0, function () {\n                var group, markerGroup, datumSelection, labelSelection, markerSelection, paths, labelGroup, pickGroup, itemId, subGroupVisible, subGroupOpacity, paths_2, paths_2_1, path;\n                var e_2, _a;\n                var _b;\n                return __generator(this, function (_c) {\n                  switch (_c.label) {\n                    case 0:\n                      group = subGroup.group, markerGroup = subGroup.markerGroup, datumSelection = subGroup.datumSelection, labelSelection = subGroup.labelSelection, markerSelection = subGroup.markerSelection, paths = subGroup.paths, labelGroup = subGroup.labelGroup, pickGroup = subGroup.pickGroup;\n                      itemId = contextNodeData[seriesIdx].itemId;\n                      subGroupVisible = visible && (_b = seriesItemEnabled.get(itemId), _b !== null && _b !== void 0 ? _b : true);\n                      subGroupOpacity = this.getOpacity({\n                        itemId: itemId\n                      });\n                      group.opacity = subGroupOpacity;\n                      group.visible = subGroupVisible;\n                      pickGroup.visible = subGroupVisible;\n                      labelGroup.visible = subGroupVisible;\n                      if (markerGroup) {\n                        markerGroup.opacity = subGroupOpacity;\n                        markerGroup.zIndex = group.zIndex >= Layers.SERIES_LAYER_ZINDEX ? group.zIndex : group.zIndex + 1;\n                        markerGroup.visible = subGroupVisible;\n                      }\n                      try {\n                        for (paths_2 = __values(paths), paths_2_1 = paths_2.next(); !paths_2_1.done; paths_2_1 = paths_2.next()) {\n                          path = paths_2_1.value;\n                          if (path.parent !== group) {\n                            path.opacity = subGroupOpacity;\n                            path.visible = subGroupVisible;\n                          }\n                        }\n                      } catch (e_2_1) {\n                        e_2 = {\n                          error: e_2_1\n                        };\n                      } finally {\n                        try {\n                          if (paths_2_1 && !paths_2_1.done && (_a = paths_2.return)) _a.call(paths_2);\n                        } finally {\n                          if (e_2) throw e_2.error;\n                        }\n                      }\n                      if (!group.visible) {\n                        return [2 /*return*/];\n                      }\n\n                      return [4 /*yield*/, this.updatePathNodes({\n                        seriesHighlighted: seriesHighlighted,\n                        itemId: itemId,\n                        paths: paths,\n                        seriesIdx: seriesIdx\n                      })];\n                    case 1:\n                      _c.sent();\n                      return [4 /*yield*/, this.updateDatumNodes({\n                        datumSelection: datumSelection,\n                        isHighlight: false,\n                        seriesIdx: seriesIdx\n                      })];\n                    case 2:\n                      _c.sent();\n                      return [4 /*yield*/, this.updateLabelNodes({\n                        labelSelection: labelSelection,\n                        seriesIdx: seriesIdx\n                      })];\n                    case 3:\n                      _c.sent();\n                      if (!(markersEnabled && markerSelection)) return [3 /*break*/, 5];\n                      return [4 /*yield*/, this.updateMarkerNodes({\n                        markerSelection: markerSelection,\n                        isHighlight: false,\n                        seriesIdx: seriesIdx\n                      })];\n                    case 4:\n                      _c.sent();\n                      _c.label = 5;\n                    case 5:\n                      return [2 /*return*/];\n                  }\n                });\n              });\n            }))];\n\n          case 6:\n            _c.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateHighlightSelection = function (seriesHighlighted) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, _b, _c, _d, _e, datum, _f, highlightedDatum, highlightSelection, highlightLabelSelection, contextNodeData, item, _g, labelItem, _h, itemId_1, contextNodeData_1, contextNodeData_1_1, labelData, _j;\n      var e_3, _k;\n      return __generator(this, function (_l) {\n        switch (_l.label) {\n          case 0:\n            _a = this, _b = _a.chart, _c = _b === void 0 ? {} : _b, _d = _c.highlightedDatum, _e = (_d === void 0 ? {} : _d).datum, datum = _e === void 0 ? undefined : _e, _f = _c.highlightedDatum, highlightedDatum = _f === void 0 ? undefined : _f, highlightSelection = _a.highlightSelection, highlightLabelSelection = _a.highlightLabelSelection, contextNodeData = _a._contextNodeData;\n            item = seriesHighlighted && highlightedDatum && datum ? highlightedDatum : undefined;\n            _g = this;\n            return [4 /*yield*/, this.updateHighlightSelectionItem({\n              item: item,\n              highlightSelection: highlightSelection\n            })];\n          case 1:\n            _g.highlightSelection = _l.sent();\n            if (this.isLabelEnabled() && item != null) {\n              _h = item.itemId, itemId_1 = _h === void 0 ? undefined : _h;\n              try {\n                for (contextNodeData_1 = __values(contextNodeData), contextNodeData_1_1 = contextNodeData_1.next(); !contextNodeData_1_1.done; contextNodeData_1_1 = contextNodeData_1.next()) {\n                  labelData = contextNodeData_1_1.value.labelData;\n                  labelItem = labelData.find(function (ld) {\n                    return ld.datum === item.datum && ld.itemId === itemId_1;\n                  });\n                  if (labelItem != null) {\n                    break;\n                  }\n                }\n              } catch (e_3_1) {\n                e_3 = {\n                  error: e_3_1\n                };\n              } finally {\n                try {\n                  if (contextNodeData_1_1 && !contextNodeData_1_1.done && (_k = contextNodeData_1.return)) _k.call(contextNodeData_1);\n                } finally {\n                  if (e_3) throw e_3.error;\n                }\n              }\n            }\n            _j = this;\n            return [4 /*yield*/, this.updateHighlightSelectionLabel({\n              item: labelItem,\n              highlightLabelSelection: highlightLabelSelection\n            })];\n          case 2:\n            _j.highlightLabelSelection = _l.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  CartesianSeries.prototype.pickNodeExactShape = function (point) {\n    var e_4, _a;\n    var _b;\n    var result = _super.prototype.pickNodeExactShape.call(this, point);\n    if (result) {\n      return result;\n    }\n    var x = point.x,\n      y = point.y;\n    var pickGroupIncludes = this.opts.pickGroupIncludes;\n    var markerGroupIncluded = pickGroupIncludes.includes('markers');\n    try {\n      for (var _c = __values(this.subGroups), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var _e = _d.value,\n          pickGroup = _e.pickGroup,\n          markerGroup = _e.markerGroup;\n        var match = pickGroup.pickNode(x, y);\n        if (!match && markerGroupIncluded) {\n          match = (_b = markerGroup) === null || _b === void 0 ? void 0 : _b.pickNode(x, y);\n        }\n        if (match) {\n          return {\n            datum: match.datum,\n            distance: 0\n          };\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n  };\n  CartesianSeries.prototype.pickNodeClosestDatum = function (point) {\n    var e_5, _a, e_6, _b;\n    var _c, _d, _e, _f;\n    var x = point.x,\n      y = point.y;\n    var _g = this,\n      xAxis = _g.xAxis,\n      yAxis = _g.yAxis,\n      group = _g.group,\n      contextNodeData = _g._contextNodeData;\n    var hitPoint = group.transformPoint(x, y);\n    var minDistance = Infinity;\n    var closestDatum;\n    try {\n      for (var contextNodeData_2 = __values(contextNodeData), contextNodeData_2_1 = contextNodeData_2.next(); !contextNodeData_2_1.done; contextNodeData_2_1 = contextNodeData_2.next()) {\n        var context = contextNodeData_2_1.value;\n        try {\n          for (var _h = (e_6 = void 0, __values(context.nodeData)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var datum = _j.value;\n            var _k = datum.point,\n              _l = _k === void 0 ? {} : _k,\n              _m = _l.x,\n              datumX = _m === void 0 ? NaN : _m,\n              _o = _l.y,\n              datumY = _o === void 0 ? NaN : _o;\n            if (isNaN(datumX) || isNaN(datumY)) {\n              continue;\n            }\n            var isInRange = ((_c = xAxis) === null || _c === void 0 ? void 0 : _c.inRange(datumX)) && ((_d = yAxis) === null || _d === void 0 ? void 0 : _d.inRange(datumY));\n            if (!isInRange) {\n              continue;\n            }\n            // No need to use Math.sqrt() since x < y implies Math.sqrt(x) < Math.sqrt(y) for\n            // values > 1\n            var distance = Math.max(Math.pow(hitPoint.x - datumX, 2) + Math.pow(hitPoint.y - datumY, 2), 0);\n            if (distance < minDistance) {\n              minDistance = distance;\n              closestDatum = datum;\n            }\n          }\n        } catch (e_6_1) {\n          e_6 = {\n            error: e_6_1\n          };\n        } finally {\n          try {\n            if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n          } finally {\n            if (e_6) throw e_6.error;\n          }\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (contextNodeData_2_1 && !contextNodeData_2_1.done && (_a = contextNodeData_2.return)) _a.call(contextNodeData_2);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n    if (closestDatum) {\n      var distance = Math.max(Math.sqrt(minDistance) - (_f = (_e = closestDatum.point) === null || _e === void 0 ? void 0 : _e.size, _f !== null && _f !== void 0 ? _f : 0), 0);\n      return {\n        datum: closestDatum,\n        distance: distance\n      };\n    }\n  };\n  CartesianSeries.prototype.pickNodeMainAxisFirst = function (point, requireCategoryAxis) {\n    var e_7, _a, e_8, _b;\n    var _c, _d, _e, _f;\n    var x = point.x,\n      y = point.y;\n    var _g = this,\n      xAxis = _g.xAxis,\n      yAxis = _g.yAxis,\n      group = _g.group,\n      contextNodeData = _g._contextNodeData;\n    // Prefer to start search with any available category axis.\n    var directions = [xAxis, yAxis].filter(function (a) {\n      return a instanceof CategoryAxis;\n    }).map(function (a) {\n      return a.direction;\n    });\n    if (requireCategoryAxis && directions.length === 0) {\n      return;\n    }\n    // Default to X-axis unless we found a suitable category axis.\n    var _h = __read(directions, 1),\n      _j = _h[0],\n      primaryDirection = _j === void 0 ? ChartAxisDirection.X : _j;\n    var hitPoint = group.transformPoint(x, y);\n    var hitPointCoords = primaryDirection === ChartAxisDirection.X ? [hitPoint.x, hitPoint.y] : [hitPoint.y, hitPoint.x];\n    var minDistance = [Infinity, Infinity];\n    var closestDatum = undefined;\n    try {\n      for (var contextNodeData_3 = __values(contextNodeData), contextNodeData_3_1 = contextNodeData_3.next(); !contextNodeData_3_1.done; contextNodeData_3_1 = contextNodeData_3.next()) {\n        var context = contextNodeData_3_1.value;\n        try {\n          for (var _k = (e_8 = void 0, __values(context.nodeData)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var datum = _l.value;\n            var _m = datum.point,\n              _o = _m === void 0 ? {} : _m,\n              _p = _o.x,\n              datumX = _p === void 0 ? NaN : _p,\n              _q = _o.y,\n              datumY = _q === void 0 ? NaN : _q;\n            if (isNaN(datumX) || isNaN(datumY)) {\n              continue;\n            }\n            var isInRange = ((_c = xAxis) === null || _c === void 0 ? void 0 : _c.inRange(datumX)) && ((_d = yAxis) === null || _d === void 0 ? void 0 : _d.inRange(datumY));\n            if (!isInRange) {\n              continue;\n            }\n            var point_1 = primaryDirection === ChartAxisDirection.X ? [datumX, datumY] : [datumY, datumX];\n            // Compare distances from most significant dimension to least.\n            var newMinDistance = true;\n            for (var i = 0; i < point_1.length; i++) {\n              var dist = Math.abs(point_1[i] - hitPointCoords[i]);\n              if (dist > minDistance[i]) {\n                newMinDistance = false;\n                break;\n              }\n              if (dist < minDistance[i]) {\n                minDistance[i] = dist;\n                minDistance.fill(Infinity, i + 1, minDistance.length);\n              }\n            }\n            if (newMinDistance) {\n              closestDatum = datum;\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (_l && !_l.done && (_b = _k.return)) _b.call(_k);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (contextNodeData_3_1 && !contextNodeData_3_1.done && (_a = contextNodeData_3.return)) _a.call(contextNodeData_3);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n    if (closestDatum) {\n      var distance = Math.max(Math.sqrt(Math.pow(minDistance[0], 2) + Math.pow(minDistance[1], 2)) - (_f = (_e = closestDatum.point) === null || _e === void 0 ? void 0 : _e.size, _f !== null && _f !== void 0 ? _f : 0), 0);\n      return {\n        datum: closestDatum,\n        distance: distance\n      };\n    }\n  };\n  CartesianSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    if (this.seriesItemEnabled.size > 0) {\n      this.seriesItemEnabled.set(itemId, enabled);\n      this.nodeDataRefresh = true;\n    } else {\n      _super.prototype.toggleSeriesItem.call(this, itemId, enabled);\n    }\n  };\n  CartesianSeries.prototype.isEnabled = function () {\n    var e_9, _a;\n    if (this.seriesItemEnabled.size > 0) {\n      try {\n        for (var _b = __values(this.seriesItemEnabled), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var _d = __read(_c.value, 2),\n            enabled = _d[1];\n          if (enabled) {\n            return true;\n          }\n        }\n      } catch (e_9_1) {\n        e_9 = {\n          error: e_9_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_9) throw e_9.error;\n        }\n      }\n      return false;\n    }\n    return _super.prototype.isEnabled.call(this);\n  };\n  CartesianSeries.prototype.isPathOrSelectionDirty = function () {\n    // Override point to allow more sophisticated dirty selection detection.\n    return false;\n  };\n  CartesianSeries.prototype.getLabelData = function () {\n    return [];\n  };\n  CartesianSeries.prototype.updatePaths = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        // Override point for sub-classes.\n        opts.paths.forEach(function (p) {\n          return p.visible = false;\n        });\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updatePathNodes = function (_opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateHighlightSelectionItem = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var features, markersEnabled, item, highlightSelection, nodeData, markerSelection;\n      return __generator(this, function (_a) {\n        features = this.opts.features;\n        markersEnabled = features.includes('markers');\n        item = opts.item, highlightSelection = opts.highlightSelection;\n        nodeData = item ? [item] : [];\n        if (markersEnabled) {\n          markerSelection = highlightSelection;\n          return [2 /*return*/, this.updateMarkerSelection({\n            nodeData: nodeData,\n            markerSelection: markerSelection,\n            seriesIdx: -1\n          })];\n        } else {\n          return [2 /*return*/, this.updateDatumSelection({\n            nodeData: nodeData,\n            datumSelection: highlightSelection,\n            seriesIdx: -1\n          })];\n        }\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateHighlightSelectionLabel = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var item, highlightLabelSelection, labelData;\n      return __generator(this, function (_a) {\n        item = opts.item, highlightLabelSelection = opts.highlightLabelSelection;\n        labelData = item ? [item] : [];\n        return [2 /*return*/, this.updateLabelSelection({\n          labelData: labelData,\n          labelSelection: highlightLabelSelection,\n          seriesIdx: -1\n        })];\n      });\n    });\n  };\n  CartesianSeries.prototype.updateDatumSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        // Override point for sub-classes.\n        return [2 /*return*/, opts.datumSelection];\n      });\n    });\n  };\n  CartesianSeries.prototype.updateDatumNodes = function (_opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  CartesianSeries.prototype.updateMarkerSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        // Override point for sub-classes.\n        return [2 /*return*/, opts.markerSelection];\n      });\n    });\n  };\n  CartesianSeries.prototype.updateMarkerNodes = function (_opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  return CartesianSeries;\n}(Series);\nexport { CartesianSeries };\nvar CartesianSeriesMarker = /** @class */function (_super) {\n  __extends(CartesianSeriesMarker, _super);\n  function CartesianSeriesMarker() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.formatter = undefined;\n    return _this;\n  }\n  __decorate([ValidateAndChangeDetection({\n    validatePredicate: OPT_FUNCTION,\n    sceneChangeDetectionOpts: {\n      redraw: RedrawType.MAJOR\n    }\n  })], CartesianSeriesMarker.prototype, \"formatter\", void 0);\n  return CartesianSeriesMarker;\n}(SeriesMarker);\nexport { CartesianSeriesMarker };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","__read","o","m","ar","error","__spread","concat","__values","s","Series","SeriesNodeClickEvent","ChartAxisDirection","SeriesMarker","isContinuous","isDiscrete","Path","Selection","Group","RedrawType","CategoryAxis","Layers","OPT_FUNCTION","ValidateAndChangeDetection","jsonDiff","CartesianSeriesNodeClickEvent","_super","xKey","yKey","nativeEvent","datum","series","_this","CartesianSeries","opts","_a","useSeriesGroupLayer","pickModes","_contextNodeData","nodeDataDependencies","highlightSelection","select","highlightNode","selectAll","highlightLabelSelection","highlightLabel","subGroups","subGroupId","seriesItemEnabled","Map","directionKeys","X","Y","_b","pickGroupIncludes","_c","pathsPerSeries","_d","features","_e","pathsZIndexSubOrderOffset","_f","renderLayerPerSubSeries","get","slice","enumerable","configurable","destroy","splice","checkDomainXY","x","isContinuousX","isContinuousY","isValidDatum","undefined","checkRangeXY","xAxis","yAxis","isNaN","inRange","update","seriesRect","visible","_g","seriesHighlighted","anySeriesItemEnabled","newNodeDataDependencies","_h","chart","highlightedDatum","size","values","some","seriesRectWidth","width","seriesRectHeight","height","markNodeDataDirty","updateSelections","updateNodes","updateHighlightSelection","nodeDataRefresh","isPathOrSelectionDirty","createNodeData","updateSeriesGroups","all","map","updateSeriesGroupSelections","subGroup","seriesIdx","datumSelection","labelSelection","markerSelection","paths","contextData","nodeData","labelData","itemId","updatePaths","updateDatumSelection","updateLabelSelection","updateMarkerSelection","contextNodeData","seriesGroup","totalGroups","layer","subGroupZOffset","group","markerGroup","labelGroup","pickGroup","pathParentGroup","datumParentGroup","index","forEach","e_1","removeChild","includes","paths_1","paths_1_1","path","e_1_1","return","name","id","zIndex","SERIES_LAYER_ZINDEX","zIndexSubOrder","SERIES_LABEL_ZINDEX","appendChild","markersEnabled","highlightGroup","opacity","getOpacity","updateMarkerNodes","isHighlight","updateDatumNodes","updateLabelNodes","subGroupVisible","subGroupOpacity","paths_2","paths_2_1","e_2","parent","e_2_1","updatePathNodes","item","labelItem","itemId_1","contextNodeData_1","contextNodeData_1_1","_j","e_3","_k","_l","updateHighlightSelectionItem","isLabelEnabled","find","ld","e_3_1","updateHighlightSelectionLabel","pickNodeExactShape","point","e_4","markerGroupIncluded","match","pickNode","distance","e_4_1","pickNodeClosestDatum","e_5","e_6","hitPoint","transformPoint","minDistance","Infinity","closestDatum","contextNodeData_2","contextNodeData_2_1","context","_m","datumX","NaN","_o","datumY","isInRange","Math","max","pow","e_6_1","e_5_1","sqrt","pickNodeMainAxisFirst","requireCategoryAxis","e_7","e_8","directions","filter","a","direction","primaryDirection","hitPointCoords","contextNodeData_3","contextNodeData_3_1","_p","_q","point_1","newMinDistance","dist","abs","fill","e_8_1","e_7_1","toggleSeriesItem","enabled","set","isEnabled","e_9","e_9_1","getLabelData","_opts","CartesianSeriesMarker","formatter","validatePredicate","sceneChangeDetectionOpts","redraw","MAJOR"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/ag-charts-community/dist/esm/es5/chart/series/cartesian/cartesianSeries.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { Series, SeriesNodeClickEvent, } from '../series';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { SeriesMarker } from '../seriesMarker';\nimport { isContinuous, isDiscrete } from '../../../util/value';\nimport { Path } from '../../../scene/shape/path';\nimport { Selection } from '../../../scene/selection';\nimport { Group } from '../../../scene/group';\nimport { RedrawType } from '../../../scene/changeDetectable';\nimport { CategoryAxis } from '../../axis/categoryAxis';\nimport { Layers } from '../../layers';\nimport { OPT_FUNCTION, ValidateAndChangeDetection } from '../../../util/validation';\nimport { jsonDiff } from '../../../util/json';\nvar CartesianSeriesNodeClickEvent = /** @class */ (function (_super) {\n    __extends(CartesianSeriesNodeClickEvent, _super);\n    function CartesianSeriesNodeClickEvent(xKey, yKey, nativeEvent, datum, series) {\n        var _this = _super.call(this, nativeEvent, datum, series) || this;\n        _this.xKey = xKey;\n        _this.yKey = yKey;\n        return _this;\n    }\n    return CartesianSeriesNodeClickEvent;\n}(SeriesNodeClickEvent));\nexport { CartesianSeriesNodeClickEvent };\nvar CartesianSeries = /** @class */ (function (_super) {\n    __extends(CartesianSeries, _super);\n    function CartesianSeries(opts) {\n        var _a;\n        if (opts === void 0) { opts = {}; }\n        var _this = _super.call(this, { useSeriesGroupLayer: true, pickModes: opts.pickModes }) || this;\n        _this._contextNodeData = [];\n        _this.nodeDataDependencies = {};\n        _this.highlightSelection = Selection.select(_this.highlightNode).selectAll();\n        _this.highlightLabelSelection = Selection.select(_this.highlightLabel).selectAll();\n        _this.subGroups = [];\n        _this.subGroupId = 0;\n        /**\n         * The assumption is that the values will be reset (to `true`)\n         * in the {@link yKeys} setter.\n         */\n        _this.seriesItemEnabled = new Map();\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKey'],\n            _a);\n        var _b = opts.pickGroupIncludes, pickGroupIncludes = _b === void 0 ? ['datumNodes'] : _b, _c = opts.pathsPerSeries, pathsPerSeries = _c === void 0 ? 1 : _c, _d = opts.features, features = _d === void 0 ? [] : _d, _e = opts.pathsZIndexSubOrderOffset, pathsZIndexSubOrderOffset = _e === void 0 ? [] : _e, _f = opts.renderLayerPerSubSeries, renderLayerPerSubSeries = _f === void 0 ? true : _f;\n        _this.opts = { pickGroupIncludes: pickGroupIncludes, pathsPerSeries: pathsPerSeries, features: features, pathsZIndexSubOrderOffset: pathsZIndexSubOrderOffset, renderLayerPerSubSeries: renderLayerPerSubSeries };\n        return _this;\n    }\n    Object.defineProperty(CartesianSeries.prototype, \"contextNodeData\", {\n        get: function () {\n            var _a;\n            return (_a = this._contextNodeData) === null || _a === void 0 ? void 0 : _a.slice();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CartesianSeries.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._contextNodeData.splice(0, this._contextNodeData.length);\n        this.subGroups.splice(0, this.subGroups.length);\n    };\n    /**\n     * Note: we are passing `isContinuousX` and `isContinuousY` into this method because it will\n     *       typically be called inside a loop and this check only needs to happen once.\n     * @param x A domain value to be plotted along the x-axis.\n     * @param y A domain value to be plotted along the y-axis.\n     * @param isContinuousX Typically this will be the value of `xAxis.scale instanceof ContinuousScale`.\n     * @param isContinuousY Typically this will be the value of `yAxis.scale instanceof ContinuousScale`.\n     * @returns `[x, y]`, if both x and y are valid domain values for their respective axes/scales, or `undefined`.\n     */\n    CartesianSeries.prototype.checkDomainXY = function (x, y, isContinuousX, isContinuousY) {\n        var isValidDatum = ((isContinuousX && isContinuous(x)) || (!isContinuousX && isDiscrete(x))) &&\n            ((isContinuousY && isContinuous(y)) || (!isContinuousY && isDiscrete(y)));\n        return isValidDatum ? [x, y] : undefined;\n    };\n    /**\n     * Note: we are passing the xAxis and yAxis because the calling code is supposed to make sure\n     *       that series has both of them defined, and also to avoid one level of indirection,\n     *       e.g. `this.xAxis!.inRange(x)`, both of which are suboptimal in tight loops where this method is used.\n     * @param x A range value to be plotted along the x-axis.\n     * @param y A range value to be plotted along the y-axis.\n     * @param xAxis The series' x-axis.\n     * @param yAxis The series' y-axis.\n     * @returns\n     */\n    CartesianSeries.prototype.checkRangeXY = function (x, y, xAxis, yAxis) {\n        return !isNaN(x) && !isNaN(y) && xAxis.inRange(x) && yAxis.inRange(y);\n    };\n    CartesianSeries.prototype.update = function (_a) {\n        var seriesRect = _a.seriesRect;\n        var _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var _d, seriesItemEnabled, visible, _e, _f, _g, series, seriesHighlighted, anySeriesItemEnabled, newNodeDataDependencies;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        _d = this, seriesItemEnabled = _d.seriesItemEnabled, visible = _d.visible, _e = _d.chart, _f = (_e === void 0 ? {} : _e).highlightedDatum, _g = (_f === void 0 ? {} : _f).series, series = _g === void 0 ? undefined : _g;\n                        seriesHighlighted = series ? series === this : undefined;\n                        anySeriesItemEnabled = (visible && seriesItemEnabled.size === 0) || __spread(seriesItemEnabled.values()).some(function (v) { return v === true; });\n                        newNodeDataDependencies = {\n                            seriesRectWidth: (_b = seriesRect) === null || _b === void 0 ? void 0 : _b.width,\n                            seriesRectHeight: (_c = seriesRect) === null || _c === void 0 ? void 0 : _c.height,\n                        };\n                        if (jsonDiff(this.nodeDataDependencies, newNodeDataDependencies) != null) {\n                            this.nodeDataDependencies = newNodeDataDependencies;\n                            this.markNodeDataDirty();\n                        }\n                        return [4 /*yield*/, this.updateSelections(seriesHighlighted, anySeriesItemEnabled)];\n                    case 1:\n                        _h.sent();\n                        return [4 /*yield*/, this.updateNodes(seriesHighlighted, anySeriesItemEnabled)];\n                    case 2:\n                        _h.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CartesianSeries.prototype.updateSelections = function (seriesHighlighted, anySeriesItemEnabled) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.updateHighlightSelection(seriesHighlighted)];\n                    case 1:\n                        _b.sent();\n                        if (!anySeriesItemEnabled) {\n                            return [2 /*return*/];\n                        }\n                        if (!this.nodeDataRefresh && !this.isPathOrSelectionDirty()) {\n                            return [2 /*return*/];\n                        }\n                        if (!this.nodeDataRefresh) return [3 /*break*/, 4];\n                        this.nodeDataRefresh = false;\n                        _a = this;\n                        return [4 /*yield*/, this.createNodeData()];\n                    case 2:\n                        _a._contextNodeData = _b.sent();\n                        return [4 /*yield*/, this.updateSeriesGroups()];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4: return [4 /*yield*/, Promise.all(this.subGroups.map(function (g, i) { return _this.updateSeriesGroupSelections(g, i, seriesHighlighted); }))];\n                    case 5:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CartesianSeries.prototype.updateSeriesGroupSelections = function (subGroup, seriesIdx, seriesHighlighted) {\n        return __awaiter(this, void 0, void 0, function () {\n            var datumSelection, labelSelection, markerSelection, paths, contextData, nodeData, labelData, itemId, _a, _b, _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        datumSelection = subGroup.datumSelection, labelSelection = subGroup.labelSelection, markerSelection = subGroup.markerSelection, paths = subGroup.paths;\n                        contextData = this._contextNodeData[seriesIdx];\n                        nodeData = contextData.nodeData, labelData = contextData.labelData, itemId = contextData.itemId;\n                        return [4 /*yield*/, this.updatePaths({ seriesHighlighted: seriesHighlighted, itemId: itemId, contextData: contextData, paths: paths, seriesIdx: seriesIdx })];\n                    case 1:\n                        _d.sent();\n                        _a = subGroup;\n                        return [4 /*yield*/, this.updateDatumSelection({ nodeData: nodeData, datumSelection: datumSelection, seriesIdx: seriesIdx })];\n                    case 2:\n                        _a.datumSelection = _d.sent();\n                        _b = subGroup;\n                        return [4 /*yield*/, this.updateLabelSelection({ labelData: labelData, labelSelection: labelSelection, seriesIdx: seriesIdx })];\n                    case 3:\n                        _b.labelSelection = _d.sent();\n                        if (!markerSelection) return [3 /*break*/, 5];\n                        _c = subGroup;\n                        return [4 /*yield*/, this.updateMarkerSelection({\n                                nodeData: nodeData,\n                                markerSelection: markerSelection,\n                                seriesIdx: seriesIdx,\n                            })];\n                    case 4:\n                        _c.markerSelection = _d.sent();\n                        _d.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CartesianSeries.prototype.updateSeriesGroups = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var _b, contextNodeData, seriesGroup, subGroups, _c, pickGroupIncludes, pathsPerSeries, features, pathsZIndexSubOrderOffset, renderLayerPerSubSeries, totalGroups, layer, subGroupId, subGroupZOffset, group, markerGroup, labelGroup, pickGroup, pathParentGroup, datumParentGroup, paths, index;\n            return __generator(this, function (_d) {\n                _b = this, contextNodeData = _b._contextNodeData, seriesGroup = _b.seriesGroup, subGroups = _b.subGroups, _c = _b.opts, pickGroupIncludes = _c.pickGroupIncludes, pathsPerSeries = _c.pathsPerSeries, features = _c.features, pathsZIndexSubOrderOffset = _c.pathsZIndexSubOrderOffset, renderLayerPerSubSeries = _c.renderLayerPerSubSeries;\n                if (contextNodeData.length === subGroups.length) {\n                    return [2 /*return*/];\n                }\n                if (contextNodeData.length < subGroups.length) {\n                    subGroups.splice(contextNodeData.length).forEach(function (_a) {\n                        var e_1, _b;\n                        var group = _a.group, markerGroup = _a.markerGroup, paths = _a.paths;\n                        seriesGroup.removeChild(group);\n                        if (markerGroup) {\n                            seriesGroup.removeChild(markerGroup);\n                        }\n                        if (!pickGroupIncludes.includes('mainPath')) {\n                            try {\n                                for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n                                    var path = paths_1_1.value;\n                                    seriesGroup.removeChild(path);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (paths_1_1 && !paths_1_1.done && (_b = paths_1.return)) _b.call(paths_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                        }\n                    });\n                }\n                totalGroups = contextNodeData.length;\n                while (totalGroups > subGroups.length) {\n                    layer = renderLayerPerSubSeries;\n                    subGroupId = this.subGroupId++;\n                    subGroupZOffset = subGroupId;\n                    group = new Group({\n                        name: this.id + \"-series-sub\" + subGroupId,\n                        layer: layer,\n                        zIndex: Layers.SERIES_LAYER_ZINDEX,\n                        zIndexSubOrder: [this.id, subGroupZOffset],\n                    });\n                    markerGroup = features.includes('markers')\n                        ? new Group({\n                            name: this.id + \"-series-sub\" + this.subGroupId++ + \"-markers\",\n                            layer: layer,\n                            zIndex: Layers.SERIES_LAYER_ZINDEX,\n                            zIndexSubOrder: [this.id, 10000 + subGroupId],\n                        })\n                        : undefined;\n                    labelGroup = new Group({\n                        name: this.id + \"-series-sub\" + this.subGroupId++ + \"-labels\",\n                        layer: layer,\n                        zIndex: Layers.SERIES_LABEL_ZINDEX,\n                        zIndexSubOrder: [this.id, subGroupId],\n                    });\n                    pickGroup = new Group({\n                        name: this.id + \"-series-sub\" + this.subGroupId++ + \"-pickGroup\",\n                        zIndex: Layers.SERIES_LAYER_ZINDEX,\n                        zIndexSubOrder: [this.id, 10000 + subGroupId],\n                    });\n                    pathParentGroup = pickGroupIncludes.includes('mainPath')\n                        ? pickGroup\n                        : renderLayerPerSubSeries\n                            ? group\n                            : seriesGroup;\n                    datumParentGroup = pickGroupIncludes.includes('datumNodes') ? pickGroup : group;\n                    seriesGroup.appendChild(group);\n                    seriesGroup.appendChild(labelGroup);\n                    if (markerGroup) {\n                        seriesGroup.appendChild(markerGroup);\n                    }\n                    paths = [];\n                    for (index = 0; index < pathsPerSeries; index++) {\n                        paths[index] = new Path();\n                        paths[index].zIndex = Layers.SERIES_LAYER_ZINDEX;\n                        paths[index].zIndexSubOrder = [this.id, (_a = pathsZIndexSubOrderOffset[index], (_a !== null && _a !== void 0 ? _a : 0)) + subGroupZOffset];\n                        pathParentGroup.appendChild(paths[index]);\n                    }\n                    group.appendChild(pickGroup);\n                    subGroups.push({\n                        paths: paths,\n                        group: group,\n                        pickGroup: pickGroup,\n                        markerGroup: markerGroup,\n                        labelGroup: labelGroup,\n                        labelSelection: Selection.select(labelGroup).selectAll(),\n                        datumSelection: Selection.select(datumParentGroup).selectAll(),\n                        markerSelection: markerGroup ? Selection.select(markerGroup).selectAll() : undefined,\n                    });\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateNodes = function (seriesHighlighted, anySeriesItemEnabled) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var _b, highlightSelection, highlightLabelSelection, contextNodeData, seriesItemEnabled, features, markersEnabled, visible;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _b = this, highlightSelection = _b.highlightSelection, highlightLabelSelection = _b.highlightLabelSelection, contextNodeData = _b._contextNodeData, seriesItemEnabled = _b.seriesItemEnabled, features = _b.opts.features;\n                        markersEnabled = features.includes('markers');\n                        visible = this.visible && ((_a = this._contextNodeData) === null || _a === void 0 ? void 0 : _a.length) > 0 && anySeriesItemEnabled;\n                        this.group.visible = visible;\n                        this.seriesGroup.visible = visible;\n                        this.highlightGroup.visible = visible && !!seriesHighlighted;\n                        this.seriesGroup.opacity = this.getOpacity();\n                        if (!markersEnabled) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.updateMarkerNodes({\n                                markerSelection: highlightSelection,\n                                isHighlight: true,\n                                seriesIdx: -1,\n                            })];\n                    case 1:\n                        _c.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this.updateDatumNodes({ datumSelection: highlightSelection, isHighlight: true, seriesIdx: -1 })];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [4 /*yield*/, this.updateLabelNodes({ labelSelection: highlightLabelSelection, seriesIdx: -1 })];\n                    case 5:\n                        _c.sent();\n                        return [4 /*yield*/, Promise.all(this.subGroups.map(function (subGroup, seriesIdx) { return __awaiter(_this, void 0, void 0, function () {\n                                var group, markerGroup, datumSelection, labelSelection, markerSelection, paths, labelGroup, pickGroup, itemId, subGroupVisible, subGroupOpacity, paths_2, paths_2_1, path;\n                                var e_2, _a;\n                                var _b;\n                                return __generator(this, function (_c) {\n                                    switch (_c.label) {\n                                        case 0:\n                                            group = subGroup.group, markerGroup = subGroup.markerGroup, datumSelection = subGroup.datumSelection, labelSelection = subGroup.labelSelection, markerSelection = subGroup.markerSelection, paths = subGroup.paths, labelGroup = subGroup.labelGroup, pickGroup = subGroup.pickGroup;\n                                            itemId = contextNodeData[seriesIdx].itemId;\n                                            subGroupVisible = visible && (_b = seriesItemEnabled.get(itemId), (_b !== null && _b !== void 0 ? _b : true));\n                                            subGroupOpacity = this.getOpacity({ itemId: itemId });\n                                            group.opacity = subGroupOpacity;\n                                            group.visible = subGroupVisible;\n                                            pickGroup.visible = subGroupVisible;\n                                            labelGroup.visible = subGroupVisible;\n                                            if (markerGroup) {\n                                                markerGroup.opacity = subGroupOpacity;\n                                                markerGroup.zIndex = group.zIndex >= Layers.SERIES_LAYER_ZINDEX ? group.zIndex : group.zIndex + 1;\n                                                markerGroup.visible = subGroupVisible;\n                                            }\n                                            try {\n                                                for (paths_2 = __values(paths), paths_2_1 = paths_2.next(); !paths_2_1.done; paths_2_1 = paths_2.next()) {\n                                                    path = paths_2_1.value;\n                                                    if (path.parent !== group) {\n                                                        path.opacity = subGroupOpacity;\n                                                        path.visible = subGroupVisible;\n                                                    }\n                                                }\n                                            }\n                                            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                            finally {\n                                                try {\n                                                    if (paths_2_1 && !paths_2_1.done && (_a = paths_2.return)) _a.call(paths_2);\n                                                }\n                                                finally { if (e_2) throw e_2.error; }\n                                            }\n                                            if (!group.visible) {\n                                                return [2 /*return*/];\n                                            }\n                                            return [4 /*yield*/, this.updatePathNodes({ seriesHighlighted: seriesHighlighted, itemId: itemId, paths: paths, seriesIdx: seriesIdx })];\n                                        case 1:\n                                            _c.sent();\n                                            return [4 /*yield*/, this.updateDatumNodes({ datumSelection: datumSelection, isHighlight: false, seriesIdx: seriesIdx })];\n                                        case 2:\n                                            _c.sent();\n                                            return [4 /*yield*/, this.updateLabelNodes({ labelSelection: labelSelection, seriesIdx: seriesIdx })];\n                                        case 3:\n                                            _c.sent();\n                                            if (!(markersEnabled && markerSelection)) return [3 /*break*/, 5];\n                                            return [4 /*yield*/, this.updateMarkerNodes({ markerSelection: markerSelection, isHighlight: false, seriesIdx: seriesIdx })];\n                                        case 4:\n                                            _c.sent();\n                                            _c.label = 5;\n                                        case 5: return [2 /*return*/];\n                                    }\n                                });\n                            }); }))];\n                    case 6:\n                        _c.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CartesianSeries.prototype.updateHighlightSelection = function (seriesHighlighted) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, _b, _c, _d, _e, datum, _f, highlightedDatum, highlightSelection, highlightLabelSelection, contextNodeData, item, _g, labelItem, _h, itemId_1, contextNodeData_1, contextNodeData_1_1, labelData, _j;\n            var e_3, _k;\n            return __generator(this, function (_l) {\n                switch (_l.label) {\n                    case 0:\n                        _a = this, _b = _a.chart, _c = _b === void 0 ? {} : _b, _d = _c.highlightedDatum, _e = (_d === void 0 ? {} : _d).datum, datum = _e === void 0 ? undefined : _e, _f = _c.highlightedDatum, highlightedDatum = _f === void 0 ? undefined : _f, highlightSelection = _a.highlightSelection, highlightLabelSelection = _a.highlightLabelSelection, contextNodeData = _a._contextNodeData;\n                        item = seriesHighlighted && highlightedDatum && datum ? highlightedDatum : undefined;\n                        _g = this;\n                        return [4 /*yield*/, this.updateHighlightSelectionItem({ item: item, highlightSelection: highlightSelection })];\n                    case 1:\n                        _g.highlightSelection = _l.sent();\n                        if (this.isLabelEnabled() && item != null) {\n                            _h = item.itemId, itemId_1 = _h === void 0 ? undefined : _h;\n                            try {\n                                for (contextNodeData_1 = __values(contextNodeData), contextNodeData_1_1 = contextNodeData_1.next(); !contextNodeData_1_1.done; contextNodeData_1_1 = contextNodeData_1.next()) {\n                                    labelData = contextNodeData_1_1.value.labelData;\n                                    labelItem = labelData.find(function (ld) { return ld.datum === item.datum && ld.itemId === itemId_1; });\n                                    if (labelItem != null) {\n                                        break;\n                                    }\n                                }\n                            }\n                            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                            finally {\n                                try {\n                                    if (contextNodeData_1_1 && !contextNodeData_1_1.done && (_k = contextNodeData_1.return)) _k.call(contextNodeData_1);\n                                }\n                                finally { if (e_3) throw e_3.error; }\n                            }\n                        }\n                        _j = this;\n                        return [4 /*yield*/, this.updateHighlightSelectionLabel({\n                                item: labelItem,\n                                highlightLabelSelection: highlightLabelSelection,\n                            })];\n                    case 2:\n                        _j.highlightLabelSelection = _l.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CartesianSeries.prototype.pickNodeExactShape = function (point) {\n        var e_4, _a;\n        var _b;\n        var result = _super.prototype.pickNodeExactShape.call(this, point);\n        if (result) {\n            return result;\n        }\n        var x = point.x, y = point.y;\n        var pickGroupIncludes = this.opts.pickGroupIncludes;\n        var markerGroupIncluded = pickGroupIncludes.includes('markers');\n        try {\n            for (var _c = __values(this.subGroups), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = _d.value, pickGroup = _e.pickGroup, markerGroup = _e.markerGroup;\n                var match = pickGroup.pickNode(x, y);\n                if (!match && markerGroupIncluded) {\n                    match = (_b = markerGroup) === null || _b === void 0 ? void 0 : _b.pickNode(x, y);\n                }\n                if (match) {\n                    return { datum: match.datum, distance: 0 };\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    };\n    CartesianSeries.prototype.pickNodeClosestDatum = function (point) {\n        var e_5, _a, e_6, _b;\n        var _c, _d, _e, _f;\n        var x = point.x, y = point.y;\n        var _g = this, xAxis = _g.xAxis, yAxis = _g.yAxis, group = _g.group, contextNodeData = _g._contextNodeData;\n        var hitPoint = group.transformPoint(x, y);\n        var minDistance = Infinity;\n        var closestDatum;\n        try {\n            for (var contextNodeData_2 = __values(contextNodeData), contextNodeData_2_1 = contextNodeData_2.next(); !contextNodeData_2_1.done; contextNodeData_2_1 = contextNodeData_2.next()) {\n                var context = contextNodeData_2_1.value;\n                try {\n                    for (var _h = (e_6 = void 0, __values(context.nodeData)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                        var datum = _j.value;\n                        var _k = datum.point, _l = _k === void 0 ? {} : _k, _m = _l.x, datumX = _m === void 0 ? NaN : _m, _o = _l.y, datumY = _o === void 0 ? NaN : _o;\n                        if (isNaN(datumX) || isNaN(datumY)) {\n                            continue;\n                        }\n                        var isInRange = ((_c = xAxis) === null || _c === void 0 ? void 0 : _c.inRange(datumX)) && ((_d = yAxis) === null || _d === void 0 ? void 0 : _d.inRange(datumY));\n                        if (!isInRange) {\n                            continue;\n                        }\n                        // No need to use Math.sqrt() since x < y implies Math.sqrt(x) < Math.sqrt(y) for\n                        // values > 1\n                        var distance = Math.max(Math.pow((hitPoint.x - datumX), 2) + Math.pow((hitPoint.y - datumY), 2), 0);\n                        if (distance < minDistance) {\n                            minDistance = distance;\n                            closestDatum = datum;\n                        }\n                    }\n                }\n                catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                finally {\n                    try {\n                        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n                    }\n                    finally { if (e_6) throw e_6.error; }\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (contextNodeData_2_1 && !contextNodeData_2_1.done && (_a = contextNodeData_2.return)) _a.call(contextNodeData_2);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        if (closestDatum) {\n            var distance = Math.max(Math.sqrt(minDistance) - (_f = (_e = closestDatum.point) === null || _e === void 0 ? void 0 : _e.size, (_f !== null && _f !== void 0 ? _f : 0)), 0);\n            return { datum: closestDatum, distance: distance };\n        }\n    };\n    CartesianSeries.prototype.pickNodeMainAxisFirst = function (point, requireCategoryAxis) {\n        var e_7, _a, e_8, _b;\n        var _c, _d, _e, _f;\n        var x = point.x, y = point.y;\n        var _g = this, xAxis = _g.xAxis, yAxis = _g.yAxis, group = _g.group, contextNodeData = _g._contextNodeData;\n        // Prefer to start search with any available category axis.\n        var directions = [xAxis, yAxis]\n            .filter(function (a) { return a instanceof CategoryAxis; })\n            .map(function (a) { return a.direction; });\n        if (requireCategoryAxis && directions.length === 0) {\n            return;\n        }\n        // Default to X-axis unless we found a suitable category axis.\n        var _h = __read(directions, 1), _j = _h[0], primaryDirection = _j === void 0 ? ChartAxisDirection.X : _j;\n        var hitPoint = group.transformPoint(x, y);\n        var hitPointCoords = primaryDirection === ChartAxisDirection.X ? [hitPoint.x, hitPoint.y] : [hitPoint.y, hitPoint.x];\n        var minDistance = [Infinity, Infinity];\n        var closestDatum = undefined;\n        try {\n            for (var contextNodeData_3 = __values(contextNodeData), contextNodeData_3_1 = contextNodeData_3.next(); !contextNodeData_3_1.done; contextNodeData_3_1 = contextNodeData_3.next()) {\n                var context = contextNodeData_3_1.value;\n                try {\n                    for (var _k = (e_8 = void 0, __values(context.nodeData)), _l = _k.next(); !_l.done; _l = _k.next()) {\n                        var datum = _l.value;\n                        var _m = datum.point, _o = _m === void 0 ? {} : _m, _p = _o.x, datumX = _p === void 0 ? NaN : _p, _q = _o.y, datumY = _q === void 0 ? NaN : _q;\n                        if (isNaN(datumX) || isNaN(datumY)) {\n                            continue;\n                        }\n                        var isInRange = ((_c = xAxis) === null || _c === void 0 ? void 0 : _c.inRange(datumX)) && ((_d = yAxis) === null || _d === void 0 ? void 0 : _d.inRange(datumY));\n                        if (!isInRange) {\n                            continue;\n                        }\n                        var point_1 = primaryDirection === ChartAxisDirection.X ? [datumX, datumY] : [datumY, datumX];\n                        // Compare distances from most significant dimension to least.\n                        var newMinDistance = true;\n                        for (var i = 0; i < point_1.length; i++) {\n                            var dist = Math.abs(point_1[i] - hitPointCoords[i]);\n                            if (dist > minDistance[i]) {\n                                newMinDistance = false;\n                                break;\n                            }\n                            if (dist < minDistance[i]) {\n                                minDistance[i] = dist;\n                                minDistance.fill(Infinity, i + 1, minDistance.length);\n                            }\n                        }\n                        if (newMinDistance) {\n                            closestDatum = datum;\n                        }\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (_l && !_l.done && (_b = _k.return)) _b.call(_k);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (contextNodeData_3_1 && !contextNodeData_3_1.done && (_a = contextNodeData_3.return)) _a.call(contextNodeData_3);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n        if (closestDatum) {\n            var distance = Math.max(Math.sqrt(Math.pow(minDistance[0], 2) + Math.pow(minDistance[1], 2)) - (_f = (_e = closestDatum.point) === null || _e === void 0 ? void 0 : _e.size, (_f !== null && _f !== void 0 ? _f : 0)), 0);\n            return { datum: closestDatum, distance: distance };\n        }\n    };\n    CartesianSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        if (this.seriesItemEnabled.size > 0) {\n            this.seriesItemEnabled.set(itemId, enabled);\n            this.nodeDataRefresh = true;\n        }\n        else {\n            _super.prototype.toggleSeriesItem.call(this, itemId, enabled);\n        }\n    };\n    CartesianSeries.prototype.isEnabled = function () {\n        var e_9, _a;\n        if (this.seriesItemEnabled.size > 0) {\n            try {\n                for (var _b = __values(this.seriesItemEnabled), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var _d = __read(_c.value, 2), enabled = _d[1];\n                    if (enabled) {\n                        return true;\n                    }\n                }\n            }\n            catch (e_9_1) { e_9 = { error: e_9_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_9) throw e_9.error; }\n            }\n            return false;\n        }\n        return _super.prototype.isEnabled.call(this);\n    };\n    CartesianSeries.prototype.isPathOrSelectionDirty = function () {\n        // Override point to allow more sophisticated dirty selection detection.\n        return false;\n    };\n    CartesianSeries.prototype.getLabelData = function () {\n        return [];\n    };\n    CartesianSeries.prototype.updatePaths = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // Override point for sub-classes.\n                opts.paths.forEach(function (p) { return (p.visible = false); });\n                return [2 /*return*/];\n            });\n        });\n    };\n    CartesianSeries.prototype.updatePathNodes = function (_opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateHighlightSelectionItem = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var features, markersEnabled, item, highlightSelection, nodeData, markerSelection;\n            return __generator(this, function (_a) {\n                features = this.opts.features;\n                markersEnabled = features.includes('markers');\n                item = opts.item, highlightSelection = opts.highlightSelection;\n                nodeData = item ? [item] : [];\n                if (markersEnabled) {\n                    markerSelection = highlightSelection;\n                    return [2 /*return*/, this.updateMarkerSelection({ nodeData: nodeData, markerSelection: markerSelection, seriesIdx: -1 })];\n                }\n                else {\n                    return [2 /*return*/, this.updateDatumSelection({ nodeData: nodeData, datumSelection: highlightSelection, seriesIdx: -1 })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateHighlightSelectionLabel = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var item, highlightLabelSelection, labelData;\n            return __generator(this, function (_a) {\n                item = opts.item, highlightLabelSelection = opts.highlightLabelSelection;\n                labelData = item ? [item] : [];\n                return [2 /*return*/, this.updateLabelSelection({ labelData: labelData, labelSelection: highlightLabelSelection, seriesIdx: -1 })];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateDatumSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // Override point for sub-classes.\n                return [2 /*return*/, opts.datumSelection];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateDatumNodes = function (_opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateMarkerSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // Override point for sub-classes.\n                return [2 /*return*/, opts.markerSelection];\n            });\n        });\n    };\n    CartesianSeries.prototype.updateMarkerNodes = function (_opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    return CartesianSeries;\n}(Series));\nexport { CartesianSeries };\nvar CartesianSeriesMarker = /** @class */ (function (_super) {\n    __extends(CartesianSeriesMarker, _super);\n    function CartesianSeriesMarker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.formatter = undefined;\n        return _this;\n    }\n    __decorate([\n        ValidateAndChangeDetection({\n            validatePredicate: OPT_FUNCTION,\n            sceneChangeDetectionOpts: { redraw: RedrawType.MAJOR },\n        })\n    ], CartesianSeriesMarker.prototype, \"formatter\", void 0);\n    return CartesianSeriesMarker;\n}(SeriesMarker));\nexport { CartesianSeriesMarker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}