{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nexports.__esModule = true;\nvar graphic_1 = require(\"../util/graphic\");\nvar innerStore_1 = require(\"../util/innerStore\");\nvar number_1 = require(\"../util/number\");\nvar Transformable_1 = require(\"zrender/lib/core/Transformable\");\nvar labelGuideHelper_1 = require(\"./labelGuideHelper\");\nvar model_1 = require(\"../util/model\");\nvar util_1 = require(\"zrender/lib/core/util\");\nvar labelLayoutHelper_1 = require(\"./labelLayoutHelper\");\nvar labelStyle_1 = require(\"./labelStyle\");\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n    return newPoints;\n  }\n}\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable_1[\"default\"]();\nvar labelLayoutInnerStore = model_1.makeInner();\nvar labelLineAnimationStore = model_1.makeInner();\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\nvar LabelManager = function () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {};\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    graphic_1.BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n    var host = label.__hostTarget;\n    var hostRect;\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      graphic_1.BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n    var labelGuide = hostRect && host.getTextGuideLine();\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n    this._chartViewList.push(chartView);\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    if (!(util_1.isFunction(layoutOption) || util_1.keys(layoutOption).length)) {\n      return;\n    }\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true;\n      }\n      var textEl = child.getTextContent();\n      var ecData = innerStore_1.getECData(child);\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        labelGuideHelper_1.updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0;\n      if (typeof labelItem.layoutOption === 'function') {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180;\n      if (hostEl) {\n        hostEl.setTextConfig({\n          local: false,\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n      var needsUpdateLabelLine = false;\n      if (layoutOption.x != null) {\n        label.x = number_1.parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0);\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n      if (layoutOption.y != null) {\n        label.y = number_1.parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0);\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          });\n          needsUpdateLabelLine = false;\n        }\n      }\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = labelLayoutHelper_1.prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = util_1.filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = util_1.filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    labelLayoutHelper_1.shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    labelLayoutHelper_1.shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = util_1.filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    labelLayoutHelper_1.hideOverlap(labelsNeedsHideOverlap);\n  };\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n    util_1.each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore) {\n          return true;\n        }\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var ecData = innerStore_1.getECData(el);\n    var dataIndex = ecData.dataIndex;\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      var visualType = data.getVisual('drawType');\n      defaultStyle.stroke = visualStyle[visualType];\n      var labelLineModel = itemModel.getModel('labelLine');\n      labelGuideHelper_1.setLabelLineStyle(el, labelGuideHelper_1.getLabelLineStatesModels(itemModel), defaultStyle);\n      labelGuideHelper_1.updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine();\n    if (textEl && !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !graphic_1.isElementRemoved(el)) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = innerStore_1.getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n      if (!oldLayout) {\n        textEl.attr(newProps);\n        if (!labelStyle_1.labelInner(textEl).valueAnimation) {\n          var oldOpacity = util_1.retrieve2(textEl.style.opacity, 1);\n          textEl.style.opacity = 0;\n          graphic_1.initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout);\n        var prevStates = el.prevStates;\n        if (prevStates) {\n          if (util_1.indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n          if (util_1.indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n        graphic_1.updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n      layoutStore.oldLayout = newProps;\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n      labelStyle_1.animateLabelValue(textEl, dataIndex, data, seriesModel);\n    }\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        graphic_1.initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        graphic_1.updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n  return LabelManager;\n}();\nexports[\"default\"] = LabelManager;","map":{"version":3,"names":["exports","__esModule","graphic_1","require","innerStore_1","number_1","Transformable_1","labelGuideHelper_1","model_1","util_1","labelLayoutHelper_1","labelStyle_1","cloneArr","points","newPoints","i","length","push","slice","prepareLayoutCallbackParams","labelItem","hostEl","label","labelLine","getTextGuideLine","dataIndex","dataType","seriesIndex","seriesModel","text","style","rect","hostRect","labelRect","align","verticalAlign","labelLinePoints","shape","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","makeInner","labelLineAnimationStore","extendWithKeys","target","source","keys","key","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","prototype","clearLabels","_addLabel","layoutOption","labelStyle","__hostTarget","textConfig","labelTransform","getComputedTransform","getBoundingRect","plain","BoundingRect","applyTransform","setLocalTransform","x","y","rotation","originX","originY","scaleX","scaleY","host","transform","labelGuide","computedLayoutOption","priority","width","height","defaultAttr","ignore","labelGuideIgnore","fontSize","cursor","attachedPos","position","attachedRot","addLabelsOfSeries","chartView","_this","__model","get","isFunction","group","traverse","child","textEl","getTextContent","ecData","getECData","disableLabelLayout","updateLayoutConfig","api","getWidth","getHeight","createDragHandler","el","labelLineModel","updateLabelLinePoints","defaultLabelAttr","degreeToRadian","Math","PI","setTextConfig","local","rotate","offset","dx","dy","needsUpdateLabelLine","parsePercent","setStyle","guideLine","setShape","labelLayoutStore","k","draggable","hostModel","data","getData","getItemModel","on","getModel","off","layout","labelList","prepareLayoutList","labelsNeedsAdjustOnX","filter","item","moveOverlap","labelsNeedsAdjustOnY","shiftLayoutOnX","shiftLayoutOnY","labelsNeedsHideOverlap","hideOverlap","processLabelsOverall","each","ignoreLabelLineUpdate","animationEnabled","isAnimationEnabled","_updateLabelLine","_animateLabels","itemModel","defaultStyle","visualStyle","getItemVisual","visualType","getVisual","stroke","setLabelLineStyle","getLabelLineStatesModels","invisible","disableLabelAnimation","isElementRemoved","layoutStore","oldLayout","newProps","attr","labelInner","valueAnimation","oldOpacity","retrieve2","opacity","initProps","prevStates","indexOf","oldLayoutSelect","oldLayoutEmphasis","updateProps","states","select","layoutSelect","emphasis","layoutEmphasis","animateLabelValue","newLayout","strokePercent"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/echarts/lib/label/LabelManager.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n\"use strict\";\n\nexports.__esModule = true;\n\nvar graphic_1 = require(\"../util/graphic\");\n\nvar innerStore_1 = require(\"../util/innerStore\");\n\nvar number_1 = require(\"../util/number\");\n\nvar Transformable_1 = require(\"zrender/lib/core/Transformable\");\n\nvar labelGuideHelper_1 = require(\"./labelGuideHelper\");\n\nvar model_1 = require(\"../util/model\");\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar labelLayoutHelper_1 = require(\"./labelLayoutHelper\");\n\nvar labelStyle_1 = require(\"./labelStyle\");\n\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n\n    return newPoints;\n  }\n}\n\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\n\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable_1[\"default\"]();\nvar labelLayoutInnerStore = model_1.makeInner();\nvar labelLineAnimationStore = model_1.makeInner();\n\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\n\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\nvar LabelManager = function () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {};\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    graphic_1.BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n\n    var host = label.__hostTarget;\n    var hostRect;\n\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      graphic_1.BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n\n    var labelGuide = hostRect && host.getTextGuideLine();\n\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n\n    this._chartViewList.push(chartView);\n\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n\n    if (!(util_1.isFunction(layoutOption) || util_1.keys(layoutOption).length)) {\n      return;\n    }\n\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true;\n      }\n\n      var textEl = child.getTextContent();\n      var ecData = innerStore_1.getECData(child);\n\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        labelGuideHelper_1.updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0;\n\n      if (typeof labelItem.layoutOption === 'function') {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180;\n\n      if (hostEl) {\n        hostEl.setTextConfig({\n          local: false,\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n\n      var needsUpdateLabelLine = false;\n\n      if (layoutOption.x != null) {\n        label.x = number_1.parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0);\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n\n      if (layoutOption.y != null) {\n        label.y = number_1.parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0);\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          });\n          needsUpdateLabelLine = false;\n        }\n      }\n\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = labelLayoutHelper_1.prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = util_1.filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = util_1.filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    labelLayoutHelper_1.shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    labelLayoutHelper_1.shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = util_1.filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    labelLayoutHelper_1.hideOverlap(labelsNeedsHideOverlap);\n  };\n\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n\n    util_1.each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore) {\n          return true;\n        }\n\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var ecData = innerStore_1.getECData(el);\n    var dataIndex = ecData.dataIndex;\n\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      var visualType = data.getVisual('drawType');\n      defaultStyle.stroke = visualStyle[visualType];\n      var labelLineModel = itemModel.getModel('labelLine');\n      labelGuideHelper_1.setLabelLineStyle(el, labelGuideHelper_1.getLabelLineStatesModels(itemModel), defaultStyle);\n      labelGuideHelper_1.updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine();\n\n    if (textEl && !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !graphic_1.isElementRemoved(el)) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = innerStore_1.getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n\n      if (!oldLayout) {\n        textEl.attr(newProps);\n\n        if (!labelStyle_1.labelInner(textEl).valueAnimation) {\n          var oldOpacity = util_1.retrieve2(textEl.style.opacity, 1);\n          textEl.style.opacity = 0;\n          graphic_1.initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout);\n        var prevStates = el.prevStates;\n\n        if (prevStates) {\n          if (util_1.indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n\n          if (util_1.indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n\n        graphic_1.updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n\n      layoutStore.oldLayout = newProps;\n\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n\n      labelStyle_1.animateLabelValue(textEl, dataIndex, data, seriesModel);\n    }\n\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        graphic_1.initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        graphic_1.updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n\n  return LabelManager;\n}();\n\nexports[\"default\"] = LabelManager;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}