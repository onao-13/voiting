{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nimport { Group } from '../../../scene/group';\nimport { Line } from '../../../scene/shape/line';\nimport { Text } from '../../../scene/shape/text';\nimport { Circle } from '../../marker/circle';\nimport { Selection } from '../../../scene/selection';\nimport { LinearScale } from '../../../scale/linearScale';\nimport { clamper } from '../../../scale/continuousScale';\nimport { Sector } from '../../../scene/shape/sector';\nimport { HighlightStyle, SeriesTooltip, SeriesNodeClickEvent } from './../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { normalizeAngle180, toRadians } from '../../../util/angle';\nimport { doOnce } from '../../../util/function';\nimport { toFixed, mod } from '../../../util/number';\nimport { Caption } from '../../../caption';\nimport { Observable } from '../../../util/observable';\nimport { PolarSeries } from './polarSeries';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { DeprecatedAndRenamedTo } from '../../../util/deprecation';\nimport { BOOLEAN, NUMBER, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, OPT_STRING, STRING, COLOR_STRING_ARRAY, Validate, COLOR_STRING } from '../../../util/validation';\nvar PieSeriesNodeClickEvent = /** @class */function (_super) {\n  __extends(PieSeriesNodeClickEvent, _super);\n  function PieSeriesNodeClickEvent(angleKey, calloutLabelKey, sectorLabelKey, radiusKey, nativeEvent, datum, series) {\n    var _this = _super.call(this, nativeEvent, datum, series) || this;\n    _this.angleKey = angleKey;\n    _this.calloutLabelKey = calloutLabelKey;\n    _this.sectorLabelKey = sectorLabelKey;\n    _this.radiusKey = radiusKey;\n    return _this;\n  }\n  __decorate([DeprecatedAndRenamedTo('calloutLabelKey')], PieSeriesNodeClickEvent.prototype, \"labelKey\", void 0);\n  return PieSeriesNodeClickEvent;\n}(SeriesNodeClickEvent);\nexport { PieSeriesNodeClickEvent };\nvar PieHighlightStyle = /** @class */function (_super) {\n  __extends(PieHighlightStyle, _super);\n  function PieHighlightStyle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Validate(OPT_NUMBER(0))], PieHighlightStyle.prototype, \"centerOffset\", void 0);\n  return PieHighlightStyle;\n}(HighlightStyle);\nvar PieNodeTag;\n(function (PieNodeTag) {\n  PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n  PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n  PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\nvar PieSeriesCalloutLabel = /** @class */function (_super) {\n  __extends(PieSeriesCalloutLabel, _super);\n  function PieSeriesCalloutLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.offset = 3; // from the callout line\n    _this.minAngle = 20; // in degrees\n    _this.formatter = undefined;\n    return _this;\n  }\n  __decorate([Validate(NUMBER(0))], PieSeriesCalloutLabel.prototype, \"offset\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeriesCalloutLabel.prototype, \"minAngle\", void 0);\n  __decorate([Validate(OPT_FUNCTION)], PieSeriesCalloutLabel.prototype, \"formatter\", void 0);\n  return PieSeriesCalloutLabel;\n}(Label);\nvar PieSeriesSectorLabel = /** @class */function (_super) {\n  __extends(PieSeriesSectorLabel, _super);\n  function PieSeriesSectorLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.positionOffset = 0;\n    _this.positionRatio = 0.5;\n    _this.formatter = undefined;\n    return _this;\n  }\n  __decorate([Validate(NUMBER())], PieSeriesSectorLabel.prototype, \"positionOffset\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], PieSeriesSectorLabel.prototype, \"positionRatio\", void 0);\n  __decorate([Validate(OPT_FUNCTION)], PieSeriesSectorLabel.prototype, \"formatter\", void 0);\n  return PieSeriesSectorLabel;\n}(Label);\nvar PieSeriesCalloutLine = /** @class */function (_super) {\n  __extends(PieSeriesCalloutLine, _super);\n  function PieSeriesCalloutLine() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.colors = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.length = 10;\n    _this.strokeWidth = 1;\n    return _this;\n  }\n  __decorate([Validate(COLOR_STRING_ARRAY)], PieSeriesCalloutLine.prototype, \"colors\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeriesCalloutLine.prototype, \"length\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeriesCalloutLine.prototype, \"strokeWidth\", void 0);\n  return PieSeriesCalloutLine;\n}(Observable);\nvar PieSeriesTooltip = /** @class */function (_super) {\n  __extends(PieSeriesTooltip, _super);\n  function PieSeriesTooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.renderer = undefined;\n    return _this;\n  }\n  __decorate([Validate(OPT_FUNCTION)], PieSeriesTooltip.prototype, \"renderer\", void 0);\n  return PieSeriesTooltip;\n}(SeriesTooltip);\nexport { PieSeriesTooltip };\nvar PieTitle = /** @class */function (_super) {\n  __extends(PieTitle, _super);\n  function PieTitle() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.showInLegend = false;\n    return _this;\n  }\n  __decorate([Validate(BOOLEAN)], PieTitle.prototype, \"showInLegend\", void 0);\n  return PieTitle;\n}(Caption);\nexport { PieTitle };\nvar DoughnutInnerLabel = /** @class */function (_super) {\n  __extends(DoughnutInnerLabel, _super);\n  function DoughnutInnerLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.text = '';\n    _this.margin = 2;\n    return _this;\n  }\n  __decorate([Validate(STRING)], DoughnutInnerLabel.prototype, \"text\", void 0);\n  __decorate([Validate(NUMBER())], DoughnutInnerLabel.prototype, \"margin\", void 0);\n  return DoughnutInnerLabel;\n}(Label);\nexport { DoughnutInnerLabel };\nvar DoughnutInnerCircle = /** @class */function () {\n  function DoughnutInnerCircle() {\n    this.fill = 'transparent';\n    this.fillOpacity = 1;\n  }\n  __decorate([Validate(COLOR_STRING)], DoughnutInnerCircle.prototype, \"fill\", void 0);\n  __decorate([Validate(OPT_NUMBER(0, 1))], DoughnutInnerCircle.prototype, \"fillOpacity\", void 0);\n  return DoughnutInnerCircle;\n}();\nexport { DoughnutInnerCircle };\nfunction isPointInArc(x, y, sector) {\n  var radius = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n  var innerRadius = sector.innerRadius,\n    outerRadius = sector.outerRadius;\n  if (radius < Math.min(innerRadius, outerRadius) || radius > Math.max(innerRadius, outerRadius)) {\n    return false;\n  }\n  // Start and End angles are expected to be [-90, 270]\n  // while Math.atan2 returns [-180, 180]\n  var angle = Math.atan2(y, x);\n  if (angle < -Math.PI / 2) {\n    angle += 2 * Math.PI;\n  }\n  // Start is actually bigger than End clock-wise\n  var startAngle = sector.startAngle,\n    endAngle = sector.endAngle;\n  if (endAngle === -Math.PI / 2) {\n    return angle < startAngle;\n  }\n  if (startAngle === 3 * Math.PI / 2) {\n    return angle > endAngle;\n  }\n  return angle >= endAngle && angle <= startAngle;\n}\nvar PieSeries = /** @class */function (_super) {\n  __extends(PieSeries, _super);\n  function PieSeries() {\n    var _this = _super.call(this, {\n      useLabelLayer: true\n    }) || this;\n    _this.radiusScale = new LinearScale();\n    _this.groupSelection = Selection.select(_this.pickGroup).selectAll();\n    _this.highlightSelection = Selection.select(_this.highlightGroup).selectAll();\n    /**\n     * The processed data that gets visualized.\n     */\n    _this.groupSelectionData = [];\n    _this.sectorFormatData = [];\n    _this.angleScale = function () {\n      var scale = new LinearScale();\n      // Each sector is a ratio of the whole, where all ratios add up to 1.\n      scale.domain = [0, 1];\n      // Add 90 deg to start the first pie at 12 o'clock.\n      scale.range = [-Math.PI, Math.PI].map(function (angle) {\n        return angle + Math.PI / 2;\n      });\n      return scale;\n    }();\n    // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n    _this.seriesItemEnabled = [];\n    _this.calloutLabel = new PieSeriesCalloutLabel();\n    _this.label = _this.calloutLabel;\n    _this.sectorLabel = new PieSeriesSectorLabel();\n    _this.calloutLine = new PieSeriesCalloutLine();\n    _this.callout = _this.calloutLine;\n    _this.tooltip = new PieSeriesTooltip();\n    /**\n     * The key of the numeric field to use to determine the angle (for example,\n     * a pie sector angle).\n     */\n    _this.angleKey = '';\n    _this.angleName = '';\n    _this.innerLabels = [];\n    /**\n     * The key of the numeric field to use to determine the radii of pie sectors.\n     * The largest value will correspond to the full radius and smaller values to\n     * proportionally smaller radii.\n     */\n    _this.radiusKey = undefined;\n    _this.radiusName = undefined;\n    _this.radiusMin = undefined;\n    _this.radiusMax = undefined;\n    _this.calloutLabelKey = undefined;\n    _this.calloutLabelName = undefined;\n    _this.labelKey = undefined;\n    _this.labelName = undefined;\n    _this.sectorLabelKey = undefined;\n    _this.sectorLabelName = undefined;\n    _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = [0];\n    _this.lineDashOffset = 0;\n    _this.formatter = undefined;\n    /**\n     * The series rotation in degrees.\n     */\n    _this.rotation = 0;\n    _this.outerRadiusOffset = 0;\n    _this.outerRadiusRatio = 1;\n    _this.innerRadiusOffset = 0;\n    _this.innerRadiusRatio = 1;\n    _this.strokeWidth = 1;\n    _this.shadow = undefined;\n    _this.highlightStyle = new PieHighlightStyle();\n    _this.datumSectorRefs = new WeakMap();\n    var pieLabels = new Group();\n    var pieSectorLabels = new Group();\n    var innerLabels = new Group();\n    _this.labelGroup.append(pieLabels);\n    _this.labelGroup.append(pieSectorLabels);\n    _this.labelGroup.append(innerLabels);\n    _this.calloutSelection = Selection.select(pieLabels).selectAll();\n    _this.sectorLabelSelection = Selection.select(pieSectorLabels).selectAll();\n    _this.innerLabelsSelection = Selection.select(innerLabels).selectAll();\n    return _this;\n  }\n  Object.defineProperty(PieSeries.prototype, \"title\", {\n    get: function () {\n      return this._title;\n    },\n    set: function (value) {\n      var _a, _b;\n      var oldTitle = this._title;\n      if (oldTitle !== value) {\n        if (oldTitle) {\n          (_a = this.labelGroup) === null || _a === void 0 ? void 0 : _a.removeChild(oldTitle.node);\n        }\n        if (value) {\n          value.node.textBaseline = 'bottom';\n          (_b = this.labelGroup) === null || _b === void 0 ? void 0 : _b.appendChild(value.node);\n        }\n        this._title = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"data\", {\n    get: function () {\n      return this._data;\n    },\n    set: function (input) {\n      this._data = input;\n      this.processSeriesItemEnabled();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"innerCircle\", {\n    get: function () {\n      return this._innerCircleConfig;\n    },\n    set: function (value) {\n      var _a;\n      var oldCircleCfg = this._innerCircleConfig;\n      if (oldCircleCfg !== value) {\n        var oldNode = this._innerCircleNode;\n        var circle = void 0;\n        if (oldNode) {\n          this.backgroundGroup.removeChild(oldNode);\n        }\n        if (value) {\n          circle = new Circle();\n          circle.fill = value.fill;\n          circle.fillOpacity = (_a = value.fillOpacity, _a !== null && _a !== void 0 ? _a : 1);\n          this.backgroundGroup.appendChild(circle);\n        }\n        this._innerCircleConfig = value;\n        this._innerCircleNode = circle;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PieSeries.prototype.visibleChanged = function () {\n    this.processSeriesItemEnabled();\n  };\n  PieSeries.prototype.processSeriesItemEnabled = function () {\n    var _a;\n    var _b = this,\n      data = _b.data,\n      visible = _b.visible;\n    this.seriesItemEnabled = ((_a = data) === null || _a === void 0 ? void 0 : _a.map(function () {\n      return visible;\n    })) || [];\n  };\n  PieSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n    this.calloutLine.colors = strokes;\n  };\n  PieSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.angleScale.domain;\n    } else {\n      return this.radiusScale.domain;\n    }\n  };\n  PieSeries.prototype.processData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, angleKey, radiusKey, seriesItemEnabled, angleScale, groupSelectionData, sectorFormatData, calloutLabel, sectorLabel, seriesId, data, angleData, angleDataTotal, angleDataRatios, labelFormatter, labelKey, sectorLabelKey, labelData, sectorLabelData, radiusData, getLabelFormatterParams, showValueDeprecationWarning_1, sectorLabelFormatter, _b, radiusMin, radiusMax, radii, min_1, max, delta_1, rotation, halfPi, datumIndex, quadrantTextOpts, end;\n      var _this = this;\n      return __generator(this, function (_c) {\n        _a = this, angleKey = _a.angleKey, radiusKey = _a.radiusKey, seriesItemEnabled = _a.seriesItemEnabled, angleScale = _a.angleScale, groupSelectionData = _a.groupSelectionData, sectorFormatData = _a.sectorFormatData, calloutLabel = _a.calloutLabel, sectorLabel = _a.sectorLabel, seriesId = _a.id;\n        data = angleKey && this.data ? this.data : [];\n        angleData = data.map(function (datum, index) {\n          return seriesItemEnabled[index] && Math.abs(+datum[angleKey]) || 0;\n        });\n        angleDataTotal = angleData.reduce(function (a, b) {\n          return a + b;\n        }, 0);\n        angleDataRatios = function () {\n          var sum = 0;\n          return angleData.map(function (datum) {\n            return sum += datum / angleDataTotal;\n          });\n        }();\n        labelFormatter = calloutLabel.formatter;\n        labelKey = calloutLabel.enabled ? this.calloutLabelKey : undefined;\n        sectorLabelKey = sectorLabel.enabled ? this.sectorLabelKey : undefined;\n        labelData = [];\n        sectorLabelData = [];\n        radiusData = [];\n        getLabelFormatterParams = function (datum) {\n          return {\n            datum: datum,\n            angleKey: angleKey,\n            angleValue: datum[angleKey],\n            angleName: _this.angleName,\n            radiusKey: radiusKey,\n            radiusValue: radiusKey ? datum[radiusKey] : undefined,\n            radiusName: _this.radiusName,\n            labelKey: labelKey,\n            labelValue: labelKey ? datum[labelKey] : undefined,\n            labelName: _this.calloutLabelName,\n            calloutLabelKey: labelKey,\n            calloutLabelValue: labelKey ? datum[labelKey] : undefined,\n            calloutLabelName: _this.calloutLabelName,\n            sectorLabelKey: sectorLabelKey,\n            sectorLabelValue: sectorLabelKey ? datum[sectorLabelKey] : undefined,\n            sectorLabelName: _this.sectorLabelName,\n            seriesId: seriesId\n          };\n        };\n        if (labelKey) {\n          if (labelFormatter) {\n            showValueDeprecationWarning_1 = function () {\n              return doOnce(function () {\n                return console.warn('AG Charts - the use of { value } in the pie chart label formatter function is deprecated. Please use { datum, labelKey, ... } instead.');\n              }, 'deprecated use of \"value\" property in pie chart label formatter');\n            };\n            labelData = data.map(function (datum) {\n              var deprecatedValue = datum[labelKey];\n              var formatterParams = __assign(__assign({}, getLabelFormatterParams(datum)), {\n                get value() {\n                  showValueDeprecationWarning_1();\n                  return deprecatedValue;\n                },\n                set value(v) {\n                  showValueDeprecationWarning_1();\n                  deprecatedValue = v;\n                }\n              });\n              return labelFormatter(formatterParams);\n            });\n          } else {\n            labelData = data.map(function (datum) {\n              return String(datum[labelKey]);\n            });\n          }\n        }\n        sectorLabelFormatter = sectorLabel.formatter;\n        if (sectorLabelKey) {\n          if (sectorLabelFormatter) {\n            sectorLabelData = data.map(function (datum) {\n              var formatterParams = getLabelFormatterParams(datum);\n              return sectorLabelFormatter(formatterParams);\n            });\n          } else {\n            sectorLabelData = data.map(function (datum) {\n              return String(datum[sectorLabelKey]);\n            });\n          }\n        }\n        if (radiusKey) {\n          _b = this, radiusMin = _b.radiusMin, radiusMax = _b.radiusMax;\n          radii = data.map(function (datum) {\n            return Math.abs(datum[radiusKey]);\n          });\n          min_1 = radiusMin !== null && radiusMin !== void 0 ? radiusMin : 0;\n          max = radiusMax ? radiusMax : Math.max.apply(Math, __spread(radii));\n          delta_1 = max - min_1;\n          radiusData = radii.map(function (value) {\n            return delta_1 ? (value - min_1) / delta_1 : 1;\n          });\n        }\n        groupSelectionData.length = 0;\n        sectorFormatData.length = 0;\n        sectorFormatData.push.apply(sectorFormatData, __spread(data.map(function (datum, datumIdx) {\n          return _this.getSectorFormat(datum, datumIdx, datumIdx, false);\n        })));\n        rotation = toRadians(this.rotation);\n        halfPi = Math.PI / 2;\n        datumIndex = 0;\n        quadrantTextOpts = [{\n          textAlign: 'center',\n          textBaseline: 'bottom'\n        }, {\n          textAlign: 'left',\n          textBaseline: 'middle'\n        }, {\n          textAlign: 'center',\n          textBaseline: 'hanging'\n        }, {\n          textAlign: 'right',\n          textBaseline: 'middle'\n        }];\n        end = 0;\n        angleDataRatios.forEach(function (start) {\n          if (isNaN(start)) {\n            return;\n          } // No sectors displayed - nothing to do.\n          var radius = radiusKey ? radiusData[datumIndex] : 1;\n          var startAngle = angleScale.convert(start) + rotation;\n          var endAngle = angleScale.convert(end) + rotation;\n          var midAngle = (startAngle + endAngle) / 2;\n          var span = Math.abs(endAngle - startAngle);\n          var midCos = Math.cos(midAngle);\n          var midSin = Math.sin(midAngle);\n          var labelMinAngle = toRadians(calloutLabel.minAngle);\n          var labelVisible = labelKey && span > labelMinAngle;\n          var midAngle180 = normalizeAngle180(midAngle);\n          // Split the circle into quadrants like so: ⊗\n          var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n          var quadrantOffset = midAngle180 - quadrantStart;\n          var quadrant = Math.floor(quadrantOffset / halfPi);\n          var quadrantIndex = mod(quadrant, quadrantTextOpts.length);\n          var _a = quadrantTextOpts[quadrantIndex],\n            textAlign = _a.textAlign,\n            textBaseline = _a.textBaseline;\n          var datum = data[datumIndex];\n          var itemId = datumIndex;\n          groupSelectionData.push({\n            series: _this,\n            datum: datum,\n            itemId: itemId,\n            index: datumIndex,\n            radius: radius,\n            startAngle: startAngle,\n            endAngle: endAngle,\n            midAngle: midAngle,\n            midCos: midCos,\n            midSin: midSin,\n            calloutLabel: labelVisible ? {\n              text: labelData[datumIndex],\n              textAlign: textAlign,\n              textBaseline: textBaseline\n            } : undefined,\n            sectorLabel: sectorLabelKey ? {\n              text: sectorLabelData[datumIndex]\n            } : undefined,\n            sectorFormat: sectorFormatData[datumIndex]\n          });\n          datumIndex++;\n          end = start; // Update for next iteration.\n        });\n\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  PieSeries.prototype.getSectorFormat = function (datum, itemId, index, highlight) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n    var _p = this,\n      angleKey = _p.angleKey,\n      radiusKey = _p.radiusKey,\n      fills = _p.fills,\n      strokes = _p.strokes,\n      seriesFillOpacity = _p.fillOpacity,\n      formatter = _p.formatter,\n      seriesId = _p.id;\n    var highlightedDatum = this.chart.highlightedDatum;\n    var isDatumHighlighted = highlight && ((_a = highlightedDatum) === null || _a === void 0 ? void 0 : _a.series) === this && itemId === highlightedDatum.itemId;\n    var highlightedStyle = isDatumHighlighted ? this.highlightStyle.item : null;\n    var fill = ((_b = highlightedStyle) === null || _b === void 0 ? void 0 : _b.fill) || fills[index % fills.length];\n    var fillOpacity = (_d = (_c = highlightedStyle) === null || _c === void 0 ? void 0 : _c.fillOpacity, _d !== null && _d !== void 0 ? _d : seriesFillOpacity);\n    var stroke = ((_e = highlightedStyle) === null || _e === void 0 ? void 0 : _e.stroke) || strokes[index % strokes.length];\n    var strokeWidth = (_g = (_f = highlightedStyle) === null || _f === void 0 ? void 0 : _f.strokeWidth, _g !== null && _g !== void 0 ? _g : this.getStrokeWidth(this.strokeWidth));\n    var format;\n    if (formatter) {\n      format = formatter({\n        datum: datum,\n        angleKey: angleKey,\n        radiusKey: radiusKey,\n        fill: fill,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        highlighted: isDatumHighlighted,\n        seriesId: seriesId\n      });\n    }\n    return {\n      fill: ((_h = format) === null || _h === void 0 ? void 0 : _h.fill) || fill,\n      fillOpacity: (_k = (_j = format) === null || _j === void 0 ? void 0 : _j.fillOpacity, _k !== null && _k !== void 0 ? _k : fillOpacity),\n      stroke: ((_l = format) === null || _l === void 0 ? void 0 : _l.stroke) || stroke,\n      strokeWidth: (_o = (_m = format) === null || _m === void 0 ? void 0 : _m.strokeWidth, _o !== null && _o !== void 0 ? _o : strokeWidth)\n    };\n  };\n  PieSeries.prototype.createNodeData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, []];\n      });\n    });\n  };\n  PieSeries.prototype.getInnerRadius = function () {\n    var _a = this,\n      radius = _a.radius,\n      innerRadiusRatio = _a.innerRadiusRatio,\n      innerRadiusOffset = _a.innerRadiusOffset;\n    var innerRadius = radius * (innerRadiusRatio !== null && innerRadiusRatio !== void 0 ? innerRadiusRatio : 1) + (innerRadiusOffset ? innerRadiusOffset : 0);\n    if (innerRadius === radius || innerRadius < 0) {\n      return 0;\n    }\n    return innerRadius;\n  };\n  PieSeries.prototype.getOuterRadius = function () {\n    var _a = this,\n      radius = _a.radius,\n      outerRadiusRatio = _a.outerRadiusRatio,\n      outerRadiusOffset = _a.outerRadiusOffset;\n    var outerRadius = radius * (outerRadiusRatio !== null && outerRadiusRatio !== void 0 ? outerRadiusRatio : 1) + (outerRadiusOffset ? outerRadiusOffset : 0);\n    if (outerRadius < 0) {\n      return 0;\n    }\n    return outerRadius;\n  };\n  PieSeries.prototype.update = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var title, innerRadius, outerRadius, outerRadius_1, titleOffset;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            title = this.title;\n            innerRadius = this.getInnerRadius();\n            outerRadius = this.getOuterRadius();\n            this.radiusScale.range = [innerRadius, outerRadius];\n            this.group.translationX = this.centerX;\n            this.group.translationY = this.centerY;\n            if (title) {\n              outerRadius_1 = Math.max(0, this.radiusScale.range[1]);\n              if (outerRadius_1 === 0) {\n                title.node.visible = false;\n              } else {\n                titleOffset = 2;\n                title.node.translationY = -outerRadius_1 - titleOffset;\n                title.node.visible = title.enabled;\n              }\n            }\n            return [4 /*yield*/, this.updateSelections()];\n          case 1:\n            _a.sent();\n            return [4 /*yield*/, this.updateNodes()];\n          case 2:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  PieSeries.prototype.updateSelections = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.updateGroupSelection()];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  PieSeries.prototype.updateGroupSelection = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, groupSelection, highlightSelection, calloutSelection, sectorLabelSelection, innerLabelsSelection, update, updateLabels, enterLabels, updateSectorLabels, enterSectorLabels, updateInnerLabels, enterInnerLabels;\n      var _this = this;\n      return __generator(this, function (_b) {\n        _a = this, groupSelection = _a.groupSelection, highlightSelection = _a.highlightSelection, calloutSelection = _a.calloutSelection, sectorLabelSelection = _a.sectorLabelSelection, innerLabelsSelection = _a.innerLabelsSelection;\n        update = function (selection) {\n          var updateGroups = selection.setData(_this.groupSelectionData);\n          updateGroups.exit.remove();\n          var enterGroups = updateGroups.enter.append(Group);\n          enterGroups.append(Sector).each(function (node) {\n            return node.tag = PieNodeTag.Sector;\n          });\n          return updateGroups.merge(enterGroups);\n        };\n        this.groupSelection = update(groupSelection);\n        this.highlightSelection = update(highlightSelection);\n        updateLabels = calloutSelection.setData(this.groupSelectionData);\n        updateLabels.exit.remove();\n        enterLabels = updateLabels.enter.append(Group);\n        enterLabels.append(Line).each(function (node) {\n          node.tag = PieNodeTag.Callout;\n          node.pointerEvents = PointerEvents.None;\n        });\n        enterLabels.append(Text).each(function (node) {\n          node.tag = PieNodeTag.Label;\n          node.pointerEvents = PointerEvents.None;\n        });\n        this.calloutSelection = updateLabels.merge(enterLabels);\n        updateSectorLabels = sectorLabelSelection.setData(this.groupSelectionData);\n        updateSectorLabels.exit.remove();\n        enterSectorLabels = updateSectorLabels.enter.append(Text);\n        enterSectorLabels.each(function (node) {\n          node.pointerEvents = PointerEvents.None;\n        });\n        this.sectorLabelSelection = updateSectorLabels.merge(enterSectorLabels);\n        updateInnerLabels = innerLabelsSelection.setData(this.innerLabels);\n        updateInnerLabels.exit.remove();\n        enterInnerLabels = updateInnerLabels.enter.append(Text);\n        enterInnerLabels.each(function (node) {\n          node.pointerEvents = PointerEvents.None;\n        });\n        this.innerLabelsSelection = updateInnerLabels.merge(enterInnerLabels);\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  PieSeries.prototype.updateNodes = function () {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function () {\n      var isVisible, _c, radiusScale, calloutLine, highlightedDatum, centerOffsets, innerRadius, updateSectorFn, calloutColors, calloutLength, calloutStrokeWidth, _d, offset_1, fontStyle_1, fontWeight_1, fontSize_1, fontFamily_1, color_1;\n      var _this = this;\n      return __generator(this, function (_e) {\n        if (!this.chart) {\n          return [2 /*return*/];\n        }\n\n        isVisible = this.seriesItemEnabled.indexOf(true) >= 0;\n        this.group.visible = isVisible;\n        this.backgroundGroup.visible = isVisible;\n        this.seriesGroup.visible = isVisible;\n        this.highlightGroup.visible = isVisible && ((_b = (_a = this.chart) === null || _a === void 0 ? void 0 : _a.highlightedDatum) === null || _b === void 0 ? void 0 : _b.series) === this;\n        this.labelGroup.visible = isVisible;\n        this.seriesGroup.opacity = this.getOpacity();\n        this.updateInnerCircle();\n        _c = this, radiusScale = _c.radiusScale, calloutLine = _c.calloutLine, highlightedDatum = _c.chart.highlightedDatum;\n        centerOffsets = [];\n        innerRadius = radiusScale.convert(0);\n        updateSectorFn = function (sector, datum, index, isDatumHighlighted) {\n          var _a;\n          var radius = radiusScale.convert(datum.radius, clamper);\n          // Bring highlighted sector's parent group to front.\n          var sectorParent = sector.parent;\n          var sectorGrandParent = (_a = sectorParent) === null || _a === void 0 ? void 0 : _a.parent;\n          if (isDatumHighlighted && sectorParent && sectorGrandParent) {\n            sectorGrandParent.removeChild(sectorParent);\n            sectorGrandParent.appendChild(sectorParent);\n          }\n          sector.innerRadius = Math.max(0, innerRadius);\n          sector.outerRadius = Math.max(0, radius);\n          sector.startAngle = datum.startAngle;\n          sector.endAngle = datum.endAngle;\n          var format = _this.getSectorFormat(datum.datum, datum.itemId, index, isDatumHighlighted);\n          sector.fill = format.fill;\n          sector.stroke = format.stroke;\n          sector.strokeWidth = format.strokeWidth;\n          sector.fillOpacity = format.fillOpacity;\n          sector.strokeOpacity = _this.strokeOpacity;\n          sector.lineDash = _this.lineDash;\n          sector.lineDashOffset = _this.lineDashOffset;\n          sector.fillShadow = _this.shadow;\n          sector.lineJoin = 'round';\n          centerOffsets.push(sector.centerOffset);\n          _this.datumSectorRefs.set(datum, sector);\n        };\n        this.groupSelection.selectByTag(PieNodeTag.Sector).each(function (node, datum, index) {\n          return updateSectorFn(node, datum, index, false);\n        });\n        this.highlightSelection.selectByTag(PieNodeTag.Sector).each(function (node, datum, index) {\n          var _a;\n          var isDatumHighlighted = ((_a = highlightedDatum) === null || _a === void 0 ? void 0 : _a.series) === _this && datum.itemId === highlightedDatum.itemId;\n          node.visible = isDatumHighlighted;\n          if (node.visible) {\n            updateSectorFn(node, datum, index, isDatumHighlighted);\n          }\n        });\n        calloutColors = calloutLine.colors, calloutLength = calloutLine.length, calloutStrokeWidth = calloutLine.strokeWidth;\n        this.calloutSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n          var radius = radiusScale.convert(datum.radius, clamper);\n          var outerRadius = Math.max(0, radius);\n          if (datum.calloutLabel && outerRadius !== 0) {\n            line.strokeWidth = calloutStrokeWidth;\n            line.stroke = calloutColors[index % calloutColors.length];\n            line.x1 = datum.midCos * outerRadius;\n            line.y1 = datum.midSin * outerRadius;\n            line.x2 = datum.midCos * (outerRadius + calloutLength);\n            line.y2 = datum.midSin * (outerRadius + calloutLength);\n          } else {\n            line.stroke = undefined;\n          }\n        });\n        {\n          _d = this.calloutLabel, offset_1 = _d.offset, fontStyle_1 = _d.fontStyle, fontWeight_1 = _d.fontWeight, fontSize_1 = _d.fontSize, fontFamily_1 = _d.fontFamily, color_1 = _d.color;\n          this.calloutSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n            var label = datum.calloutLabel;\n            var radius = radiusScale.convert(datum.radius, clamper);\n            var outerRadius = Math.max(0, radius);\n            if (label && outerRadius !== 0) {\n              var labelRadius = centerOffsets[index] + outerRadius + calloutLength + offset_1;\n              text.fontStyle = fontStyle_1;\n              text.fontWeight = fontWeight_1;\n              text.fontSize = fontSize_1;\n              text.fontFamily = fontFamily_1;\n              text.text = label.text;\n              text.x = datum.midCos * labelRadius;\n              text.y = datum.midSin * labelRadius;\n              text.fill = color_1;\n              text.textAlign = label.textAlign;\n              text.textBaseline = label.textBaseline;\n            } else {\n              text.fill = undefined;\n            }\n          });\n        }\n        this.updateSectorLabelNodes();\n        this.updateInnerLabelNodes();\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  PieSeries.prototype.updateSectorLabelNodes = function () {\n    var _this = this;\n    var radiusScale = this.radiusScale;\n    var innerRadius = radiusScale.convert(0);\n    var _a = this.sectorLabel,\n      fontSize = _a.fontSize,\n      fontStyle = _a.fontStyle,\n      fontWeight = _a.fontWeight,\n      fontFamily = _a.fontFamily,\n      positionOffset = _a.positionOffset,\n      positionRatio = _a.positionRatio,\n      color = _a.color;\n    var isDoughnut = innerRadius > 0;\n    var singleVisibleSector = this.seriesItemEnabled.filter(Boolean).length === 1;\n    this.sectorLabelSelection.each(function (text, datum) {\n      var sectorLabel = datum.sectorLabel;\n      var radius = radiusScale.convert(datum.radius, clamper);\n      var outerRadius = Math.max(0, radius);\n      var isTextVisible = false;\n      if (sectorLabel && outerRadius !== 0) {\n        var labelRadius = innerRadius * (1 - positionRatio) + radius * positionRatio + positionOffset;\n        text.fill = color;\n        text.fontStyle = fontStyle;\n        text.fontWeight = fontWeight;\n        text.fontSize = fontSize;\n        text.fontFamily = fontFamily;\n        text.text = sectorLabel.text;\n        var shouldPutTextInCenter = !isDoughnut && singleVisibleSector;\n        if (shouldPutTextInCenter) {\n          text.x = 0;\n          text.y = 0;\n        } else {\n          text.x = datum.midCos * labelRadius;\n          text.y = datum.midSin * labelRadius;\n        }\n        text.textAlign = 'center';\n        text.textBaseline = 'middle';\n        var sector = _this.datumSectorRefs.get(datum);\n        if (sector) {\n          var bbox = text.computeBBox();\n          var corners = [[bbox.x, bbox.y], [bbox.x + bbox.width, bbox.y], [bbox.x + bbox.width, bbox.y + bbox.height], [bbox.x, bbox.y + bbox.height]];\n          var startAngle = datum.startAngle,\n            endAngle = datum.endAngle;\n          var sectorBounds_1 = {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            innerRadius: innerRadius,\n            outerRadius: outerRadius\n          };\n          if (corners.every(function (_a) {\n            var _b = __read(_a, 2),\n              x = _b[0],\n              y = _b[1];\n            return isPointInArc(x, y, sectorBounds_1);\n          })) {\n            isTextVisible = true;\n          }\n        }\n      }\n      text.visible = isTextVisible;\n    });\n  };\n  PieSeries.prototype.updateInnerCircle = function () {\n    var circle = this._innerCircleNode;\n    if (!circle) {\n      return;\n    }\n    var innerRadius = this.getInnerRadius();\n    if (innerRadius === 0) {\n      circle.size = 0;\n    } else {\n      var circleRadius = Math.min(innerRadius, this.getOuterRadius());\n      var antiAliasingPadding = 1;\n      circle.size = Math.ceil(circleRadius * 2 + antiAliasingPadding);\n    }\n  };\n  PieSeries.prototype.updateInnerLabelNodes = function () {\n    var textBBoxes = [];\n    var margins = [];\n    this.innerLabelsSelection.each(function (text, datum) {\n      var fontStyle = datum.fontStyle,\n        fontWeight = datum.fontWeight,\n        fontSize = datum.fontSize,\n        fontFamily = datum.fontFamily,\n        color = datum.color;\n      text.fontStyle = fontStyle;\n      text.fontWeight = fontWeight;\n      text.fontSize = fontSize;\n      text.fontFamily = fontFamily;\n      text.text = datum.text;\n      text.x = 0;\n      text.y = 0;\n      text.fill = color;\n      text.textAlign = 'center';\n      text.textBaseline = 'alphabetic';\n      textBBoxes.push(text.computeBBox());\n      margins.push(datum.margin);\n    });\n    var getMarginTop = function (index) {\n      return index === 0 ? 0 : margins[index];\n    };\n    var getMarginBottom = function (index) {\n      return index === margins.length - 1 ? 0 : margins[index];\n    };\n    var totalHeight = textBBoxes.reduce(function (sum, bbox, i) {\n      return sum + bbox.height + getMarginTop(i) + getMarginBottom(i);\n    }, 0);\n    var totalWidth = Math.max.apply(Math, __spread(textBBoxes.map(function (bbox) {\n      return bbox.width;\n    })));\n    var innerRadius = this.getInnerRadius();\n    var labelRadius = Math.sqrt(Math.pow(totalWidth / 2, 2) + Math.pow(totalHeight / 2, 2));\n    var labelsVisible = labelRadius <= (innerRadius > 0 ? innerRadius : this.getOuterRadius());\n    var textBottoms = [];\n    for (var i = 0, prev = -totalHeight / 2; i < textBBoxes.length; i++) {\n      var bbox = textBBoxes[i];\n      var bottom = bbox.height + prev + getMarginTop(i);\n      textBottoms.push(bottom);\n      prev = bottom + getMarginBottom(i);\n    }\n    this.innerLabelsSelection.each(function (text, _datum, index) {\n      text.y = textBottoms[index];\n      text.visible = labelsVisible;\n    });\n  };\n  PieSeries.prototype.getNodeClickEvent = function (event, datum) {\n    return new PieSeriesNodeClickEvent(this.angleKey, this.calloutLabelKey, this.sectorLabelKey, this.radiusKey, event, datum, this);\n  };\n  PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var angleKey = this.angleKey;\n    if (!angleKey) {\n      return '';\n    }\n    var _a = this,\n      tooltip = _a.tooltip,\n      angleName = _a.angleName,\n      radiusKey = _a.radiusKey,\n      radiusName = _a.radiusName,\n      calloutLabelKey = _a.calloutLabelKey,\n      sectorLabelKey = _a.sectorLabelKey,\n      calloutLabelName = _a.calloutLabelName,\n      sectorLabelName = _a.sectorLabelName,\n      seriesId = _a.id;\n    var tooltipRenderer = tooltip.renderer;\n    var color = nodeDatum.sectorFormat.fill;\n    var datum = nodeDatum.datum;\n    var label = calloutLabelKey ? datum[calloutLabelKey] + \": \" : '';\n    var angleValue = datum[angleKey];\n    var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n    var title = this.title ? this.title.text : undefined;\n    var content = label + formattedAngleValue;\n    var defaults = {\n      title: title,\n      backgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        angleKey: angleKey,\n        angleValue: angleValue,\n        angleName: angleName,\n        radiusKey: radiusKey,\n        radiusValue: radiusKey ? datum[radiusKey] : undefined,\n        radiusName: radiusName,\n        labelKey: calloutLabelKey,\n        labelName: calloutLabelName,\n        calloutLabelKey: calloutLabelKey,\n        calloutLabelName: calloutLabelName,\n        sectorLabelKey: sectorLabelKey,\n        sectorLabelName: sectorLabelName,\n        title: title,\n        color: color,\n        seriesId: seriesId\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  PieSeries.prototype.getLegendData = function () {\n    var _this = this;\n    var _a = this,\n      calloutLabelKey = _a.calloutLabelKey,\n      data = _a.data,\n      sectorFormatData = _a.sectorFormatData;\n    if (data && data.length && calloutLabelKey) {\n      var id_1 = this.id;\n      var legendData_1 = [];\n      var titleText_1 = this.title && this.title.showInLegend && this.title.text;\n      data.forEach(function (datum, index) {\n        var labelParts = [];\n        titleText_1 && labelParts.push(titleText_1);\n        labelParts.push(String(datum[calloutLabelKey]));\n        legendData_1.push({\n          id: id_1,\n          itemId: index,\n          seriesId: id_1,\n          enabled: _this.seriesItemEnabled[index],\n          label: {\n            text: labelParts.join(' - ')\n          },\n          marker: {\n            fill: sectorFormatData[index].fill,\n            stroke: sectorFormatData[index].stroke,\n            fillOpacity: _this.fillOpacity,\n            strokeOpacity: _this.strokeOpacity\n          }\n        });\n      });\n      return legendData_1;\n    }\n    return [];\n  };\n  PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    this.seriesItemEnabled[itemId] = enabled;\n    this.nodeDataRefresh = true;\n  };\n  PieSeries.className = 'PieSeries';\n  PieSeries.type = 'pie';\n  __decorate([DeprecatedAndRenamedTo('calloutLabel')], PieSeries.prototype, \"label\", void 0);\n  __decorate([DeprecatedAndRenamedTo('calloutLine')], PieSeries.prototype, \"callout\", void 0);\n  __decorate([Validate(STRING)], PieSeries.prototype, \"angleKey\", void 0);\n  __decorate([Validate(STRING)], PieSeries.prototype, \"angleName\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"radiusKey\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"radiusName\", void 0);\n  __decorate([Validate(OPT_NUMBER(0))], PieSeries.prototype, \"radiusMin\", void 0);\n  __decorate([Validate(OPT_NUMBER(0))], PieSeries.prototype, \"radiusMax\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"calloutLabelKey\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"calloutLabelName\", void 0);\n  __decorate([DeprecatedAndRenamedTo('calloutLabelKey')], PieSeries.prototype, \"labelKey\", void 0);\n  __decorate([DeprecatedAndRenamedTo('calloutLabelName')], PieSeries.prototype, \"labelName\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"sectorLabelKey\", void 0);\n  __decorate([Validate(OPT_STRING)], PieSeries.prototype, \"sectorLabelName\", void 0);\n  __decorate([Validate(COLOR_STRING_ARRAY)], PieSeries.prototype, \"fills\", void 0);\n  __decorate([Validate(COLOR_STRING_ARRAY)], PieSeries.prototype, \"strokes\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], PieSeries.prototype, \"fillOpacity\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], PieSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate([Validate(OPT_LINE_DASH)], PieSeries.prototype, \"lineDash\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate([Validate(OPT_FUNCTION)], PieSeries.prototype, \"formatter\", void 0);\n  __decorate([Validate(NUMBER(-360, 360))], PieSeries.prototype, \"rotation\", void 0);\n  __decorate([Validate(NUMBER())], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeries.prototype, \"outerRadiusRatio\", void 0);\n  __decorate([Validate(NUMBER())], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeries.prototype, \"innerRadiusRatio\", void 0);\n  __decorate([Validate(NUMBER(0))], PieSeries.prototype, \"strokeWidth\", void 0);\n  return PieSeries;\n}(PolarSeries);\nexport { PieSeries };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","ar","error","__spread","concat","Group","Line","Text","Circle","Selection","LinearScale","clamper","Sector","HighlightStyle","SeriesTooltip","SeriesNodeClickEvent","Label","PointerEvents","normalizeAngle180","toRadians","doOnce","toFixed","mod","Caption","Observable","PolarSeries","ChartAxisDirection","toTooltipHtml","DeprecatedAndRenamedTo","BOOLEAN","NUMBER","OPT_FUNCTION","OPT_LINE_DASH","OPT_NUMBER","OPT_STRING","STRING","COLOR_STRING_ARRAY","Validate","COLOR_STRING","PieSeriesNodeClickEvent","_super","angleKey","calloutLabelKey","sectorLabelKey","radiusKey","nativeEvent","datum","series","_this","PieHighlightStyle","PieNodeTag","PieSeriesCalloutLabel","offset","minAngle","formatter","undefined","PieSeriesSectorLabel","positionOffset","positionRatio","PieSeriesCalloutLine","colors","strokeWidth","PieSeriesTooltip","renderer","PieTitle","showInLegend","DoughnutInnerLabel","text","margin","DoughnutInnerCircle","fill","fillOpacity","isPointInArc","x","sector","radius","Math","sqrt","pow","innerRadius","outerRadius","min","max","angle","atan2","PI","startAngle","endAngle","PieSeries","useLabelLayer","radiusScale","groupSelection","select","pickGroup","selectAll","highlightSelection","highlightGroup","groupSelectionData","sectorFormatData","angleScale","scale","domain","range","map","seriesItemEnabled","calloutLabel","sectorLabel","calloutLine","callout","tooltip","angleName","innerLabels","radiusName","radiusMin","radiusMax","calloutLabelName","labelKey","labelName","sectorLabelName","fills","strokes","strokeOpacity","lineDash","lineDashOffset","rotation","outerRadiusOffset","outerRadiusRatio","innerRadiusOffset","innerRadiusRatio","shadow","highlightStyle","datumSectorRefs","WeakMap","pieLabels","pieSectorLabels","labelGroup","append","calloutSelection","sectorLabelSelection","innerLabelsSelection","get","_title","set","_a","_b","oldTitle","removeChild","node","textBaseline","appendChild","enumerable","configurable","_data","input","processSeriesItemEnabled","_innerCircleConfig","oldCircleCfg","oldNode","_innerCircleNode","circle","backgroundGroup","visibleChanged","data","visible","setColors","getDomain","direction","X","processData","seriesId","angleData","angleDataTotal","angleDataRatios","labelFormatter","labelData","sectorLabelData","radiusData","getLabelFormatterParams","showValueDeprecationWarning_1","sectorLabelFormatter","radii","min_1","delta_1","halfPi","datumIndex","quadrantTextOpts","end","_c","id","index","abs","reduce","a","sum","enabled","angleValue","radiusValue","labelValue","calloutLabelValue","sectorLabelValue","console","warn","deprecatedValue","formatterParams","String","datumIdx","getSectorFormat","textAlign","forEach","start","isNaN","convert","midAngle","span","midCos","cos","midSin","sin","labelMinAngle","labelVisible","midAngle180","quadrantStart","quadrantOffset","quadrant","floor","quadrantIndex","itemId","sectorFormat","highlight","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","seriesFillOpacity","highlightedDatum","chart","isDatumHighlighted","highlightedStyle","item","stroke","getStrokeWidth","format","highlighted","createNodeData","getInnerRadius","getOuterRadius","update","title","outerRadius_1","titleOffset","group","translationX","centerX","translationY","centerY","updateSelections","updateNodes","updateGroupSelection","updateLabels","enterLabels","updateSectorLabels","enterSectorLabels","updateInnerLabels","enterInnerLabels","selection","updateGroups","setData","exit","remove","enterGroups","enter","each","tag","merge","Callout","pointerEvents","None","isVisible","centerOffsets","updateSectorFn","calloutColors","calloutLength","calloutStrokeWidth","offset_1","fontStyle_1","fontWeight_1","fontSize_1","fontFamily_1","color_1","indexOf","seriesGroup","opacity","getOpacity","updateInnerCircle","sectorParent","parent","sectorGrandParent","fillShadow","lineJoin","centerOffset","selectByTag","line","x1","y1","x2","y2","fontStyle","fontWeight","fontSize","fontFamily","color","labelRadius","updateSectorLabelNodes","updateInnerLabelNodes","isDoughnut","singleVisibleSector","filter","Boolean","isTextVisible","shouldPutTextInCenter","bbox","computeBBox","corners","width","height","sectorBounds_1","every","size","circleRadius","antiAliasingPadding","ceil","textBBoxes","margins","getMarginTop","getMarginBottom","totalHeight","totalWidth","labelsVisible","textBottoms","prev","bottom","_datum","getNodeClickEvent","event","getTooltipHtml","nodeDatum","tooltipRenderer","formattedAngleValue","toString","content","defaults","backgroundColor","getLegendData","id_1","legendData_1","titleText_1","labelParts","join","marker","toggleSeriesItem","nodeDataRefresh","className","type"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/ag-charts-community/dist/esm/es5/chart/series/polar/pieSeries.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { Group } from '../../../scene/group';\nimport { Line } from '../../../scene/shape/line';\nimport { Text } from '../../../scene/shape/text';\nimport { Circle } from '../../marker/circle';\nimport { Selection } from '../../../scene/selection';\nimport { LinearScale } from '../../../scale/linearScale';\nimport { clamper } from '../../../scale/continuousScale';\nimport { Sector } from '../../../scene/shape/sector';\nimport { HighlightStyle, SeriesTooltip, SeriesNodeClickEvent, } from './../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { normalizeAngle180, toRadians } from '../../../util/angle';\nimport { doOnce } from '../../../util/function';\nimport { toFixed, mod } from '../../../util/number';\nimport { Caption } from '../../../caption';\nimport { Observable } from '../../../util/observable';\nimport { PolarSeries } from './polarSeries';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { DeprecatedAndRenamedTo } from '../../../util/deprecation';\nimport { BOOLEAN, NUMBER, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, OPT_STRING, STRING, COLOR_STRING_ARRAY, Validate, COLOR_STRING, } from '../../../util/validation';\nvar PieSeriesNodeClickEvent = /** @class */ (function (_super) {\n    __extends(PieSeriesNodeClickEvent, _super);\n    function PieSeriesNodeClickEvent(angleKey, calloutLabelKey, sectorLabelKey, radiusKey, nativeEvent, datum, series) {\n        var _this = _super.call(this, nativeEvent, datum, series) || this;\n        _this.angleKey = angleKey;\n        _this.calloutLabelKey = calloutLabelKey;\n        _this.sectorLabelKey = sectorLabelKey;\n        _this.radiusKey = radiusKey;\n        return _this;\n    }\n    __decorate([\n        DeprecatedAndRenamedTo('calloutLabelKey')\n    ], PieSeriesNodeClickEvent.prototype, \"labelKey\", void 0);\n    return PieSeriesNodeClickEvent;\n}(SeriesNodeClickEvent));\nexport { PieSeriesNodeClickEvent };\nvar PieHighlightStyle = /** @class */ (function (_super) {\n    __extends(PieHighlightStyle, _super);\n    function PieHighlightStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Validate(OPT_NUMBER(0))\n    ], PieHighlightStyle.prototype, \"centerOffset\", void 0);\n    return PieHighlightStyle;\n}(HighlightStyle));\nvar PieNodeTag;\n(function (PieNodeTag) {\n    PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n    PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n    PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\nvar PieSeriesCalloutLabel = /** @class */ (function (_super) {\n    __extends(PieSeriesCalloutLabel, _super);\n    function PieSeriesCalloutLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.offset = 3; // from the callout line\n        _this.minAngle = 20; // in degrees\n        _this.formatter = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeriesCalloutLabel.prototype, \"offset\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeriesCalloutLabel.prototype, \"minAngle\", void 0);\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], PieSeriesCalloutLabel.prototype, \"formatter\", void 0);\n    return PieSeriesCalloutLabel;\n}(Label));\nvar PieSeriesSectorLabel = /** @class */ (function (_super) {\n    __extends(PieSeriesSectorLabel, _super);\n    function PieSeriesSectorLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.positionOffset = 0;\n        _this.positionRatio = 0.5;\n        _this.formatter = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(NUMBER())\n    ], PieSeriesSectorLabel.prototype, \"positionOffset\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], PieSeriesSectorLabel.prototype, \"positionRatio\", void 0);\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], PieSeriesSectorLabel.prototype, \"formatter\", void 0);\n    return PieSeriesSectorLabel;\n}(Label));\nvar PieSeriesCalloutLine = /** @class */ (function (_super) {\n    __extends(PieSeriesCalloutLine, _super);\n    function PieSeriesCalloutLine() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.colors = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n        _this.length = 10;\n        _this.strokeWidth = 1;\n        return _this;\n    }\n    __decorate([\n        Validate(COLOR_STRING_ARRAY)\n    ], PieSeriesCalloutLine.prototype, \"colors\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeriesCalloutLine.prototype, \"length\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeriesCalloutLine.prototype, \"strokeWidth\", void 0);\n    return PieSeriesCalloutLine;\n}(Observable));\nvar PieSeriesTooltip = /** @class */ (function (_super) {\n    __extends(PieSeriesTooltip, _super);\n    function PieSeriesTooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderer = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], PieSeriesTooltip.prototype, \"renderer\", void 0);\n    return PieSeriesTooltip;\n}(SeriesTooltip));\nexport { PieSeriesTooltip };\nvar PieTitle = /** @class */ (function (_super) {\n    __extends(PieTitle, _super);\n    function PieTitle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.showInLegend = false;\n        return _this;\n    }\n    __decorate([\n        Validate(BOOLEAN)\n    ], PieTitle.prototype, \"showInLegend\", void 0);\n    return PieTitle;\n}(Caption));\nexport { PieTitle };\nvar DoughnutInnerLabel = /** @class */ (function (_super) {\n    __extends(DoughnutInnerLabel, _super);\n    function DoughnutInnerLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.text = '';\n        _this.margin = 2;\n        return _this;\n    }\n    __decorate([\n        Validate(STRING)\n    ], DoughnutInnerLabel.prototype, \"text\", void 0);\n    __decorate([\n        Validate(NUMBER())\n    ], DoughnutInnerLabel.prototype, \"margin\", void 0);\n    return DoughnutInnerLabel;\n}(Label));\nexport { DoughnutInnerLabel };\nvar DoughnutInnerCircle = /** @class */ (function () {\n    function DoughnutInnerCircle() {\n        this.fill = 'transparent';\n        this.fillOpacity = 1;\n    }\n    __decorate([\n        Validate(COLOR_STRING)\n    ], DoughnutInnerCircle.prototype, \"fill\", void 0);\n    __decorate([\n        Validate(OPT_NUMBER(0, 1))\n    ], DoughnutInnerCircle.prototype, \"fillOpacity\", void 0);\n    return DoughnutInnerCircle;\n}());\nexport { DoughnutInnerCircle };\nfunction isPointInArc(x, y, sector) {\n    var radius = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n    var innerRadius = sector.innerRadius, outerRadius = sector.outerRadius;\n    if (radius < Math.min(innerRadius, outerRadius) || radius > Math.max(innerRadius, outerRadius)) {\n        return false;\n    }\n    // Start and End angles are expected to be [-90, 270]\n    // while Math.atan2 returns [-180, 180]\n    var angle = Math.atan2(y, x);\n    if (angle < -Math.PI / 2) {\n        angle += 2 * Math.PI;\n    }\n    // Start is actually bigger than End clock-wise\n    var startAngle = sector.startAngle, endAngle = sector.endAngle;\n    if (endAngle === -Math.PI / 2) {\n        return angle < startAngle;\n    }\n    if (startAngle === (3 * Math.PI) / 2) {\n        return angle > endAngle;\n    }\n    return angle >= endAngle && angle <= startAngle;\n}\nvar PieSeries = /** @class */ (function (_super) {\n    __extends(PieSeries, _super);\n    function PieSeries() {\n        var _this = _super.call(this, { useLabelLayer: true }) || this;\n        _this.radiusScale = new LinearScale();\n        _this.groupSelection = Selection.select(_this.pickGroup).selectAll();\n        _this.highlightSelection = Selection.select(_this.highlightGroup).selectAll();\n        /**\n         * The processed data that gets visualized.\n         */\n        _this.groupSelectionData = [];\n        _this.sectorFormatData = [];\n        _this.angleScale = (function () {\n            var scale = new LinearScale();\n            // Each sector is a ratio of the whole, where all ratios add up to 1.\n            scale.domain = [0, 1];\n            // Add 90 deg to start the first pie at 12 o'clock.\n            scale.range = [-Math.PI, Math.PI].map(function (angle) { return angle + Math.PI / 2; });\n            return scale;\n        })();\n        // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n        _this.seriesItemEnabled = [];\n        _this.calloutLabel = new PieSeriesCalloutLabel();\n        _this.label = _this.calloutLabel;\n        _this.sectorLabel = new PieSeriesSectorLabel();\n        _this.calloutLine = new PieSeriesCalloutLine();\n        _this.callout = _this.calloutLine;\n        _this.tooltip = new PieSeriesTooltip();\n        /**\n         * The key of the numeric field to use to determine the angle (for example,\n         * a pie sector angle).\n         */\n        _this.angleKey = '';\n        _this.angleName = '';\n        _this.innerLabels = [];\n        /**\n         * The key of the numeric field to use to determine the radii of pie sectors.\n         * The largest value will correspond to the full radius and smaller values to\n         * proportionally smaller radii.\n         */\n        _this.radiusKey = undefined;\n        _this.radiusName = undefined;\n        _this.radiusMin = undefined;\n        _this.radiusMax = undefined;\n        _this.calloutLabelKey = undefined;\n        _this.calloutLabelName = undefined;\n        _this.labelKey = undefined;\n        _this.labelName = undefined;\n        _this.sectorLabelKey = undefined;\n        _this.sectorLabelName = undefined;\n        _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n        _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = [0];\n        _this.lineDashOffset = 0;\n        _this.formatter = undefined;\n        /**\n         * The series rotation in degrees.\n         */\n        _this.rotation = 0;\n        _this.outerRadiusOffset = 0;\n        _this.outerRadiusRatio = 1;\n        _this.innerRadiusOffset = 0;\n        _this.innerRadiusRatio = 1;\n        _this.strokeWidth = 1;\n        _this.shadow = undefined;\n        _this.highlightStyle = new PieHighlightStyle();\n        _this.datumSectorRefs = new WeakMap();\n        var pieLabels = new Group();\n        var pieSectorLabels = new Group();\n        var innerLabels = new Group();\n        _this.labelGroup.append(pieLabels);\n        _this.labelGroup.append(pieSectorLabels);\n        _this.labelGroup.append(innerLabels);\n        _this.calloutSelection = Selection.select(pieLabels).selectAll();\n        _this.sectorLabelSelection = Selection.select(pieSectorLabels).selectAll();\n        _this.innerLabelsSelection = Selection.select(innerLabels).selectAll();\n        return _this;\n    }\n    Object.defineProperty(PieSeries.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var _a, _b;\n            var oldTitle = this._title;\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    (_a = this.labelGroup) === null || _a === void 0 ? void 0 : _a.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.textBaseline = 'bottom';\n                    (_b = this.labelGroup) === null || _b === void 0 ? void 0 : _b.appendChild(value.node);\n                }\n                this._title = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        set: function (input) {\n            this._data = input;\n            this.processSeriesItemEnabled();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"innerCircle\", {\n        get: function () {\n            return this._innerCircleConfig;\n        },\n        set: function (value) {\n            var _a;\n            var oldCircleCfg = this._innerCircleConfig;\n            if (oldCircleCfg !== value) {\n                var oldNode = this._innerCircleNode;\n                var circle = void 0;\n                if (oldNode) {\n                    this.backgroundGroup.removeChild(oldNode);\n                }\n                if (value) {\n                    circle = new Circle();\n                    circle.fill = value.fill;\n                    circle.fillOpacity = (_a = value.fillOpacity, (_a !== null && _a !== void 0 ? _a : 1));\n                    this.backgroundGroup.appendChild(circle);\n                }\n                this._innerCircleConfig = value;\n                this._innerCircleNode = circle;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PieSeries.prototype.visibleChanged = function () {\n        this.processSeriesItemEnabled();\n    };\n    PieSeries.prototype.processSeriesItemEnabled = function () {\n        var _a;\n        var _b = this, data = _b.data, visible = _b.visible;\n        this.seriesItemEnabled = ((_a = data) === null || _a === void 0 ? void 0 : _a.map(function () { return visible; })) || [];\n    };\n    PieSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n        this.calloutLine.colors = strokes;\n    };\n    PieSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.angleScale.domain;\n        }\n        else {\n            return this.radiusScale.domain;\n        }\n    };\n    PieSeries.prototype.processData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, angleKey, radiusKey, seriesItemEnabled, angleScale, groupSelectionData, sectorFormatData, calloutLabel, sectorLabel, seriesId, data, angleData, angleDataTotal, angleDataRatios, labelFormatter, labelKey, sectorLabelKey, labelData, sectorLabelData, radiusData, getLabelFormatterParams, showValueDeprecationWarning_1, sectorLabelFormatter, _b, radiusMin, radiusMax, radii, min_1, max, delta_1, rotation, halfPi, datumIndex, quadrantTextOpts, end;\n            var _this = this;\n            return __generator(this, function (_c) {\n                _a = this, angleKey = _a.angleKey, radiusKey = _a.radiusKey, seriesItemEnabled = _a.seriesItemEnabled, angleScale = _a.angleScale, groupSelectionData = _a.groupSelectionData, sectorFormatData = _a.sectorFormatData, calloutLabel = _a.calloutLabel, sectorLabel = _a.sectorLabel, seriesId = _a.id;\n                data = angleKey && this.data ? this.data : [];\n                angleData = data.map(function (datum, index) { return (seriesItemEnabled[index] && Math.abs(+datum[angleKey])) || 0; });\n                angleDataTotal = angleData.reduce(function (a, b) { return a + b; }, 0);\n                angleDataRatios = (function () {\n                    var sum = 0;\n                    return angleData.map(function (datum) { return (sum += datum / angleDataTotal); });\n                })();\n                labelFormatter = calloutLabel.formatter;\n                labelKey = calloutLabel.enabled ? this.calloutLabelKey : undefined;\n                sectorLabelKey = sectorLabel.enabled ? this.sectorLabelKey : undefined;\n                labelData = [];\n                sectorLabelData = [];\n                radiusData = [];\n                getLabelFormatterParams = function (datum) {\n                    return {\n                        datum: datum,\n                        angleKey: angleKey,\n                        angleValue: datum[angleKey],\n                        angleName: _this.angleName,\n                        radiusKey: radiusKey,\n                        radiusValue: radiusKey ? datum[radiusKey] : undefined,\n                        radiusName: _this.radiusName,\n                        labelKey: labelKey,\n                        labelValue: labelKey ? datum[labelKey] : undefined,\n                        labelName: _this.calloutLabelName,\n                        calloutLabelKey: labelKey,\n                        calloutLabelValue: labelKey ? datum[labelKey] : undefined,\n                        calloutLabelName: _this.calloutLabelName,\n                        sectorLabelKey: sectorLabelKey,\n                        sectorLabelValue: sectorLabelKey ? datum[sectorLabelKey] : undefined,\n                        sectorLabelName: _this.sectorLabelName,\n                        seriesId: seriesId,\n                    };\n                };\n                if (labelKey) {\n                    if (labelFormatter) {\n                        showValueDeprecationWarning_1 = function () {\n                            return doOnce(function () {\n                                return console.warn('AG Charts - the use of { value } in the pie chart label formatter function is deprecated. Please use { datum, labelKey, ... } instead.');\n                            }, 'deprecated use of \"value\" property in pie chart label formatter');\n                        };\n                        labelData = data.map(function (datum) {\n                            var deprecatedValue = datum[labelKey];\n                            var formatterParams = __assign(__assign({}, getLabelFormatterParams(datum)), { get value() {\n                                    showValueDeprecationWarning_1();\n                                    return deprecatedValue;\n                                },\n                                set value(v) {\n                                    showValueDeprecationWarning_1();\n                                    deprecatedValue = v;\n                                } });\n                            return labelFormatter(formatterParams);\n                        });\n                    }\n                    else {\n                        labelData = data.map(function (datum) { return String(datum[labelKey]); });\n                    }\n                }\n                sectorLabelFormatter = sectorLabel.formatter;\n                if (sectorLabelKey) {\n                    if (sectorLabelFormatter) {\n                        sectorLabelData = data.map(function (datum) {\n                            var formatterParams = getLabelFormatterParams(datum);\n                            return sectorLabelFormatter(formatterParams);\n                        });\n                    }\n                    else {\n                        sectorLabelData = data.map(function (datum) { return String(datum[sectorLabelKey]); });\n                    }\n                }\n                if (radiusKey) {\n                    _b = this, radiusMin = _b.radiusMin, radiusMax = _b.radiusMax;\n                    radii = data.map(function (datum) { return Math.abs(datum[radiusKey]); });\n                    min_1 = (radiusMin !== null && radiusMin !== void 0 ? radiusMin : 0);\n                    max = radiusMax ? radiusMax : Math.max.apply(Math, __spread(radii));\n                    delta_1 = max - min_1;\n                    radiusData = radii.map(function (value) { return (delta_1 ? (value - min_1) / delta_1 : 1); });\n                }\n                groupSelectionData.length = 0;\n                sectorFormatData.length = 0;\n                sectorFormatData.push.apply(sectorFormatData, __spread(data.map(function (datum, datumIdx) { return _this.getSectorFormat(datum, datumIdx, datumIdx, false); })));\n                rotation = toRadians(this.rotation);\n                halfPi = Math.PI / 2;\n                datumIndex = 0;\n                quadrantTextOpts = [\n                    { textAlign: 'center', textBaseline: 'bottom' },\n                    { textAlign: 'left', textBaseline: 'middle' },\n                    { textAlign: 'center', textBaseline: 'hanging' },\n                    { textAlign: 'right', textBaseline: 'middle' },\n                ];\n                end = 0;\n                angleDataRatios.forEach(function (start) {\n                    if (isNaN(start)) {\n                        return;\n                    } // No sectors displayed - nothing to do.\n                    var radius = radiusKey ? radiusData[datumIndex] : 1;\n                    var startAngle = angleScale.convert(start) + rotation;\n                    var endAngle = angleScale.convert(end) + rotation;\n                    var midAngle = (startAngle + endAngle) / 2;\n                    var span = Math.abs(endAngle - startAngle);\n                    var midCos = Math.cos(midAngle);\n                    var midSin = Math.sin(midAngle);\n                    var labelMinAngle = toRadians(calloutLabel.minAngle);\n                    var labelVisible = labelKey && span > labelMinAngle;\n                    var midAngle180 = normalizeAngle180(midAngle);\n                    // Split the circle into quadrants like so: ⊗\n                    var quadrantStart = (-3 * Math.PI) / 4; // same as `normalizeAngle180(toRadians(-135))`\n                    var quadrantOffset = midAngle180 - quadrantStart;\n                    var quadrant = Math.floor(quadrantOffset / halfPi);\n                    var quadrantIndex = mod(quadrant, quadrantTextOpts.length);\n                    var _a = quadrantTextOpts[quadrantIndex], textAlign = _a.textAlign, textBaseline = _a.textBaseline;\n                    var datum = data[datumIndex];\n                    var itemId = datumIndex;\n                    groupSelectionData.push({\n                        series: _this,\n                        datum: datum,\n                        itemId: itemId,\n                        index: datumIndex,\n                        radius: radius,\n                        startAngle: startAngle,\n                        endAngle: endAngle,\n                        midAngle: midAngle,\n                        midCos: midCos,\n                        midSin: midSin,\n                        calloutLabel: labelVisible\n                            ? {\n                                text: labelData[datumIndex],\n                                textAlign: textAlign,\n                                textBaseline: textBaseline,\n                            }\n                            : undefined,\n                        sectorLabel: sectorLabelKey\n                            ? {\n                                text: sectorLabelData[datumIndex],\n                            }\n                            : undefined,\n                        sectorFormat: sectorFormatData[datumIndex],\n                    });\n                    datumIndex++;\n                    end = start; // Update for next iteration.\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    PieSeries.prototype.getSectorFormat = function (datum, itemId, index, highlight) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        var _p = this, angleKey = _p.angleKey, radiusKey = _p.radiusKey, fills = _p.fills, strokes = _p.strokes, seriesFillOpacity = _p.fillOpacity, formatter = _p.formatter, seriesId = _p.id;\n        var highlightedDatum = this.chart.highlightedDatum;\n        var isDatumHighlighted = highlight && ((_a = highlightedDatum) === null || _a === void 0 ? void 0 : _a.series) === this && itemId === highlightedDatum.itemId;\n        var highlightedStyle = isDatumHighlighted ? this.highlightStyle.item : null;\n        var fill = ((_b = highlightedStyle) === null || _b === void 0 ? void 0 : _b.fill) || fills[index % fills.length];\n        var fillOpacity = (_d = (_c = highlightedStyle) === null || _c === void 0 ? void 0 : _c.fillOpacity, (_d !== null && _d !== void 0 ? _d : seriesFillOpacity));\n        var stroke = ((_e = highlightedStyle) === null || _e === void 0 ? void 0 : _e.stroke) || strokes[index % strokes.length];\n        var strokeWidth = (_g = (_f = highlightedStyle) === null || _f === void 0 ? void 0 : _f.strokeWidth, (_g !== null && _g !== void 0 ? _g : this.getStrokeWidth(this.strokeWidth)));\n        var format;\n        if (formatter) {\n            format = formatter({\n                datum: datum,\n                angleKey: angleKey,\n                radiusKey: radiusKey,\n                fill: fill,\n                stroke: stroke,\n                strokeWidth: strokeWidth,\n                highlighted: isDatumHighlighted,\n                seriesId: seriesId,\n            });\n        }\n        return {\n            fill: ((_h = format) === null || _h === void 0 ? void 0 : _h.fill) || fill,\n            fillOpacity: (_k = (_j = format) === null || _j === void 0 ? void 0 : _j.fillOpacity, (_k !== null && _k !== void 0 ? _k : fillOpacity)),\n            stroke: ((_l = format) === null || _l === void 0 ? void 0 : _l.stroke) || stroke,\n            strokeWidth: (_o = (_m = format) === null || _m === void 0 ? void 0 : _m.strokeWidth, (_o !== null && _o !== void 0 ? _o : strokeWidth)),\n        };\n    };\n    PieSeries.prototype.createNodeData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, []];\n            });\n        });\n    };\n    PieSeries.prototype.getInnerRadius = function () {\n        var _a = this, radius = _a.radius, innerRadiusRatio = _a.innerRadiusRatio, innerRadiusOffset = _a.innerRadiusOffset;\n        var innerRadius = radius * ((innerRadiusRatio !== null && innerRadiusRatio !== void 0 ? innerRadiusRatio : 1)) + (innerRadiusOffset ? innerRadiusOffset : 0);\n        if (innerRadius === radius || innerRadius < 0) {\n            return 0;\n        }\n        return innerRadius;\n    };\n    PieSeries.prototype.getOuterRadius = function () {\n        var _a = this, radius = _a.radius, outerRadiusRatio = _a.outerRadiusRatio, outerRadiusOffset = _a.outerRadiusOffset;\n        var outerRadius = radius * ((outerRadiusRatio !== null && outerRadiusRatio !== void 0 ? outerRadiusRatio : 1)) + (outerRadiusOffset ? outerRadiusOffset : 0);\n        if (outerRadius < 0) {\n            return 0;\n        }\n        return outerRadius;\n    };\n    PieSeries.prototype.update = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var title, innerRadius, outerRadius, outerRadius_1, titleOffset;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        title = this.title;\n                        innerRadius = this.getInnerRadius();\n                        outerRadius = this.getOuterRadius();\n                        this.radiusScale.range = [innerRadius, outerRadius];\n                        this.group.translationX = this.centerX;\n                        this.group.translationY = this.centerY;\n                        if (title) {\n                            outerRadius_1 = Math.max(0, this.radiusScale.range[1]);\n                            if (outerRadius_1 === 0) {\n                                title.node.visible = false;\n                            }\n                            else {\n                                titleOffset = 2;\n                                title.node.translationY = -outerRadius_1 - titleOffset;\n                                title.node.visible = title.enabled;\n                            }\n                        }\n                        return [4 /*yield*/, this.updateSelections()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.updateNodes()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PieSeries.prototype.updateSelections = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.updateGroupSelection()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PieSeries.prototype.updateGroupSelection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, groupSelection, highlightSelection, calloutSelection, sectorLabelSelection, innerLabelsSelection, update, updateLabels, enterLabels, updateSectorLabels, enterSectorLabels, updateInnerLabels, enterInnerLabels;\n            var _this = this;\n            return __generator(this, function (_b) {\n                _a = this, groupSelection = _a.groupSelection, highlightSelection = _a.highlightSelection, calloutSelection = _a.calloutSelection, sectorLabelSelection = _a.sectorLabelSelection, innerLabelsSelection = _a.innerLabelsSelection;\n                update = function (selection) {\n                    var updateGroups = selection.setData(_this.groupSelectionData);\n                    updateGroups.exit.remove();\n                    var enterGroups = updateGroups.enter.append(Group);\n                    enterGroups.append(Sector).each(function (node) { return (node.tag = PieNodeTag.Sector); });\n                    return updateGroups.merge(enterGroups);\n                };\n                this.groupSelection = update(groupSelection);\n                this.highlightSelection = update(highlightSelection);\n                updateLabels = calloutSelection.setData(this.groupSelectionData);\n                updateLabels.exit.remove();\n                enterLabels = updateLabels.enter.append(Group);\n                enterLabels.append(Line).each(function (node) {\n                    node.tag = PieNodeTag.Callout;\n                    node.pointerEvents = PointerEvents.None;\n                });\n                enterLabels.append(Text).each(function (node) {\n                    node.tag = PieNodeTag.Label;\n                    node.pointerEvents = PointerEvents.None;\n                });\n                this.calloutSelection = updateLabels.merge(enterLabels);\n                updateSectorLabels = sectorLabelSelection.setData(this.groupSelectionData);\n                updateSectorLabels.exit.remove();\n                enterSectorLabels = updateSectorLabels.enter.append(Text);\n                enterSectorLabels.each(function (node) {\n                    node.pointerEvents = PointerEvents.None;\n                });\n                this.sectorLabelSelection = updateSectorLabels.merge(enterSectorLabels);\n                updateInnerLabels = innerLabelsSelection.setData(this.innerLabels);\n                updateInnerLabels.exit.remove();\n                enterInnerLabels = updateInnerLabels.enter.append(Text);\n                enterInnerLabels.each(function (node) {\n                    node.pointerEvents = PointerEvents.None;\n                });\n                this.innerLabelsSelection = updateInnerLabels.merge(enterInnerLabels);\n                return [2 /*return*/];\n            });\n        });\n    };\n    PieSeries.prototype.updateNodes = function () {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var isVisible, _c, radiusScale, calloutLine, highlightedDatum, centerOffsets, innerRadius, updateSectorFn, calloutColors, calloutLength, calloutStrokeWidth, _d, offset_1, fontStyle_1, fontWeight_1, fontSize_1, fontFamily_1, color_1;\n            var _this = this;\n            return __generator(this, function (_e) {\n                if (!this.chart) {\n                    return [2 /*return*/];\n                }\n                isVisible = this.seriesItemEnabled.indexOf(true) >= 0;\n                this.group.visible = isVisible;\n                this.backgroundGroup.visible = isVisible;\n                this.seriesGroup.visible = isVisible;\n                this.highlightGroup.visible = isVisible && ((_b = (_a = this.chart) === null || _a === void 0 ? void 0 : _a.highlightedDatum) === null || _b === void 0 ? void 0 : _b.series) === this;\n                this.labelGroup.visible = isVisible;\n                this.seriesGroup.opacity = this.getOpacity();\n                this.updateInnerCircle();\n                _c = this, radiusScale = _c.radiusScale, calloutLine = _c.calloutLine, highlightedDatum = _c.chart.highlightedDatum;\n                centerOffsets = [];\n                innerRadius = radiusScale.convert(0);\n                updateSectorFn = function (sector, datum, index, isDatumHighlighted) {\n                    var _a;\n                    var radius = radiusScale.convert(datum.radius, clamper);\n                    // Bring highlighted sector's parent group to front.\n                    var sectorParent = sector.parent;\n                    var sectorGrandParent = (_a = sectorParent) === null || _a === void 0 ? void 0 : _a.parent;\n                    if (isDatumHighlighted && sectorParent && sectorGrandParent) {\n                        sectorGrandParent.removeChild(sectorParent);\n                        sectorGrandParent.appendChild(sectorParent);\n                    }\n                    sector.innerRadius = Math.max(0, innerRadius);\n                    sector.outerRadius = Math.max(0, radius);\n                    sector.startAngle = datum.startAngle;\n                    sector.endAngle = datum.endAngle;\n                    var format = _this.getSectorFormat(datum.datum, datum.itemId, index, isDatumHighlighted);\n                    sector.fill = format.fill;\n                    sector.stroke = format.stroke;\n                    sector.strokeWidth = format.strokeWidth;\n                    sector.fillOpacity = format.fillOpacity;\n                    sector.strokeOpacity = _this.strokeOpacity;\n                    sector.lineDash = _this.lineDash;\n                    sector.lineDashOffset = _this.lineDashOffset;\n                    sector.fillShadow = _this.shadow;\n                    sector.lineJoin = 'round';\n                    centerOffsets.push(sector.centerOffset);\n                    _this.datumSectorRefs.set(datum, sector);\n                };\n                this.groupSelection\n                    .selectByTag(PieNodeTag.Sector)\n                    .each(function (node, datum, index) { return updateSectorFn(node, datum, index, false); });\n                this.highlightSelection.selectByTag(PieNodeTag.Sector).each(function (node, datum, index) {\n                    var _a;\n                    var isDatumHighlighted = ((_a = highlightedDatum) === null || _a === void 0 ? void 0 : _a.series) === _this && datum.itemId === highlightedDatum.itemId;\n                    node.visible = isDatumHighlighted;\n                    if (node.visible) {\n                        updateSectorFn(node, datum, index, isDatumHighlighted);\n                    }\n                });\n                calloutColors = calloutLine.colors, calloutLength = calloutLine.length, calloutStrokeWidth = calloutLine.strokeWidth;\n                this.calloutSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n                    var radius = radiusScale.convert(datum.radius, clamper);\n                    var outerRadius = Math.max(0, radius);\n                    if (datum.calloutLabel && outerRadius !== 0) {\n                        line.strokeWidth = calloutStrokeWidth;\n                        line.stroke = calloutColors[index % calloutColors.length];\n                        line.x1 = datum.midCos * outerRadius;\n                        line.y1 = datum.midSin * outerRadius;\n                        line.x2 = datum.midCos * (outerRadius + calloutLength);\n                        line.y2 = datum.midSin * (outerRadius + calloutLength);\n                    }\n                    else {\n                        line.stroke = undefined;\n                    }\n                });\n                {\n                    _d = this.calloutLabel, offset_1 = _d.offset, fontStyle_1 = _d.fontStyle, fontWeight_1 = _d.fontWeight, fontSize_1 = _d.fontSize, fontFamily_1 = _d.fontFamily, color_1 = _d.color;\n                    this.calloutSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n                        var label = datum.calloutLabel;\n                        var radius = radiusScale.convert(datum.radius, clamper);\n                        var outerRadius = Math.max(0, radius);\n                        if (label && outerRadius !== 0) {\n                            var labelRadius = centerOffsets[index] + outerRadius + calloutLength + offset_1;\n                            text.fontStyle = fontStyle_1;\n                            text.fontWeight = fontWeight_1;\n                            text.fontSize = fontSize_1;\n                            text.fontFamily = fontFamily_1;\n                            text.text = label.text;\n                            text.x = datum.midCos * labelRadius;\n                            text.y = datum.midSin * labelRadius;\n                            text.fill = color_1;\n                            text.textAlign = label.textAlign;\n                            text.textBaseline = label.textBaseline;\n                        }\n                        else {\n                            text.fill = undefined;\n                        }\n                    });\n                }\n                this.updateSectorLabelNodes();\n                this.updateInnerLabelNodes();\n                return [2 /*return*/];\n            });\n        });\n    };\n    PieSeries.prototype.updateSectorLabelNodes = function () {\n        var _this = this;\n        var radiusScale = this.radiusScale;\n        var innerRadius = radiusScale.convert(0);\n        var _a = this.sectorLabel, fontSize = _a.fontSize, fontStyle = _a.fontStyle, fontWeight = _a.fontWeight, fontFamily = _a.fontFamily, positionOffset = _a.positionOffset, positionRatio = _a.positionRatio, color = _a.color;\n        var isDoughnut = innerRadius > 0;\n        var singleVisibleSector = this.seriesItemEnabled.filter(Boolean).length === 1;\n        this.sectorLabelSelection.each(function (text, datum) {\n            var sectorLabel = datum.sectorLabel;\n            var radius = radiusScale.convert(datum.radius, clamper);\n            var outerRadius = Math.max(0, radius);\n            var isTextVisible = false;\n            if (sectorLabel && outerRadius !== 0) {\n                var labelRadius = innerRadius * (1 - positionRatio) + radius * positionRatio + positionOffset;\n                text.fill = color;\n                text.fontStyle = fontStyle;\n                text.fontWeight = fontWeight;\n                text.fontSize = fontSize;\n                text.fontFamily = fontFamily;\n                text.text = sectorLabel.text;\n                var shouldPutTextInCenter = !isDoughnut && singleVisibleSector;\n                if (shouldPutTextInCenter) {\n                    text.x = 0;\n                    text.y = 0;\n                }\n                else {\n                    text.x = datum.midCos * labelRadius;\n                    text.y = datum.midSin * labelRadius;\n                }\n                text.textAlign = 'center';\n                text.textBaseline = 'middle';\n                var sector = _this.datumSectorRefs.get(datum);\n                if (sector) {\n                    var bbox = text.computeBBox();\n                    var corners = [\n                        [bbox.x, bbox.y],\n                        [bbox.x + bbox.width, bbox.y],\n                        [bbox.x + bbox.width, bbox.y + bbox.height],\n                        [bbox.x, bbox.y + bbox.height],\n                    ];\n                    var startAngle = datum.startAngle, endAngle = datum.endAngle;\n                    var sectorBounds_1 = { startAngle: startAngle, endAngle: endAngle, innerRadius: innerRadius, outerRadius: outerRadius };\n                    if (corners.every(function (_a) {\n                        var _b = __read(_a, 2), x = _b[0], y = _b[1];\n                        return isPointInArc(x, y, sectorBounds_1);\n                    })) {\n                        isTextVisible = true;\n                    }\n                }\n            }\n            text.visible = isTextVisible;\n        });\n    };\n    PieSeries.prototype.updateInnerCircle = function () {\n        var circle = this._innerCircleNode;\n        if (!circle) {\n            return;\n        }\n        var innerRadius = this.getInnerRadius();\n        if (innerRadius === 0) {\n            circle.size = 0;\n        }\n        else {\n            var circleRadius = Math.min(innerRadius, this.getOuterRadius());\n            var antiAliasingPadding = 1;\n            circle.size = Math.ceil(circleRadius * 2 + antiAliasingPadding);\n        }\n    };\n    PieSeries.prototype.updateInnerLabelNodes = function () {\n        var textBBoxes = [];\n        var margins = [];\n        this.innerLabelsSelection.each(function (text, datum) {\n            var fontStyle = datum.fontStyle, fontWeight = datum.fontWeight, fontSize = datum.fontSize, fontFamily = datum.fontFamily, color = datum.color;\n            text.fontStyle = fontStyle;\n            text.fontWeight = fontWeight;\n            text.fontSize = fontSize;\n            text.fontFamily = fontFamily;\n            text.text = datum.text;\n            text.x = 0;\n            text.y = 0;\n            text.fill = color;\n            text.textAlign = 'center';\n            text.textBaseline = 'alphabetic';\n            textBBoxes.push(text.computeBBox());\n            margins.push(datum.margin);\n        });\n        var getMarginTop = function (index) { return (index === 0 ? 0 : margins[index]); };\n        var getMarginBottom = function (index) { return (index === margins.length - 1 ? 0 : margins[index]); };\n        var totalHeight = textBBoxes.reduce(function (sum, bbox, i) {\n            return sum + bbox.height + getMarginTop(i) + getMarginBottom(i);\n        }, 0);\n        var totalWidth = Math.max.apply(Math, __spread(textBBoxes.map(function (bbox) { return bbox.width; })));\n        var innerRadius = this.getInnerRadius();\n        var labelRadius = Math.sqrt(Math.pow(totalWidth / 2, 2) + Math.pow(totalHeight / 2, 2));\n        var labelsVisible = labelRadius <= (innerRadius > 0 ? innerRadius : this.getOuterRadius());\n        var textBottoms = [];\n        for (var i = 0, prev = -totalHeight / 2; i < textBBoxes.length; i++) {\n            var bbox = textBBoxes[i];\n            var bottom = bbox.height + prev + getMarginTop(i);\n            textBottoms.push(bottom);\n            prev = bottom + getMarginBottom(i);\n        }\n        this.innerLabelsSelection.each(function (text, _datum, index) {\n            text.y = textBottoms[index];\n            text.visible = labelsVisible;\n        });\n    };\n    PieSeries.prototype.getNodeClickEvent = function (event, datum) {\n        return new PieSeriesNodeClickEvent(this.angleKey, this.calloutLabelKey, this.sectorLabelKey, this.radiusKey, event, datum, this);\n    };\n    PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var angleKey = this.angleKey;\n        if (!angleKey) {\n            return '';\n        }\n        var _a = this, tooltip = _a.tooltip, angleName = _a.angleName, radiusKey = _a.radiusKey, radiusName = _a.radiusName, calloutLabelKey = _a.calloutLabelKey, sectorLabelKey = _a.sectorLabelKey, calloutLabelName = _a.calloutLabelName, sectorLabelName = _a.sectorLabelName, seriesId = _a.id;\n        var tooltipRenderer = tooltip.renderer;\n        var color = nodeDatum.sectorFormat.fill;\n        var datum = nodeDatum.datum;\n        var label = calloutLabelKey ? datum[calloutLabelKey] + \": \" : '';\n        var angleValue = datum[angleKey];\n        var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n        var title = this.title ? this.title.text : undefined;\n        var content = label + formattedAngleValue;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content,\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                angleKey: angleKey,\n                angleValue: angleValue,\n                angleName: angleName,\n                radiusKey: radiusKey,\n                radiusValue: radiusKey ? datum[radiusKey] : undefined,\n                radiusName: radiusName,\n                labelKey: calloutLabelKey,\n                labelName: calloutLabelName,\n                calloutLabelKey: calloutLabelKey,\n                calloutLabelName: calloutLabelName,\n                sectorLabelKey: sectorLabelKey,\n                sectorLabelName: sectorLabelName,\n                title: title,\n                color: color,\n                seriesId: seriesId,\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    PieSeries.prototype.getLegendData = function () {\n        var _this = this;\n        var _a = this, calloutLabelKey = _a.calloutLabelKey, data = _a.data, sectorFormatData = _a.sectorFormatData;\n        if (data && data.length && calloutLabelKey) {\n            var id_1 = this.id;\n            var legendData_1 = [];\n            var titleText_1 = this.title && this.title.showInLegend && this.title.text;\n            data.forEach(function (datum, index) {\n                var labelParts = [];\n                titleText_1 && labelParts.push(titleText_1);\n                labelParts.push(String(datum[calloutLabelKey]));\n                legendData_1.push({\n                    id: id_1,\n                    itemId: index,\n                    seriesId: id_1,\n                    enabled: _this.seriesItemEnabled[index],\n                    label: {\n                        text: labelParts.join(' - '),\n                    },\n                    marker: {\n                        fill: sectorFormatData[index].fill,\n                        stroke: sectorFormatData[index].stroke,\n                        fillOpacity: _this.fillOpacity,\n                        strokeOpacity: _this.strokeOpacity,\n                    },\n                });\n            });\n            return legendData_1;\n        }\n        return [];\n    };\n    PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.seriesItemEnabled[itemId] = enabled;\n        this.nodeDataRefresh = true;\n    };\n    PieSeries.className = 'PieSeries';\n    PieSeries.type = 'pie';\n    __decorate([\n        DeprecatedAndRenamedTo('calloutLabel')\n    ], PieSeries.prototype, \"label\", void 0);\n    __decorate([\n        DeprecatedAndRenamedTo('calloutLine')\n    ], PieSeries.prototype, \"callout\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], PieSeries.prototype, \"angleKey\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], PieSeries.prototype, \"angleName\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"radiusKey\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"radiusName\", void 0);\n    __decorate([\n        Validate(OPT_NUMBER(0))\n    ], PieSeries.prototype, \"radiusMin\", void 0);\n    __decorate([\n        Validate(OPT_NUMBER(0))\n    ], PieSeries.prototype, \"radiusMax\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"calloutLabelKey\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"calloutLabelName\", void 0);\n    __decorate([\n        DeprecatedAndRenamedTo('calloutLabelKey')\n    ], PieSeries.prototype, \"labelKey\", void 0);\n    __decorate([\n        DeprecatedAndRenamedTo('calloutLabelName')\n    ], PieSeries.prototype, \"labelName\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"sectorLabelKey\", void 0);\n    __decorate([\n        Validate(OPT_STRING)\n    ], PieSeries.prototype, \"sectorLabelName\", void 0);\n    __decorate([\n        Validate(COLOR_STRING_ARRAY)\n    ], PieSeries.prototype, \"fills\", void 0);\n    __decorate([\n        Validate(COLOR_STRING_ARRAY)\n    ], PieSeries.prototype, \"strokes\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], PieSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], PieSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        Validate(OPT_LINE_DASH)\n    ], PieSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], PieSeries.prototype, \"formatter\", void 0);\n    __decorate([\n        Validate(NUMBER(-360, 360))\n    ], PieSeries.prototype, \"rotation\", void 0);\n    __decorate([\n        Validate(NUMBER())\n    ], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeries.prototype, \"outerRadiusRatio\", void 0);\n    __decorate([\n        Validate(NUMBER())\n    ], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeries.prototype, \"innerRadiusRatio\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], PieSeries.prototype, \"strokeWidth\", void 0);\n    return PieSeries;\n}(PolarSeries));\nexport { PieSeries };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}