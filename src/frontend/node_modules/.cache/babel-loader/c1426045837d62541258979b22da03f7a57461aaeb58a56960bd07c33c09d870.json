{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nimport { Rect } from '../../../scene/shape/rect';\nimport { Text } from '../../../scene/shape/text';\nimport { SeriesTooltip, Series, SeriesNodePickMode } from '../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { CartesianSeries, CartesianSeriesNodeClickEvent } from './cartesianSeries';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { extent } from '../../../util/array';\nimport ticks, { tickStep } from '../../../util/ticks';\nimport { sanitizeHtml } from '../../../util/sanitize';\nimport { isContinuous } from '../../../util/value';\nimport { BOOLEAN, NUMBER, OPT_ARRAY, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, OPT_COLOR_STRING, STRING, Validate, predicateWithMessage } from '../../../util/validation';\nvar HISTOGRAM_AGGREGATIONS = ['count', 'sum', 'mean'];\nvar HISTOGRAM_AGGREGATION = predicateWithMessage(function (v) {\n  return HISTOGRAM_AGGREGATIONS.includes(v);\n}, \"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean\");\nvar HistogramSeriesNodeTag;\n(function (HistogramSeriesNodeTag) {\n  HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Bin\"] = 0] = \"Bin\";\n  HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(HistogramSeriesNodeTag || (HistogramSeriesNodeTag = {}));\nvar HistogramSeriesLabel = /** @class */function (_super) {\n  __extends(HistogramSeriesLabel, _super);\n  function HistogramSeriesLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.formatter = undefined;\n    return _this;\n  }\n  __decorate([Validate(OPT_FUNCTION)], HistogramSeriesLabel.prototype, \"formatter\", void 0);\n  return HistogramSeriesLabel;\n}(Label);\nvar defaultBinCount = 10;\nvar aggregationFunctions = {\n  count: function (bin) {\n    return bin.data.length;\n  },\n  sum: function (bin, yKey) {\n    return bin.data.reduce(function (acc, datum) {\n      return acc + datum[yKey];\n    }, 0);\n  },\n  mean: function (bin, yKey) {\n    return aggregationFunctions.sum(bin, yKey) / aggregationFunctions.count(bin, yKey);\n  }\n};\nvar HistogramBin = /** @class */function () {\n  function HistogramBin(_a) {\n    var _b = __read(_a, 2),\n      domainMin = _b[0],\n      domainMax = _b[1];\n    this.data = [];\n    this.aggregatedValue = 0;\n    this.frequency = 0;\n    this.domain = [domainMin, domainMax];\n  }\n  HistogramBin.prototype.addDatum = function (datum) {\n    this.data.push(datum);\n    this.frequency++;\n  };\n  Object.defineProperty(HistogramBin.prototype, \"domainWidth\", {\n    get: function () {\n      var _a = __read(this.domain, 2),\n        domainMin = _a[0],\n        domainMax = _a[1];\n      return domainMax - domainMin;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramBin.prototype, \"relativeHeight\", {\n    get: function () {\n      return this.aggregatedValue / this.domainWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HistogramBin.prototype.calculateAggregatedValue = function (aggregationName, yKey) {\n    if (!yKey) {\n      // not having a yKey forces us into a frequency plot\n      aggregationName = 'count';\n    }\n    var aggregationFunction = aggregationFunctions[aggregationName];\n    this.aggregatedValue = aggregationFunction(this, yKey);\n  };\n  HistogramBin.prototype.getY = function (areaPlot) {\n    return areaPlot ? this.relativeHeight : this.aggregatedValue;\n  };\n  return HistogramBin;\n}();\nexport { HistogramBin };\nvar HistogramSeriesTooltip = /** @class */function (_super) {\n  __extends(HistogramSeriesTooltip, _super);\n  function HistogramSeriesTooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.renderer = undefined;\n    return _this;\n  }\n  __decorate([Validate(OPT_FUNCTION)], HistogramSeriesTooltip.prototype, \"renderer\", void 0);\n  return HistogramSeriesTooltip;\n}(SeriesTooltip);\nexport { HistogramSeriesTooltip };\nvar HistogramSeries = /** @class */function (_super) {\n  __extends(HistogramSeries, _super);\n  function HistogramSeries() {\n    var _a;\n    var _this = _super.call(this, {\n      pickModes: [SeriesNodePickMode.EXACT_SHAPE_MATCH]\n    }) || this;\n    _this.binnedData = [];\n    _this.xDomain = [];\n    _this.yDomain = [];\n    _this.label = new HistogramSeriesLabel();\n    _this.tooltip = new HistogramSeriesTooltip();\n    _this.fill = undefined;\n    _this.stroke = undefined;\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = [0];\n    _this.lineDashOffset = 0;\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKey'], _a);\n    _this.xKey = '';\n    _this.areaPlot = false;\n    _this.bins = undefined;\n    _this.aggregation = 'count';\n    _this.binCount = undefined;\n    _this.xName = '';\n    _this.yKey = '';\n    _this.yName = '';\n    _this.strokeWidth = 1;\n    _this.shadow = undefined;\n    _this.label.enabled = false;\n    return _this;\n  }\n  HistogramSeries.prototype.getKeys = function (direction) {\n    var _this = this;\n    var directionKeys = this.directionKeys;\n    var keys = directionKeys && directionKeys[direction];\n    var values = [];\n    if (keys) {\n      keys.forEach(function (key) {\n        var value = _this[key];\n        if (value) {\n          if (Array.isArray(value)) {\n            values.push.apply(values, __spread(value));\n          } else {\n            values.push(value);\n          }\n        }\n      });\n    }\n    return values;\n  };\n  HistogramSeries.prototype.setColors = function (fills, strokes) {\n    this.fill = fills[0];\n    this.stroke = strokes[0];\n  };\n  // During processData phase, used to unify different ways of the user specifying\n  // the bins. Returns bins in format[[min1, max1], [min2, max2], ... ].\n  HistogramSeries.prototype.deriveBins = function () {\n    var _this = this;\n    var bins = this.bins;\n    if (!this.data) {\n      return [];\n    }\n    var xData = this.data.map(function (datum) {\n      return datum[_this.xKey];\n    });\n    var xDomain = this.fixNumericExtent(extent(xData, isContinuous));\n    if (this.binCount === undefined) {\n      if (bins) {\n        return bins;\n      }\n      var binStarts = ticks(xDomain[0], xDomain[1], defaultBinCount);\n      var binSize_1 = tickStep(xDomain[0], xDomain[1], defaultBinCount);\n      var firstBinEnd = binStarts[0];\n      var expandStartToBin = function (n) {\n        return [n, n + binSize_1];\n      };\n      return __spread([[firstBinEnd - binSize_1, firstBinEnd]], binStarts.map(expandStartToBin));\n    } else {\n      return this.calculateNiceBins(xDomain, this.binCount);\n    }\n  };\n  HistogramSeries.prototype.calculateNiceBins = function (domain, binCount) {\n    var _a;\n    var start = Math.floor(domain[0]);\n    var stop = domain[1];\n    var binSize;\n    var segments = binCount || 1;\n    _a = this.calculateNiceStart(start, stop, segments), start = _a.start, binSize = _a.binSize;\n    return this.getBins(start, stop, binSize, segments);\n  };\n  HistogramSeries.prototype.getBins = function (start, stop, step, count) {\n    var bins = [];\n    for (var i = 0; i < count; i++) {\n      var a = Math.round((start + i * step) * 10) / 10;\n      var b = Math.round((start + (i + 1) * step) * 10) / 10;\n      if (i === count - 1) {\n        b = Math.max(b, stop);\n      }\n      bins[i] = [a, b];\n    }\n    return bins;\n  };\n  HistogramSeries.prototype.calculateNiceStart = function (a, b, segments) {\n    var binSize = Math.abs(b - a) / segments;\n    var order = Math.floor(Math.log10(binSize));\n    var magnitude = Math.pow(10, order);\n    var start = Math.floor(a / magnitude) * magnitude;\n    return {\n      start: start,\n      binSize: binSize\n    };\n  };\n  HistogramSeries.prototype.placeDataInBins = function (data) {\n    var _this = this;\n    var xKey = this.xKey;\n    var derivedBins = this.deriveBins();\n    this.bins = derivedBins;\n    // creating a sorted copy allows binning in O(n) rather than O(n²)\n    // but at the expense of more temporary memory\n    var sortedData = data.slice().sort(function (a, b) {\n      if (a[xKey] < b[xKey]) {\n        return -1;\n      }\n      if (a[xKey] > b[xKey]) {\n        return 1;\n      }\n      return 0;\n    });\n    var bins = [new HistogramBin(derivedBins[0])];\n    var currentBin = 0;\n    for (var i = 0; i < sortedData.length && currentBin < derivedBins.length; i++) {\n      var datum = sortedData[i];\n      while (datum[xKey] > derivedBins[currentBin][1] && currentBin < derivedBins.length) {\n        currentBin++;\n        bins.push(new HistogramBin(derivedBins[currentBin]));\n      }\n      if (currentBin < derivedBins.length) {\n        bins[currentBin].addDatum(datum);\n      }\n    }\n    bins.forEach(function (b) {\n      return b.calculateAggregatedValue(_this.aggregation, _this.yKey);\n    });\n    return bins;\n  };\n  Object.defineProperty(HistogramSeries.prototype, \"xMax\", {\n    get: function () {\n      var _this = this;\n      return this.data && this.data.reduce(function (acc, datum) {\n        return Math.max(acc, datum[_this.xKey]);\n      }, Number.NEGATIVE_INFINITY);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HistogramSeries.prototype.processData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, xKey, data, yData, yMinMax, firstBin, lastBin, xMin, xMax;\n      var _this = this;\n      return __generator(this, function (_b) {\n        _a = this, xKey = _a.xKey, data = _a.data;\n        this.binnedData = this.placeDataInBins(xKey && data ? data : []);\n        yData = this.binnedData.map(function (b) {\n          return b.getY(_this.areaPlot);\n        });\n        yMinMax = extent(yData, isContinuous);\n        this.yDomain = this.fixNumericExtent([0, yMinMax ? yMinMax[1] : 1]);\n        firstBin = this.binnedData[0];\n        lastBin = this.binnedData[this.binnedData.length - 1];\n        xMin = firstBin.domain[0];\n        xMax = lastBin.domain[1];\n        this.xDomain = [xMin, xMax];\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  HistogramSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.xDomain;\n    } else {\n      return this.yDomain;\n    }\n  };\n  HistogramSeries.prototype.getNodeClickEvent = function (event, datum) {\n    return new CartesianSeriesNodeClickEvent(this.xKey, this.yKey, event, datum, this);\n  };\n  HistogramSeries.prototype.createNodeData = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, xAxis, yAxis, xScale, yScale, _b, fill, stroke, strokeWidth, seriesId, nodeData, defaultLabelFormatter, _c, _d, labelFormatter, labelFontStyle, labelFontWeight, labelFontSize, labelFontFamily, labelColor;\n      var _this = this;\n      return __generator(this, function (_e) {\n        _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        if (!this.seriesItemEnabled || !xAxis || !yAxis) {\n          return [2 /*return*/, []];\n        }\n        xScale = xAxis.scale;\n        yScale = yAxis.scale;\n        _b = this, fill = _b.fill, stroke = _b.stroke, strokeWidth = _b.strokeWidth, seriesId = _b.id;\n        nodeData = [];\n        defaultLabelFormatter = function (params) {\n          return String(params.value);\n        };\n        _c = this.label, _d = _c.formatter, labelFormatter = _d === void 0 ? defaultLabelFormatter : _d, labelFontStyle = _c.fontStyle, labelFontWeight = _c.fontWeight, labelFontSize = _c.fontSize, labelFontFamily = _c.fontFamily, labelColor = _c.color;\n        this.binnedData.forEach(function (binOfData) {\n          var total = binOfData.aggregatedValue,\n            frequency = binOfData.frequency,\n            _a = __read(binOfData.domain, 2),\n            xDomainMin = _a[0],\n            xDomainMax = _a[1],\n            relativeHeight = binOfData.relativeHeight;\n          var xMinPx = xScale.convert(xDomainMin),\n            xMaxPx = xScale.convert(xDomainMax),\n            // note: assuming can't be negative:\n            y = _this.areaPlot ? relativeHeight : _this.yKey ? total : frequency,\n            yZeroPx = yScale.convert(0),\n            yMaxPx = yScale.convert(y),\n            w = xMaxPx - xMinPx,\n            h = Math.abs(yMaxPx - yZeroPx);\n          var selectionDatumLabel = y !== 0 ? {\n            text: labelFormatter({\n              value: binOfData.aggregatedValue,\n              seriesId: seriesId\n            }),\n            fontStyle: labelFontStyle,\n            fontWeight: labelFontWeight,\n            fontSize: labelFontSize,\n            fontFamily: labelFontFamily,\n            fill: labelColor,\n            x: xMinPx + w / 2,\n            y: yMaxPx + h / 2\n          } : undefined;\n          nodeData.push({\n            series: _this,\n            datum: binOfData,\n            // since each selection is an aggregation of multiple data.\n            x: xMinPx,\n            y: yMaxPx,\n            width: w,\n            height: h,\n            fill: fill,\n            stroke: stroke,\n            strokeWidth: strokeWidth,\n            label: selectionDatumLabel\n          });\n        });\n        return [2 /*return*/, [{\n          itemId: this.yKey,\n          nodeData: nodeData,\n          labelData: nodeData\n        }]];\n      });\n    });\n  };\n  HistogramSeries.prototype.updateDatumSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var nodeData, datumSelection, updateRects, enterRects;\n      return __generator(this, function (_a) {\n        nodeData = opts.nodeData, datumSelection = opts.datumSelection;\n        updateRects = datumSelection.setData(nodeData);\n        updateRects.exit.remove();\n        enterRects = updateRects.enter.append(Rect).each(function (rect) {\n          rect.tag = HistogramSeriesNodeTag.Bin;\n          rect.crisp = true;\n        });\n        return [2 /*return*/, updateRects.merge(enterRects)];\n      });\n    });\n  };\n  HistogramSeries.prototype.updateDatumNodes = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var datumSelection, isDatumHighlighted, _a, seriesFillOpacity, strokeOpacity, shadow, _b, deprecatedFill, deprecatedStroke, deprecatedStrokeWidth, _c, _d, highlightedFill, _e, highlightFillOpacity, _f, highlightedStroke, _g, highlightedDatumStrokeWidth;\n      var _this = this;\n      return __generator(this, function (_h) {\n        datumSelection = opts.datumSelection, isDatumHighlighted = opts.isHighlight;\n        _a = this, seriesFillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, shadow = _a.shadow, _b = _a.highlightStyle, deprecatedFill = _b.fill, deprecatedStroke = _b.stroke, deprecatedStrokeWidth = _b.strokeWidth, _c = _b.item, _d = _c.fill, highlightedFill = _d === void 0 ? deprecatedFill : _d, _e = _c.fillOpacity, highlightFillOpacity = _e === void 0 ? seriesFillOpacity : _e, _f = _c.stroke, highlightedStroke = _f === void 0 ? deprecatedStroke : _f, _g = _c.strokeWidth, highlightedDatumStrokeWidth = _g === void 0 ? deprecatedStrokeWidth : _g;\n        datumSelection.each(function (rect, datum, index) {\n          var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined ? highlightedDatumStrokeWidth : datum.strokeWidth;\n          var fillOpacity = isDatumHighlighted ? highlightFillOpacity : seriesFillOpacity;\n          rect.x = datum.x;\n          rect.y = datum.y;\n          rect.width = datum.width;\n          rect.height = datum.height;\n          rect.fill = isDatumHighlighted && highlightedFill !== undefined ? highlightedFill : datum.fill;\n          rect.stroke = isDatumHighlighted && highlightedStroke !== undefined ? highlightedStroke : datum.stroke;\n          rect.fillOpacity = fillOpacity;\n          rect.strokeOpacity = strokeOpacity;\n          rect.strokeWidth = strokeWidth;\n          rect.lineDash = _this.lineDash;\n          rect.lineDashOffset = _this.lineDashOffset;\n          rect.fillShadow = shadow;\n          rect.zIndex = isDatumHighlighted ? Series.highlightedZIndex : index;\n          rect.visible = datum.height > 0; // prevent stroke from rendering for zero height columns\n        });\n\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  HistogramSeries.prototype.updateLabelSelection = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var labelData, labelSelection, updateTexts, enterTexts;\n      return __generator(this, function (_a) {\n        labelData = opts.labelData, labelSelection = opts.labelSelection;\n        updateTexts = labelSelection.setData(labelData);\n        updateTexts.exit.remove();\n        enterTexts = updateTexts.enter.append(Text).each(function (text) {\n          text.tag = HistogramSeriesNodeTag.Label;\n          text.pointerEvents = PointerEvents.None;\n          text.textAlign = 'center';\n          text.textBaseline = 'middle';\n        });\n        return [2 /*return*/, updateTexts.merge(enterTexts)];\n      });\n    });\n  };\n  HistogramSeries.prototype.updateLabelNodes = function (opts) {\n    return __awaiter(this, void 0, void 0, function () {\n      var labelSelection, labelEnabled;\n      return __generator(this, function (_a) {\n        labelSelection = opts.labelSelection;\n        labelEnabled = this.label.enabled;\n        labelSelection.each(function (text, datum) {\n          var label = datum.label;\n          if (label && labelEnabled) {\n            text.text = label.text;\n            text.x = label.x;\n            text.y = label.y;\n            text.fontStyle = label.fontStyle;\n            text.fontWeight = label.fontWeight;\n            text.fontSize = label.fontSize;\n            text.fontFamily = label.fontFamily;\n            text.fill = label.fill;\n            text.visible = true;\n          } else {\n            text.visible = false;\n          }\n        });\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  HistogramSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var _a = this,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    if (!xKey || !xAxis || !yAxis) {\n      return '';\n    }\n    var _b = this,\n      xName = _b.xName,\n      yName = _b.yName,\n      color = _b.fill,\n      tooltip = _b.tooltip,\n      aggregation = _b.aggregation,\n      seriesId = _b.id;\n    var tooltipRenderer = tooltip.renderer;\n    var bin = nodeDatum.datum;\n    var aggregatedValue = bin.aggregatedValue,\n      frequency = bin.frequency,\n      _c = __read(bin.domain, 2),\n      rangeMin = _c[0],\n      rangeMax = _c[1];\n    var title = sanitizeHtml(xName || xKey) + \": \" + xAxis.formatDatum(rangeMin) + \" - \" + xAxis.formatDatum(rangeMax);\n    var content = yKey ? \"<b>\" + sanitizeHtml(yName || yKey) + \" (\" + aggregation + \")</b>: \" + yAxis.formatDatum(aggregatedValue) + \"<br>\" : '';\n    content += \"<b>Frequency</b>: \" + frequency;\n    var defaults = {\n      title: title,\n      backgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: bin,\n        xKey: xKey,\n        xValue: bin.domain,\n        xName: xName,\n        yKey: yKey,\n        yValue: bin.aggregatedValue,\n        yName: yName,\n        color: color,\n        title: title,\n        seriesId: seriesId\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  HistogramSeries.prototype.getLegendData = function () {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      xKey = _a.xKey,\n      yName = _a.yName,\n      visible = _a.visible,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    if (!data || data.length === 0) {\n      return [];\n    }\n    return [{\n      id: id,\n      itemId: xKey,\n      seriesId: id,\n      enabled: visible,\n      label: {\n        text: yName || xKey || 'Frequency'\n      },\n      marker: {\n        fill: fill || 'rgba(0, 0, 0, 0)',\n        stroke: stroke || 'rgba(0, 0, 0, 0)',\n        fillOpacity: fillOpacity,\n        strokeOpacity: strokeOpacity\n      }\n    }];\n  };\n  HistogramSeries.prototype.isLabelEnabled = function () {\n    return this.label.enabled;\n  };\n  HistogramSeries.className = 'HistogramSeries';\n  HistogramSeries.type = 'histogram';\n  __decorate([Validate(OPT_COLOR_STRING)], HistogramSeries.prototype, \"fill\", void 0);\n  __decorate([Validate(OPT_COLOR_STRING)], HistogramSeries.prototype, \"stroke\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], HistogramSeries.prototype, \"fillOpacity\", void 0);\n  __decorate([Validate(NUMBER(0, 1))], HistogramSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate([Validate(OPT_LINE_DASH)], HistogramSeries.prototype, \"lineDash\", void 0);\n  __decorate([Validate(NUMBER(0))], HistogramSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate([Validate(STRING)], HistogramSeries.prototype, \"xKey\", void 0);\n  __decorate([Validate(BOOLEAN)], HistogramSeries.prototype, \"areaPlot\", void 0);\n  __decorate([Validate(OPT_ARRAY())], HistogramSeries.prototype, \"bins\", void 0);\n  __decorate([Validate(HISTOGRAM_AGGREGATION)], HistogramSeries.prototype, \"aggregation\", void 0);\n  __decorate([Validate(OPT_NUMBER(0))], HistogramSeries.prototype, \"binCount\", void 0);\n  __decorate([Validate(STRING)], HistogramSeries.prototype, \"xName\", void 0);\n  __decorate([Validate(STRING)], HistogramSeries.prototype, \"yKey\", void 0);\n  __decorate([Validate(STRING)], HistogramSeries.prototype, \"yName\", void 0);\n  __decorate([Validate(NUMBER(0))], HistogramSeries.prototype, \"strokeWidth\", void 0);\n  return HistogramSeries;\n}(CartesianSeries);\nexport { HistogramSeries };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","__read","o","m","ar","error","__spread","concat","Rect","Text","SeriesTooltip","Series","SeriesNodePickMode","Label","PointerEvents","CartesianSeries","CartesianSeriesNodeClickEvent","ChartAxisDirection","toTooltipHtml","extent","ticks","tickStep","sanitizeHtml","isContinuous","BOOLEAN","NUMBER","OPT_ARRAY","OPT_FUNCTION","OPT_LINE_DASH","OPT_NUMBER","OPT_COLOR_STRING","STRING","Validate","predicateWithMessage","HISTOGRAM_AGGREGATIONS","HISTOGRAM_AGGREGATION","includes","HistogramSeriesNodeTag","HistogramSeriesLabel","_super","_this","formatter","undefined","defaultBinCount","aggregationFunctions","count","bin","data","sum","yKey","reduce","acc","datum","mean","HistogramBin","_a","_b","domainMin","domainMax","aggregatedValue","frequency","domain","addDatum","get","enumerable","configurable","domainWidth","calculateAggregatedValue","aggregationName","aggregationFunction","getY","areaPlot","relativeHeight","HistogramSeriesTooltip","renderer","HistogramSeries","pickModes","EXACT_SHAPE_MATCH","binnedData","xDomain","yDomain","tooltip","fill","stroke","fillOpacity","strokeOpacity","lineDash","lineDashOffset","directionKeys","X","Y","xKey","bins","aggregation","binCount","xName","yName","strokeWidth","shadow","enabled","getKeys","direction","keys","values","forEach","isArray","setColors","fills","strokes","deriveBins","xData","map","fixNumericExtent","binStarts","binSize_1","firstBinEnd","expandStartToBin","calculateNiceBins","start","Math","floor","stop","binSize","segments","calculateNiceStart","getBins","a","round","max","abs","order","log10","magnitude","pow","placeDataInBins","derivedBins","sortedData","slice","sort","currentBin","Number","NEGATIVE_INFINITY","processData","yData","yMinMax","firstBin","lastBin","xMin","xMax","getDomain","getNodeClickEvent","event","createNodeData","xAxis","yAxis","xScale","yScale","seriesId","nodeData","defaultLabelFormatter","_c","_d","labelFormatter","labelFontStyle","labelFontWeight","labelFontSize","labelFontFamily","labelColor","_e","seriesItemEnabled","scale","id","params","String","fontStyle","fontWeight","fontSize","fontFamily","color","binOfData","total","xDomainMin","xDomainMax","xMinPx","convert","xMaxPx","yZeroPx","yMaxPx","w","h","selectionDatumLabel","text","x","series","width","height","itemId","labelData","updateDatumSelection","opts","datumSelection","updateRects","enterRects","setData","exit","remove","enter","append","each","rect","tag","Bin","crisp","merge","updateDatumNodes","isDatumHighlighted","seriesFillOpacity","deprecatedFill","deprecatedStroke","deprecatedStrokeWidth","highlightedFill","highlightFillOpacity","_f","highlightedStroke","_g","highlightedDatumStrokeWidth","_h","isHighlight","highlightStyle","item","index","fillShadow","zIndex","highlightedZIndex","visible","updateLabelSelection","labelSelection","updateTexts","enterTexts","pointerEvents","None","textAlign","textBaseline","updateLabelNodes","labelEnabled","getTooltipHtml","nodeDatum","tooltipRenderer","rangeMin","rangeMax","title","formatDatum","content","defaults","backgroundColor","xValue","yValue","getLegendData","marker","isLabelEnabled","className","type"],"sources":["C:/Users/guzny/OneDrive/Рабочий стол/frontend/node_modules/ag-charts-community/dist/esm/es5/chart/series/cartesian/histogramSeries.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { Rect } from '../../../scene/shape/rect';\nimport { Text } from '../../../scene/shape/text';\nimport { SeriesTooltip, Series, SeriesNodePickMode, } from '../series';\nimport { Label } from '../../label';\nimport { PointerEvents } from '../../../scene/node';\nimport { CartesianSeries, CartesianSeriesNodeClickEvent } from './cartesianSeries';\nimport { ChartAxisDirection } from '../../chartAxis';\nimport { toTooltipHtml } from '../../tooltip/tooltip';\nimport { extent } from '../../../util/array';\nimport ticks, { tickStep } from '../../../util/ticks';\nimport { sanitizeHtml } from '../../../util/sanitize';\nimport { isContinuous } from '../../../util/value';\nimport { BOOLEAN, NUMBER, OPT_ARRAY, OPT_FUNCTION, OPT_LINE_DASH, OPT_NUMBER, OPT_COLOR_STRING, STRING, Validate, predicateWithMessage, } from '../../../util/validation';\nvar HISTOGRAM_AGGREGATIONS = ['count', 'sum', 'mean'];\nvar HISTOGRAM_AGGREGATION = predicateWithMessage(function (v) { return HISTOGRAM_AGGREGATIONS.includes(v); }, \"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean\");\nvar HistogramSeriesNodeTag;\n(function (HistogramSeriesNodeTag) {\n    HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Bin\"] = 0] = \"Bin\";\n    HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(HistogramSeriesNodeTag || (HistogramSeriesNodeTag = {}));\nvar HistogramSeriesLabel = /** @class */ (function (_super) {\n    __extends(HistogramSeriesLabel, _super);\n    function HistogramSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.formatter = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], HistogramSeriesLabel.prototype, \"formatter\", void 0);\n    return HistogramSeriesLabel;\n}(Label));\nvar defaultBinCount = 10;\nvar aggregationFunctions = {\n    count: function (bin) { return bin.data.length; },\n    sum: function (bin, yKey) { return bin.data.reduce(function (acc, datum) { return acc + datum[yKey]; }, 0); },\n    mean: function (bin, yKey) { return aggregationFunctions.sum(bin, yKey) / aggregationFunctions.count(bin, yKey); },\n};\nvar HistogramBin = /** @class */ (function () {\n    function HistogramBin(_a) {\n        var _b = __read(_a, 2), domainMin = _b[0], domainMax = _b[1];\n        this.data = [];\n        this.aggregatedValue = 0;\n        this.frequency = 0;\n        this.domain = [domainMin, domainMax];\n    }\n    HistogramBin.prototype.addDatum = function (datum) {\n        this.data.push(datum);\n        this.frequency++;\n    };\n    Object.defineProperty(HistogramBin.prototype, \"domainWidth\", {\n        get: function () {\n            var _a = __read(this.domain, 2), domainMin = _a[0], domainMax = _a[1];\n            return domainMax - domainMin;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramBin.prototype, \"relativeHeight\", {\n        get: function () {\n            return this.aggregatedValue / this.domainWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HistogramBin.prototype.calculateAggregatedValue = function (aggregationName, yKey) {\n        if (!yKey) {\n            // not having a yKey forces us into a frequency plot\n            aggregationName = 'count';\n        }\n        var aggregationFunction = aggregationFunctions[aggregationName];\n        this.aggregatedValue = aggregationFunction(this, yKey);\n    };\n    HistogramBin.prototype.getY = function (areaPlot) {\n        return areaPlot ? this.relativeHeight : this.aggregatedValue;\n    };\n    return HistogramBin;\n}());\nexport { HistogramBin };\nvar HistogramSeriesTooltip = /** @class */ (function (_super) {\n    __extends(HistogramSeriesTooltip, _super);\n    function HistogramSeriesTooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderer = undefined;\n        return _this;\n    }\n    __decorate([\n        Validate(OPT_FUNCTION)\n    ], HistogramSeriesTooltip.prototype, \"renderer\", void 0);\n    return HistogramSeriesTooltip;\n}(SeriesTooltip));\nexport { HistogramSeriesTooltip };\nvar HistogramSeries = /** @class */ (function (_super) {\n    __extends(HistogramSeries, _super);\n    function HistogramSeries() {\n        var _a;\n        var _this = _super.call(this, { pickModes: [SeriesNodePickMode.EXACT_SHAPE_MATCH] }) || this;\n        _this.binnedData = [];\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.label = new HistogramSeriesLabel();\n        _this.tooltip = new HistogramSeriesTooltip();\n        _this.fill = undefined;\n        _this.stroke = undefined;\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = [0];\n        _this.lineDashOffset = 0;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKey'],\n            _a);\n        _this.xKey = '';\n        _this.areaPlot = false;\n        _this.bins = undefined;\n        _this.aggregation = 'count';\n        _this.binCount = undefined;\n        _this.xName = '';\n        _this.yKey = '';\n        _this.yName = '';\n        _this.strokeWidth = 1;\n        _this.shadow = undefined;\n        _this.label.enabled = false;\n        return _this;\n    }\n    HistogramSeries.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, __spread(value));\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    HistogramSeries.prototype.setColors = function (fills, strokes) {\n        this.fill = fills[0];\n        this.stroke = strokes[0];\n    };\n    // During processData phase, used to unify different ways of the user specifying\n    // the bins. Returns bins in format[[min1, max1], [min2, max2], ... ].\n    HistogramSeries.prototype.deriveBins = function () {\n        var _this = this;\n        var bins = this.bins;\n        if (!this.data) {\n            return [];\n        }\n        var xData = this.data.map(function (datum) { return datum[_this.xKey]; });\n        var xDomain = this.fixNumericExtent(extent(xData, isContinuous));\n        if (this.binCount === undefined) {\n            if (bins) {\n                return bins;\n            }\n            var binStarts = ticks(xDomain[0], xDomain[1], defaultBinCount);\n            var binSize_1 = tickStep(xDomain[0], xDomain[1], defaultBinCount);\n            var firstBinEnd = binStarts[0];\n            var expandStartToBin = function (n) { return [n, n + binSize_1]; };\n            return __spread([[firstBinEnd - binSize_1, firstBinEnd]], binStarts.map(expandStartToBin));\n        }\n        else {\n            return this.calculateNiceBins(xDomain, this.binCount);\n        }\n    };\n    HistogramSeries.prototype.calculateNiceBins = function (domain, binCount) {\n        var _a;\n        var start = Math.floor(domain[0]);\n        var stop = domain[1];\n        var binSize;\n        var segments = binCount || 1;\n        (_a = this.calculateNiceStart(start, stop, segments), start = _a.start, binSize = _a.binSize);\n        return this.getBins(start, stop, binSize, segments);\n    };\n    HistogramSeries.prototype.getBins = function (start, stop, step, count) {\n        var bins = [];\n        for (var i = 0; i < count; i++) {\n            var a = Math.round((start + i * step) * 10) / 10;\n            var b = Math.round((start + (i + 1) * step) * 10) / 10;\n            if (i === count - 1) {\n                b = Math.max(b, stop);\n            }\n            bins[i] = [a, b];\n        }\n        return bins;\n    };\n    HistogramSeries.prototype.calculateNiceStart = function (a, b, segments) {\n        var binSize = Math.abs(b - a) / segments;\n        var order = Math.floor(Math.log10(binSize));\n        var magnitude = Math.pow(10, order);\n        var start = Math.floor(a / magnitude) * magnitude;\n        return {\n            start: start,\n            binSize: binSize,\n        };\n    };\n    HistogramSeries.prototype.placeDataInBins = function (data) {\n        var _this = this;\n        var xKey = this.xKey;\n        var derivedBins = this.deriveBins();\n        this.bins = derivedBins;\n        // creating a sorted copy allows binning in O(n) rather than O(n²)\n        // but at the expense of more temporary memory\n        var sortedData = data.slice().sort(function (a, b) {\n            if (a[xKey] < b[xKey]) {\n                return -1;\n            }\n            if (a[xKey] > b[xKey]) {\n                return 1;\n            }\n            return 0;\n        });\n        var bins = [new HistogramBin(derivedBins[0])];\n        var currentBin = 0;\n        for (var i = 0; i < sortedData.length && currentBin < derivedBins.length; i++) {\n            var datum = sortedData[i];\n            while (datum[xKey] > derivedBins[currentBin][1] && currentBin < derivedBins.length) {\n                currentBin++;\n                bins.push(new HistogramBin(derivedBins[currentBin]));\n            }\n            if (currentBin < derivedBins.length) {\n                bins[currentBin].addDatum(datum);\n            }\n        }\n        bins.forEach(function (b) { return b.calculateAggregatedValue(_this.aggregation, _this.yKey); });\n        return bins;\n    };\n    Object.defineProperty(HistogramSeries.prototype, \"xMax\", {\n        get: function () {\n            var _this = this;\n            return (this.data &&\n                this.data.reduce(function (acc, datum) {\n                    return Math.max(acc, datum[_this.xKey]);\n                }, Number.NEGATIVE_INFINITY));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HistogramSeries.prototype.processData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, xKey, data, yData, yMinMax, firstBin, lastBin, xMin, xMax;\n            var _this = this;\n            return __generator(this, function (_b) {\n                _a = this, xKey = _a.xKey, data = _a.data;\n                this.binnedData = this.placeDataInBins(xKey && data ? data : []);\n                yData = this.binnedData.map(function (b) { return b.getY(_this.areaPlot); });\n                yMinMax = extent(yData, isContinuous);\n                this.yDomain = this.fixNumericExtent([0, yMinMax ? yMinMax[1] : 1]);\n                firstBin = this.binnedData[0];\n                lastBin = this.binnedData[this.binnedData.length - 1];\n                xMin = firstBin.domain[0];\n                xMax = lastBin.domain[1];\n                this.xDomain = [xMin, xMax];\n                return [2 /*return*/];\n            });\n        });\n    };\n    HistogramSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    HistogramSeries.prototype.getNodeClickEvent = function (event, datum) {\n        return new CartesianSeriesNodeClickEvent(this.xKey, this.yKey, event, datum, this);\n    };\n    HistogramSeries.prototype.createNodeData = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, xAxis, yAxis, xScale, yScale, _b, fill, stroke, strokeWidth, seriesId, nodeData, defaultLabelFormatter, _c, _d, labelFormatter, labelFontStyle, labelFontWeight, labelFontSize, labelFontFamily, labelColor;\n            var _this = this;\n            return __generator(this, function (_e) {\n                _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis;\n                if (!this.seriesItemEnabled || !xAxis || !yAxis) {\n                    return [2 /*return*/, []];\n                }\n                xScale = xAxis.scale;\n                yScale = yAxis.scale;\n                _b = this, fill = _b.fill, stroke = _b.stroke, strokeWidth = _b.strokeWidth, seriesId = _b.id;\n                nodeData = [];\n                defaultLabelFormatter = function (params) { return String(params.value); };\n                _c = this.label, _d = _c.formatter, labelFormatter = _d === void 0 ? defaultLabelFormatter : _d, labelFontStyle = _c.fontStyle, labelFontWeight = _c.fontWeight, labelFontSize = _c.fontSize, labelFontFamily = _c.fontFamily, labelColor = _c.color;\n                this.binnedData.forEach(function (binOfData) {\n                    var total = binOfData.aggregatedValue, frequency = binOfData.frequency, _a = __read(binOfData.domain, 2), xDomainMin = _a[0], xDomainMax = _a[1], relativeHeight = binOfData.relativeHeight;\n                    var xMinPx = xScale.convert(xDomainMin), xMaxPx = xScale.convert(xDomainMax), \n                    // note: assuming can't be negative:\n                    y = _this.areaPlot ? relativeHeight : _this.yKey ? total : frequency, yZeroPx = yScale.convert(0), yMaxPx = yScale.convert(y), w = xMaxPx - xMinPx, h = Math.abs(yMaxPx - yZeroPx);\n                    var selectionDatumLabel = y !== 0\n                        ? {\n                            text: labelFormatter({ value: binOfData.aggregatedValue, seriesId: seriesId }),\n                            fontStyle: labelFontStyle,\n                            fontWeight: labelFontWeight,\n                            fontSize: labelFontSize,\n                            fontFamily: labelFontFamily,\n                            fill: labelColor,\n                            x: xMinPx + w / 2,\n                            y: yMaxPx + h / 2,\n                        }\n                        : undefined;\n                    nodeData.push({\n                        series: _this,\n                        datum: binOfData,\n                        // since each selection is an aggregation of multiple data.\n                        x: xMinPx,\n                        y: yMaxPx,\n                        width: w,\n                        height: h,\n                        fill: fill,\n                        stroke: stroke,\n                        strokeWidth: strokeWidth,\n                        label: selectionDatumLabel,\n                    });\n                });\n                return [2 /*return*/, [{ itemId: this.yKey, nodeData: nodeData, labelData: nodeData }]];\n            });\n        });\n    };\n    HistogramSeries.prototype.updateDatumSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var nodeData, datumSelection, updateRects, enterRects;\n            return __generator(this, function (_a) {\n                nodeData = opts.nodeData, datumSelection = opts.datumSelection;\n                updateRects = datumSelection.setData(nodeData);\n                updateRects.exit.remove();\n                enterRects = updateRects.enter.append(Rect).each(function (rect) {\n                    rect.tag = HistogramSeriesNodeTag.Bin;\n                    rect.crisp = true;\n                });\n                return [2 /*return*/, updateRects.merge(enterRects)];\n            });\n        });\n    };\n    HistogramSeries.prototype.updateDatumNodes = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var datumSelection, isDatumHighlighted, _a, seriesFillOpacity, strokeOpacity, shadow, _b, deprecatedFill, deprecatedStroke, deprecatedStrokeWidth, _c, _d, highlightedFill, _e, highlightFillOpacity, _f, highlightedStroke, _g, highlightedDatumStrokeWidth;\n            var _this = this;\n            return __generator(this, function (_h) {\n                datumSelection = opts.datumSelection, isDatumHighlighted = opts.isHighlight;\n                _a = this, seriesFillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, shadow = _a.shadow, _b = _a.highlightStyle, deprecatedFill = _b.fill, deprecatedStroke = _b.stroke, deprecatedStrokeWidth = _b.strokeWidth, _c = _b.item, _d = _c.fill, highlightedFill = _d === void 0 ? deprecatedFill : _d, _e = _c.fillOpacity, highlightFillOpacity = _e === void 0 ? seriesFillOpacity : _e, _f = _c.stroke, highlightedStroke = _f === void 0 ? deprecatedStroke : _f, _g = _c.strokeWidth, highlightedDatumStrokeWidth = _g === void 0 ? deprecatedStrokeWidth : _g;\n                datumSelection.each(function (rect, datum, index) {\n                    var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined\n                        ? highlightedDatumStrokeWidth\n                        : datum.strokeWidth;\n                    var fillOpacity = isDatumHighlighted ? highlightFillOpacity : seriesFillOpacity;\n                    rect.x = datum.x;\n                    rect.y = datum.y;\n                    rect.width = datum.width;\n                    rect.height = datum.height;\n                    rect.fill = isDatumHighlighted && highlightedFill !== undefined ? highlightedFill : datum.fill;\n                    rect.stroke = isDatumHighlighted && highlightedStroke !== undefined ? highlightedStroke : datum.stroke;\n                    rect.fillOpacity = fillOpacity;\n                    rect.strokeOpacity = strokeOpacity;\n                    rect.strokeWidth = strokeWidth;\n                    rect.lineDash = _this.lineDash;\n                    rect.lineDashOffset = _this.lineDashOffset;\n                    rect.fillShadow = shadow;\n                    rect.zIndex = isDatumHighlighted ? Series.highlightedZIndex : index;\n                    rect.visible = datum.height > 0; // prevent stroke from rendering for zero height columns\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    HistogramSeries.prototype.updateLabelSelection = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var labelData, labelSelection, updateTexts, enterTexts;\n            return __generator(this, function (_a) {\n                labelData = opts.labelData, labelSelection = opts.labelSelection;\n                updateTexts = labelSelection.setData(labelData);\n                updateTexts.exit.remove();\n                enterTexts = updateTexts.enter.append(Text).each(function (text) {\n                    text.tag = HistogramSeriesNodeTag.Label;\n                    text.pointerEvents = PointerEvents.None;\n                    text.textAlign = 'center';\n                    text.textBaseline = 'middle';\n                });\n                return [2 /*return*/, updateTexts.merge(enterTexts)];\n            });\n        });\n    };\n    HistogramSeries.prototype.updateLabelNodes = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var labelSelection, labelEnabled;\n            return __generator(this, function (_a) {\n                labelSelection = opts.labelSelection;\n                labelEnabled = this.label.enabled;\n                labelSelection.each(function (text, datum) {\n                    var label = datum.label;\n                    if (label && labelEnabled) {\n                        text.text = label.text;\n                        text.x = label.x;\n                        text.y = label.y;\n                        text.fontStyle = label.fontStyle;\n                        text.fontWeight = label.fontWeight;\n                        text.fontSize = label.fontSize;\n                        text.fontFamily = label.fontFamily;\n                        text.fill = label.fill;\n                        text.visible = true;\n                    }\n                    else {\n                        text.visible = false;\n                    }\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    HistogramSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        if (!xKey || !xAxis || !yAxis) {\n            return '';\n        }\n        var _b = this, xName = _b.xName, yName = _b.yName, color = _b.fill, tooltip = _b.tooltip, aggregation = _b.aggregation, seriesId = _b.id;\n        var tooltipRenderer = tooltip.renderer;\n        var bin = nodeDatum.datum;\n        var aggregatedValue = bin.aggregatedValue, frequency = bin.frequency, _c = __read(bin.domain, 2), rangeMin = _c[0], rangeMax = _c[1];\n        var title = sanitizeHtml(xName || xKey) + \": \" + xAxis.formatDatum(rangeMin) + \" - \" + xAxis.formatDatum(rangeMax);\n        var content = yKey\n            ? \"<b>\" + sanitizeHtml(yName || yKey) + \" (\" + aggregation + \")</b>: \" + yAxis.formatDatum(aggregatedValue) + \"<br>\"\n            : '';\n        content += \"<b>Frequency</b>: \" + frequency;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content,\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: bin,\n                xKey: xKey,\n                xValue: bin.domain,\n                xName: xName,\n                yKey: yKey,\n                yValue: bin.aggregatedValue,\n                yName: yName,\n                color: color,\n                title: title,\n                seriesId: seriesId,\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    HistogramSeries.prototype.getLegendData = function () {\n        var _a = this, id = _a.id, data = _a.data, xKey = _a.xKey, yName = _a.yName, visible = _a.visible, fill = _a.fill, stroke = _a.stroke, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (!data || data.length === 0) {\n            return [];\n        }\n        return [\n            {\n                id: id,\n                itemId: xKey,\n                seriesId: id,\n                enabled: visible,\n                label: {\n                    text: yName || xKey || 'Frequency',\n                },\n                marker: {\n                    fill: fill || 'rgba(0, 0, 0, 0)',\n                    stroke: stroke || 'rgba(0, 0, 0, 0)',\n                    fillOpacity: fillOpacity,\n                    strokeOpacity: strokeOpacity,\n                },\n            },\n        ];\n    };\n    HistogramSeries.prototype.isLabelEnabled = function () {\n        return this.label.enabled;\n    };\n    HistogramSeries.className = 'HistogramSeries';\n    HistogramSeries.type = 'histogram';\n    __decorate([\n        Validate(OPT_COLOR_STRING)\n    ], HistogramSeries.prototype, \"fill\", void 0);\n    __decorate([\n        Validate(OPT_COLOR_STRING)\n    ], HistogramSeries.prototype, \"stroke\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], HistogramSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        Validate(NUMBER(0, 1))\n    ], HistogramSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        Validate(OPT_LINE_DASH)\n    ], HistogramSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], HistogramSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], HistogramSeries.prototype, \"xKey\", void 0);\n    __decorate([\n        Validate(BOOLEAN)\n    ], HistogramSeries.prototype, \"areaPlot\", void 0);\n    __decorate([\n        Validate(OPT_ARRAY())\n    ], HistogramSeries.prototype, \"bins\", void 0);\n    __decorate([\n        Validate(HISTOGRAM_AGGREGATION)\n    ], HistogramSeries.prototype, \"aggregation\", void 0);\n    __decorate([\n        Validate(OPT_NUMBER(0))\n    ], HistogramSeries.prototype, \"binCount\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], HistogramSeries.prototype, \"xName\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], HistogramSeries.prototype, \"yKey\", void 0);\n    __decorate([\n        Validate(STRING)\n    ], HistogramSeries.prototype, \"yName\", void 0);\n    __decorate([\n        Validate(NUMBER(0))\n    ], HistogramSeries.prototype, \"strokeWidth\", void 0);\n    return HistogramSeries;\n}(CartesianSeries));\nexport { HistogramSeries };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}